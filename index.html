<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Full Reading Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            line-height: 1.4;
            font-size: 16px;
        }

        .header {
            background-color: #ffffff;
            padding: 12px 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            height: 60px;
        }

        .ielts-logo {
            display: none;
        }

        .test-info {
            display: flex;
            align-items: center;
            gap: 30px;
            font-size: 14px;
            color: #333;
        }

        .audio-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
        }

        .audio-icon {
            width: 16px;
            height: 16px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg>') no-repeat center;
        }

        .header-icons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        #volume-slider {
            -webkit-appearance: none;
            width: 80px;
            height: 4px;
            background: #ddd;
            outline: none;
            border-radius: 2px;
            cursor: pointer;
        }

        #volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #333;
            cursor: pointer;
        }

        #volume-slider::-moz-range-thumb {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #333;
            cursor: pointer;
            border: none;
        }

        .icon {
            width: 20px;
            height: 20px;
            cursor: pointer;
            opacity: 0.7;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .icon:hover {
            opacity: 1;
        }
        
        #play-pause-btn {
            background: none;
            border: none;
            padding: 0;
        }

        .main-container {
            margin-top: 60px;
            display: flex;
            flex-direction: column;
            background: #ffffff;
            height: calc(100vh - 60px); /* Full height minus header */
        }

        .panels-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .passage-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
        }

        /* Passage Content */
        .text-center {
            text-align: center;
        }
        .reading-passage h4 {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
       
        .reading-passage p {
            margin-bottom: 1.2em;
        }

        .question ul li label {
            display: block;
            margin-top: 8px;
            cursor: pointer;
        }

        .questions-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
            border-left: 1px solid #e0e0e0;
        }

        .resizer {
            width: 10px;
            cursor: col-resize;
            background-color: #f0f0f0;
            background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="30" viewBox="0 0 10 30"><path d="M4 11h2v2H4zM4 15h2v2H4zM4 19h2v2H4z" fill="%23888"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
            flex-shrink: 0;
            flex-grow: 0;
        }

        /* Left Panel */
        .left-panel {
            width: 100%;
            padding: 20px;
        }

        /* Right Panel */
        .right-panel {
            display: none;
            width: 50%;
            padding: 20px;
            position: relative;
        }

        .help-button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 20px;
        }

        .help-button:hover {
            background: #357abd;
        }

        .section-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .people-section {
            margin-bottom: 30px;
        }

        .people-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #ccc;
        }

        .people-table th {
            text-align: left;
            padding: 10px;
            font-weight: bold;
            border: 1px solid #ddd;
        }

        .people-table td {
            padding: 8px 10px;
            border: 1px solid #ddd;
        }

        .person-name {
            font-size: 16px;
        }

        .question-number {
            background: white;
            border: 1px solid #4a90e2;
            padding: 4px 8px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 14px;
            color: #4a90e2;
            min-width: 30px;
            text-align: center;
        }

        .assigned-responsibility {
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 14px;
            border: 1px solid #ddd;
        }

        .responsibilities-section {
            margin-bottom: 30px;
        }

        .responsibility-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .responsibility-item {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            text-align: center;
            transition: all 0.2s;
        }

        .responsibility-item:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .responsibility-item.dragging {
            opacity: 0.5;
        }

        .questions-section {
            margin-bottom: 20px;
        }

        .question-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .instruction {
            margin-bottom: 20px;
            font-size: 16px;
            color: #666;
        }

        /* Map Styles */
        .map-container {
            position: relative;
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }

        .map-svg {
            border: 2px solid #333;
            background: white;
        }

        .map-room {
            fill: #f9f9f9;
            stroke: #333;
            stroke-width: 1;
        }

        .map-text {
            font-family: Arial, sans-serif;
            font-size: 13px;
            text-anchor: middle;
            fill: #333;
        }

        .map-number {
            font-family: Arial, sans-serif;
            font-size: 16px;
            font-weight: bold;
            text-anchor: middle;
            fill: #333;
        }

        .room-labels {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .room-label {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            text-align: center;
            transition: all 0.2s;
        }

        .room-label:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .room-label.dragging {
            opacity: 0.5;
        }

        /* Navigation Arrows */
        .nav-arrows {
            position: fixed;
            bottom: 100px;
            right: 20px;
            display: flex;
            gap: 5px;
            z-index: 101;
        }

        .nav-arrow {
            width: 50px;
            height: 50px;
            background: #333;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
        }

        .nav-arrow:hover {
            background: #555;
        }

        .nav-arrow:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Bottom Navigation - Equal Sections */
        .nav-row {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #ffffff;
            padding: 8px 16px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            align-items: center;
            height: 60px;
            z-index: 100;
            gap: 8px;
        }

        .footer__questionWrapper___1tZ46 {
            display: flex;
            align-items: center;
            position: relative;
            transition: background-color 0.2s;
            border-radius: 4px;
            padding: 4px 8px;
            width: 100%;
            height: 100%;
            justify-content: center;
        }


        .footer__questionWrapper___1tZ46.selected {
            justify-content: flex-start;
        }

        .footer__questionNo___3WNct {
            background: none;
            border: none;
            padding: 4px 8px;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: none;
            min-width: 120px;
            position: relative;
        }



        
        .footer__questionWrapper___1tZ46:first-child:not(.selected) {
            justify-content: center;
        }

        .footer__questionWrapper___1tZ46:nth-child(2):not(.selected) {
            justify-content: center;
        }

        .footer__questionWrapper___1tZ46:nth-child(3):not(.selected) {
            justify-content: center;
        }

        .footer__questionWrapper___1tZ46:hover {
            background-color: #f0f0f0;
        }

        .footer__questionNo___3WNct:hover {
            background-color: transparent;
        }

        .section-prefix {
            font-size: 16px;
        }

        .sectionNr {
            font-size: 16px;
            font-weight: bold;
        }

        .attemptedCount {
            font-size: 14px;
            color: #666;
            margin-left: 8px;
            font-weight: 400;
        }

        @media (max-width: 768px) {
            .attemptedCount {
                display: none;
            }
        }

        .footer__questionWrapper___1tZ46.selected .attemptedCount {
            display: none !important;
        }

        .footer__questionWrapper___1tZ46:not(.selected) .attemptedCount {
            display: inline;
        }

        .footer__subquestionWrapper___9GgoP {
            display: none;
            gap: 3px;
            margin-left: 12px;
            flex-wrap: nowrap;
            align-items: center;
        }

        .footer__questionWrapper___1tZ46.selected .footer__subquestionWrapper___9GgoP {
            display: flex;
        }

        .subQuestion {
            width: 28px;
            height: 28px;
            border: 1px solid #ddd;
            background: white;
            color: #333;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            border-radius: 4px;
            margin: 1px;
            flex-shrink: 0;
        }

        .subQuestion.answered {
            background-color: #4CAF50;
            border-color: #4CAF50;
            color: white;
        }
        
        .subQuestion.correct {
            background-color: #28a745 !important;
            color: white !important;
            border-color: #28a745 !important;
        }
        
        .subQuestion.incorrect {
            background-color: #dc3545 !important;
            color: white !important;
            border-color: #dc3545 !important;
        }

        .subQuestion:hover {
            background-color: #f0f0f0;
            border-color: #ccc;
        }

        .subQuestion.active {
            background-color: #2196f3;
            color: white;
            border-color: #2196f3;
            box-shadow: 0 2px 4px rgba(33, 150, 243, 0.3);
        }

        .subQuestion.completed {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .footer__deliverButton___3FM07 {
            background-color: #f8f9fa;
            color: #333;
            border: 1px solid #dee2e6;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
            min-width: 40px;
            justify-content: center;
            height: 36px;
            margin-left: 16px;
            flex-shrink: 0;
        }

        .footer__deliverButton___3FM07:hover {
            background-color: #e9ecef;
            border-color: #adb5bd;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .footer__deliverButton___3FM07:disabled {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
            border-color: #ddd;
        }

        .fa-check::before {
            content: "✓";
        }

        .hidden {
            display: none !important;
        }

        /* Context Menu */
        .context-menu {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
            min-width: 140px;
        }

        .context-menu-item {
            padding: 12px 16px;
            cursor: pointer;
            font-size: 16px;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .context-menu-item:hover {
            background-color: #f8f9fa;
        }

        .context-menu-item:last-child {
            border-bottom: none;
        }

        .highlight {
            background-color: #ffff00;
        }

        .comment-highlight {
            background-color: #90EE90;
            position: relative;
            cursor: help;
        }

        .comment-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            white-space: nowrap;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .comment-highlight:hover .comment-tooltip {
            opacity: 1;
        }

        .question {
            margin-bottom: 40px;
        }
        .question p {
            margin-bottom: 10px;
        }
        .question ul, .question .people-table {
            margin-top: 0;
        }
        .question-prompt {
            margin-bottom: 20px;
        }
        .question ul {
            list-style: none;
            padding-left: 0;
        }
        .question ul li {
            margin-bottom: 5px;
        }
        .answer-input {
            border: 1px solid #888;
            border-radius: 4px;
            background-color: #fff;
            padding: 2px 5px;
            font-size: 16px;
            text-align: center;
            margin-right: 4px;
            margin-left: 4px;
            transition: border-color 0.3s, box-shadow 0.3s;
            height: 28px; /* Standard height */
            width: 150px; /* Standard width */
        }
        .answer-input.active-input {
            border-color: #4a90e2;
            box-shadow: 0 0 3px 1px rgba(74, 144, 226, 0.5);
        }
        .answer-input::placeholder {
            color: #999;
            font-weight: bold;
            text-align: center;
        }
        .answer-input.correct {
            border-color: #28a745;
            background-color: #e9f7ef;
        }
        .answer-input.incorrect {
            border-color: #dc3545;
            background-color: #f8d7da;
            color: #721c24;
        }
        .answer-input {
    z-index: 10;
    position: relative;
    pointer-events: auto;
}
        .drag-drop-container {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            align-items: flex-start;
        }
        .recommendations-box {
            display: flex;
            flex-direction: column;
            gap: 8px;

            min-height: 200px;
        }
        
        /* Styled headings format - matching the image format */
        .recommendations-box .drag-item {
            border: 1px solid #000000;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            font-weight: 600;
            text-align: left;
            transition: all 0.2s;
            user-select: none;
            color: #000000;
        }
        
        .drag-item {
            background: white;
            border: 1px solid #ddd;
            padding: 1px 5px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            transition: all 0.2s;
            user-select: none;
        }
        .drag-item:hover {
            background: #e9ecef;
        }
        .drag-item.dragging {
            opacity: 0.5;
        }
        .drag-item.selected {
            border-color: #4a90e2;
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.5);
        }
        .drop-zone {
            border: 2px dashed #aaa;
            border-radius: 4px;
            width: 50%;
            margin-top: 19px;
            margin-bottom: 5px;
            transition: background-color 0.2s, border-color 0.2s;
            padding: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .drop-zone.drag-over {
            background-color: #e6f4ff;
            border-color: #4a90e2;
        }
        .drop-zone.correct {
            background-color: #e9f7ef;
            border-color: #28a745;
            border-style: solid;
        }
        .drop-zone.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            border-style: solid;
        }
        .drop-zone.disabled {
            pointer-events: none;
        }
        .drop-zone .drag-item {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            padding: 2px;
        }
        .drag-options-container {
            margin-top: 10px;
        }
        .drag-options-container .drag-item {
            display: block;
            width: fit-content;
            font-size: 15px;
            padding: 0.5px 10px;
            margin-bottom: 5px;
        }
        .drag-options-container .drag-item:last-child {
            margin-bottom: 0;
        }
        .q-number {
            color: #888;
            font-size: 14px;
            font-weight: bold;
        }
        .questions-container {
            width: 100%;
        }
        audio {
            width: 100%;
            margin-bottom: 20px;
        }
        .part-header {
            background-color: #f1f2ec;
            padding: 15px 20px;
            border: 1px solid #e0e0e0;
            text-align: left;
            margin: 10px 20px;
            border-radius: 5px;
        }
        .part-header p {
            margin: 0;
        }
        .part-header p:first-child {
            margin-bottom: 5px;
        }

        .question li.correct {
            color: #155724;
            font-weight: bold;
        }
        .question li.incorrect {
            color: #721c24;
        }
        .question li.correct::before {
            content: '✔ ';
            color: #28a745;
        }
        .question li.incorrect::before {
            content: '✖ ';
            color: #dc3545;
        }

        .example-box {
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .timer-container {
            display: flex;
            position: relative;
            cursor: default;
            color: #333;
            font-size: 16px;
            font-weight: 500;
            align-items: center;
        }
        .timer-container .timer-tooltip {
            display: none;
        }

        .timer-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 15px;
        }

        .timer-controls button {
            background: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 50%;
            padding: 0;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        .timer-controls button:hover {
            background: #e0e0e0;
        }

        .timer-controls button svg {
            width: 20px;
            height: 20px;
            fill: #333;
        }

        .audio-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(40, 40, 40, 0.9);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }
        .audio-modal-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            max-width: 500px;
            padding: 20px;
        }
        .audio-modal-content p {
            font-size: 16px;
            line-height: 1.5;
            color: #eee;
        }
        .audio-modal-icon {
            margin-bottom: 20px;
        }
        .modal-play-btn {
            background-color: #000;
            color: white;
            border: 1px solid white;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }
        .modal-play-btn:hover {
            background-color: #333;
        }
        #goto-widget {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #goto-input {
            width: 80px;
            padding: 4px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #goto-btn {
            padding: 4px 10px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Styles for TRUE/FALSE/NOT GIVEN questions */
        .tf-question {
            margin-bottom: 25px;
            padding: 10px 0px;
            border-radius: 4px;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .tf-question-line {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 5px 0px;
            border-radius: 4px;
        }
        .tf-question-number, .question-number-box {
            border: 2px solid #ccc;
            padding: 2px 8px;
            margin-right: 10px;
            border-radius: 3px;
            font-weight: bold;
            transition: border-color 0.3s;
            display: inline-block;
        }
        .tf-question-text {
            padding-top: 3px;
        }
        .tf-options {
            padding-left: 5px;
        }
        .tf-option {
            display: block;
            margin-bottom: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        .tf-option input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        .tf-question.correct .tf-question-line {
            background-color: #e9f7ef;
        }
        .tf-question.incorrect .tf-question-line {
            background-color: #f8d7da;
        }
        .matching-question-container {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        .matching-options-bank {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .matching-questions {
            flex: 1.5;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .matching-question-item {
            display: flex;
            align-items: center;
            gap: 15px;

            border: 2px solid transparent;
            border-radius: 4px;
            transition: border-color 0.3s;
        }
        .matching-question-item > span {
            flex: 1;
        }
        .matching-question-item.correct {
            background-color: #e9f7ef;
            border-color: #28a745 !important;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .matching-question-item .drop-zone {
            width: 200px;
            flex-shrink: 0;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #aaa;
        }
        .matching-options-bank .drag-item {
            font-size: 15px;
            text-align: center;
            border: 1px solid #ccc;
            background: #f9f9f9;
        }

        .questions-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
            border-left: 1px solid #e0e0e0;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .summary-completion-container {
            margin-top: 20px;
        }
        .summary-text p {
            line-height: 2;
            font-size: 16px;
        }
        .summary-drop-zone {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            vertical-align: middle;
            max-width:200px;
            height: 25px;
            border: 2px dashed #999;
            border-radius: 4px;
            margin: 0 5px;
            padding: 0 5px;
            transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s;
            color: #aaa;
            font-weight: bold;
        }
        .summary-drop-zone.filled {
            border-color: #4a90e2;
        }
        .summary-drop-zone.active-input {
             border-color: #4a90e2;
             box-shadow: none;
        }
        .summary-drop-zone .drag-item {
            font-size: 15px;
            font-weight: bold;
            background-color: transparent;
            border: none;
            padding: 0;
            text-align: center;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .summary-options-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .summary-options-bank .drag-item {
            flex-grow: 1;
            min-width: 100px;
            text-align: center;
        }
        .multi-choice-question {
            margin-bottom: 20px;
            border-radius: 4px;
            border: 3px solid transparent;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .multi-choice-option {
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .multi-choice-option label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 16px;
        }
        .multi-choice-option input[type="checkbox"],
        .multi-choice-option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.3);
            accent-color: #4a90e2;
        }
        .multi-choice-option.correct {
            background-color: #e9f7ef;
        }
        .multi-choice-option.incorrect {
            background-color: #f8d7da;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .matching-question-item .drop-zone.filled {
            border-color: #4a90e2;
        }
        .matching-question-item .drop-zone {
            width: 200px;
            height: 40px;
        }
        .paragraph-matching-question {
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 12px;
        }
        .paragraph-matching-question .answer-input {
            width: 80px;
            flex-shrink: 0;
        }

        .matching-form-container {
            margin-top: 20px;
        }
        .matching-form-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        .matching-form-label {
            flex-shrink: 0;
        }

        /* Results Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .modal-overlay.hidden {
            display: none;
        }
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .modal-close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #888;
        }
        .modal-content h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #333;
        }
        .results-summary {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        .results-details-container {
            overflow-y: auto;
            padding-right: 10px; /* For scrollbar */
        }
        .result-row {
            display: grid;
            grid-template-columns: 40px 1fr 1fr;
            gap: 15px;
            padding: 8px 5px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 15px;
        }
        .result-row.incorrect {
            background-color: #f8d7da;
        }
        .result-row .q-num {
            font-weight: bold;
        }
        .result-row .user-ans {
            color: #555;
        }
        .result-row .correct-ans {
            color: #155724;
            font-weight: 500;
        }
        .correct-answer-display {
            font-weight: bold;
            color: #28a745;
            margin-left: 10px;
            font-size: 14px;
        }
        .correct-answer-highlight, .tf-option.correct-answer-highlight, .multi-choice-option.correct-answer-highlight {
            background-color: #d4edda !important;
            border: 1px solid #c3e6cb !important;
            border-radius: 4px;
            padding: 4px;
        }
        .correct-answer-highlight {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
        }
        .centered-title {
                    text-align: center;
                    font-size: 20px;
                    font-weight: bold;
                    margin-bottom: 15px;
                }

        /* Custom Scrollbar Styles */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #888;
            border-radius: 0;
        }

        ::-webkit-scrollbar-thumb:hover {
            background-color: #666;
        }

        /* Firefox scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: #888 transparent;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="timer-container">
            <span class="timer-display">60:00</span>
            <div class="timer-controls">
                <button id="timer-toggle-btn" title="Pause/Resume Timer">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M8 5v14l11-7L8 5z"/></svg>
                </button>
                <button id="timer-reset-btn" title="Reset Timer">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/></svg>
                </button>
            </div>
        </div>
        <h2>JUNED ACADEMY</H2>
    </div>

    <div class="main-container" id="main-container">
        <div id="passage-header-container">
            <div id="part-header-1" class="part-header">
                <p><strong>Part 1</strong></p>
                <p>Read the text and answer questions 1-13.</p>
            </div>
            <div id="part-header-2" class="part-header hidden">
                <p><strong>Part 2</strong></p>
                <p>Read the text and answer questions 14-26.</p>
            </div>
            <div id="part-header-3" class="part-header hidden">
                <p><strong>Part 3</strong></p>
                <p>Read the text and answer questions 27-40.</p>
            </div>
        </div>
        <div class="panels-container">
            <div class="passage-panel" id="passage-panel">
                <div id="passage-text-1" class="reading-passage">
                    <h4 class="text-center">T-Rex Hunter</h4>
                    
                    <p><strong>A</strong>&nbsp;&nbsp;Jack Horner is an unlikely academic: his dyslexia is so bad that he has trouble reading a book. But he can read the imprint of life in sandstone or muddy shale across a distance of 100m years, and it is this gift that has made him curator of palaeontology at Montana State University's Museum of the Rockies, the leader of a multi-million dollar scientific project to expose a complete slice of life 68m years ago, and a consultant to Steven Spielberg and other Hollywood figures.</p>
                    
                    <p><strong>B</strong>&nbsp;&nbsp;His father had a sand and gravel quarry in Montana, and the young Horner was a collector of stones and bones, complete with notes about when and where he found them. "My father had owned a ranch when he was younger, in Montana," he says. "He was enough of a geologist, is a sand and gravel man, to have a pretty good notion that they were dinosaur bones. So when I was eight years old he took me back to the area that had been his ranch, to where he had seen these big old bones. I picked up one. I am pretty sure it was the upper arm bone of a duckbilled dinosaur: it probably wasn't a maiaosaur but closely related to that. I catalogued it, and took good care of it, and then later when I was in high school, excavated my first dinosaur skeleton. It obviously started earlier than eight and I literally have been driven ever since. I feel like I was born this way."</p>
                    
                    <p><strong>C</strong>&nbsp;&nbsp;Horner spent seven years at university but never graduated. "I have a learning disability, I would call it a learning difference – dyslexia, they call it – and I just had a terrible time with English and foreign languages and things like that. For a degree in geology or biology, they required two years of a foreign language. There was no way in the world I could do that. In fact, I didn't really pass English. So I couldn't get a degree, I just wasn't capable of it. But I took all of the courses required and I wrote a thesis and I did all sorts of things. So I have the education, I just don't have the piece of paper," he says.</p>
                    
                    <p><strong>D</strong>&nbsp;&nbsp;In Montana, in those days, everybody had the right to a college education. His grades at high school had been terrible, at university, his advisers recognised that he was having a hard time, and went on helping. The dean who kept readmitting him was to give Horner an honorary doctorate years later. As a young non-graduate, Horner wrote to every museum in the English-speaking world, asking for a job. Los Angeles County Museum and the Royal Ontario Museum in Toronto made offers, but he accepted a post as a technician at Princeton University because of Princeton, New Jersey.</p>
                    
                    <p><strong>E</strong>&nbsp;&nbsp;"We definitely know we are working on a very broad coastal plain with the streams and rivers bordered by conifers and hardwood plants, and the areas in between these rivers were probably fern-covered. There were no grasses at all: just ferns and bushes – an unusual landscape, kind of taking the south-eastern United States – Georgia, Florida – and mixing it with the moors of England and flattening it out," he says. "Triceratops is very common: they are the cows of the Cretaceous, they are everywhere. Duckbilled dinosaurs are relatively common but not as common as triceratops and T rex, for a meat-eating dinosaur, is very common. What we would consider the predator-prey ratio seems really off the scale. What is interesting is the little dromaeosaurs, the ones we know for sure were good predators, we haven't found any of them."</p>
                    
                    <p><strong>F</strong>&nbsp;&nbsp;Which is why he sees T rex, not as the lion of the Cretaceous savannah but its vulture. "Look at the wildebeest that migrate in the Serengeti of Africa, a million individuals lose about 200,000 individuals in that annual migration. There is a tremendous carrion base there. And so you have hyenas, you have tremendous numbers of vultures that are scavenging, you don't have all that many animals that are good predators. If T rex was a top predator, especially considering how big it is, you'd expect it to be extremely rare, much rarer than the little dromaeosaurs, and yet they are everywhere, they are a dime a dozen," he says. A 12-tonne T rex is a lot of vultures, but he doesn't see the monster as clumsy. He insisted his theory and finding, dedicated to further research upon it, of course, he would like to reevaluate if there is any case that additional evidence found or explanation raised by others in the future.</p>
                    
                    <p><strong>G</strong>&nbsp;&nbsp;He examined the leg bones of the T-rex, and compared the length of the thigh bone (upper leg), to the shin bone (lower leg). He found that the thigh bone was equal in length or slightly longer than the shin bone, and much thicker and heavier. Which proves that the animal was built to be a slow walker rather than fast running. On the other hand, the fossils of fast hunting dinosaurs ALWAYS showed that the shin bone was longer than the thigh bone. This same truth can be observed in many animals of today which are designed to run fast: The ostrich, cheetah, etc.</p>
                    
                    <p><strong>H</strong>&nbsp;&nbsp;He also studied the fossil teeth of the T-rex, and compared them with the teeth of the Velociraptor, and put the nail in the coffin of the "hunter T-rex theory". The Velociraptor's teeth were like steak knives: sharp, razor-edged, and capable of tearing through flesh with ease. The T-Rex's teeth were huge, sharp at their tip, but blunt, propelled by enormous jaw muscles, which enabled them to only crush bones.</p>
                    
                    <p><strong>I</strong>&nbsp;&nbsp;With the evidence presented in his documentary, Horner was able to prove that the idea of the T-rex as being a hunting and ruthless killing machine is probably just a myth. In light of the scientific clues he was able to unearth, the T-rex was a slow, sluggish animal which had poor vision, an extraordinary sense of smell, that often reached its "prey" after the real hunters were done feeding, and sometimes it had to scare the hunters away from a corpse. In order to do that, the T-rex had to have been ugly, nasty-looking, and stinky. This is actually true of nearly all scavenger animal. They are usually vile and nasty looking.</p>
                </div>
                <div id="passage-text-2" class="reading-passage hidden">
                    
                    <h4 class="text-center">Fossil files "The Paleobiology Database"</h4>
                    
                    <div class="drop-zone" data-q-start="14" data-dnd-group="headings" style="margin: 10px 0;border: 2px dashed #999; border-radius: 4px; text-align: center; color: #aaa; font-weight: bold;">14</div>
                    <p>Are we now living through the sixth extinction as our own activities destroy ecosystems and wipe out diversity? That's the doomsday scenario painted by many ecologists, and they may well be right. The trouble is we don't know for sure because we don't have a clear picture of how life changes between extinction events or what has happened in previous episodes. We don't even know how many species are alive today, let alone the rate at which they are becoming extinct. A new project aims to fill some of the gaps. The Paleobiology Database aspires to be an online repository of information about every fossil ever dug up. It is a huge undertaking that has been described as biodiversity's equivalent of the Human Genome Project. Its organizers hope that by recording the history of biodiversity they will gain an insight into how environmental changes have shaped life on Earth in the past and how they might do so in the future. The database may even indicate whether life can rebound no matter what we throw at it, or whether a human-induced extinction could be without parallel, changing the rules that have applied throughout the rest of the planet's history.</p>
                    
                    <div class="drop-zone" data-q-start="15" data-dnd-group="headings" style="margin: 10px 0;border: 2px dashed #999; border-radius: 4px; text-align: center; color: #aaa; font-weight: bold;">15</div>
                    <p>But already the project is attracting harsh criticism. Some experts believe it to be seriously flawed. They point out that a database is only as good as the data fed into it, and that even if all the current fossil finds were catalogued, they would provide an incomplete inventory of life because we are far from discovering every fossilised species. They say that researchers should get up from their computers and get back into the dirt to dig up new fossils. Others are more sceptical still, arguing that we can never get the full picture because the fossil record is riddled with holes and biases.</p>
                    
                    <div class="drop-zone" data-q-start="16" data-dnd-group="headings" style="margin: 10px 0;border: 2px dashed #999; border-radius: 4px; text-align: center; color: #aaa; font-weight: bold;">16</div>
                    <p>Fans of the Paleobiology Database acknowledge that the fossil record will always be incomplete. But they see value in looking for global patterns that show relative changes in biodiversity. "The fossil record is the best tool we have for understanding how diversity and extinction work in normal times," says John Alroy from the National Center for Ecological Analysis and Synthesis in Santa Barbara. "Having a background extinction estimate gives us a benchmark for understanding the mass extinction that's currently underway. It allows us to say just how bad it is in relative terms."</p>
                    
                    <div class="drop-zone" data-q-start="17" data-dnd-group="headings" style="margin: 10px 0;border: 2px dashed #999; border-radius: 4px; text-align: center; color: #aaa; font-weight: bold;">17</div>
                    <p>To this end, the Paleobiology Database aims to be the most thorough attempt yet to come up with good global diversity curves. Every day between 10 and 15 scientists around the world add information about fossil finds to the database. Since it got up and running in 1998, scientists have entered almost 340,000 specimens, ranging from plants to whales to insects to dinosaurs to sea urchins. Overall totals are updated hourly at www. paleodb.org. Anyone can download data from the public part of the site and play with the numbers to their heart's content. Already, the database has thrown up some surprising results. Looking at the big picture, Alroy and his colleagues believe they have found evidence that biodiversity reached a plateau long ago, contrary to the received wisdom that species numbers have increased continuously between extinction events. "The traditional view is that diversity has gone up and up and up," he says. "Our research is showing that diversity limits were approached many tens of millions of years before the dinosaurs evolved, much less suffered extinction." This suggests that only a certain number of species can live on Earth at a time, filling a prescribed number of niches like spaces in a multi-storey car park. Once it's full, no more new species can squeeze in, until extinctions free up new spaces or something rare and catastrophic adds a new floor to the car park.</p>
                    
                    <div class="drop-zone" data-q-start="18" data-dnd-group="headings" style="margin: 10px 0;border: 2px dashed #999; border-radius: 4px; text-align: center; color: #aaa; font-weight: bold;">18</div>
                    <p>Alroy has also used the database to reassess the accuracy of species names. His findings suggest that irregularities in classification inflate the overall number of species in the fossil record by between 32 and 44 per cent. Single species often end up with several names, he says, due to misidentification or poor communication between taxonomists in different countries. Repetition like this can distort diversity curves. "If you have really bad taxonomy in one short interval, it will look like a diversity spike – a big diversification followed by a big extinction – when all that has happened is a change in the quality of names," says Alroy. For example, his statistical analysis indicated that of the 4861 North American fossil mammal species catalogued in the database, between 24 and 31 per cent will eventually prove to be duplicated.</p>
                    
                    <div class="drop-zone" data-q-start="19" data-dnd-group="headings" style="margin: 10px 0;border: 2px dashed #999; border-radius: 4px; text-align: center; color: #aaa; font-weight: bold;">19</div>
                    <p>Of course, the fossil record is undeniably patchy. Some places and times have left behind more fossil-filled rocks than others. Some have been sampled more thoroughly. And certain kinds of creatures – those with hard parts that lived in oceans, for example – are more likely to leave a record behind, while others, like jellyfish, will always remain a mystery. Alroy has also tried to account for this. He estimates, for example, that only 41 per cent of North American mammals that have ever lived are known from fossils, and he suspects that a similar proportion of fossils are missing from other groups, such as fungi and insects.</p>
                    
                    <p><strong>G</strong>&nbsp;&nbsp;Not everyone is impressed with such mathematical wizardry. Jonathan Adrain from the University of Iowa in Iowa City points out that statistical wrangling has been known to create mass extinctions where none occurred. It is easy to misinterpret data. For example, changes in sea level or inconsistent sampling methods can mimic major changes in biodiversity. Indeed, a recent and thorough examination of the literature on marine bivalve fossils has convinced David Jablonsky from the University of Chicago and his colleagues that their diversity has increased steadily over the past 5 million years.</p>
                    
                    <p><strong>H</strong>&nbsp;&nbsp;With an inventory of all living species, ecologists could start to put the current biodiversity crisis in historical perspective. Although creating such a list would be a task to rival even the Palaeobiology Database, it is exactly what the San Francisco-based ALL Species Foundation hopes to achieve in the next 25 years. The effort is essential, says Harvard biologist Edward O. Wilson, who is alarmed by current rates of extinction. "There is a crisis. We've begun to measure it, and it's very high," Wilson says. "We need this kind of information in much more detail to protect all of biodiversity, not just the ones we know well." Let the counting continue.</p>
                
                </div>
                <div id="passage-text-3" class="reading-passage hidden">
                    
                    <h4 class="text-center">Personality and Appearance</h4>
                    
                    <p>When Charles Darwin applied to be the "energetic young man" that Robert Fitzroy, the Beagle's captain, sought as his gentleman companion, he was almost let down by a woeful shortcoming that was as plain as the nose on his face. Fitzroy believed in physiognomy—the idea that you can tell a person's character from their appearance. As Darwin's daughter Henrietta later recalled, Fitzroy had "made up his mind that no man with such a nose could have energy". This was hardly the case. Fortunately, the rest of Darwin's visage compensated for his sluggardly proboscis: "His brow saved him."</p>
                    
                    <p>The idea that a person's character can be glimpsed in their face dates back to the ancient Greeks. It was most famously popularised in the late 18th century by the Swiss poet Johann Lavater, whose ideas became a talking point in intellectual circles. In Darwin's day, they were more or less taken as given. It was only after the subject became associated with phrenology, which fell into disrepute in the late 19th century, that physiognomy was written off as pseudoscience.</p>
                    
                    <p>First impressions are highly influential, despite the well-worn admonition not to judge a book by its cover. Within a tenth of a second of seeing an unfamiliar face we have already made a judgement about its owner's character—caring, trustworthy, aggressive, extrovert, competent and so on. Once that snap judgement has formed, it is surprisingly hard to budge. People also act on these snap judgements. Politicians with competent-looking faces have a greater chance of being elected, and CEOs who look dominant are more likely to run a profitable company. There is also a well-established "attractiveness halo". People seen as good-looking not only get the most valentines but are also judged to be more outgoing, socially competent, powerful, intelligent and healthy.</p>
                    
                    <p>In 1966, psychologists at the University of Michigan asked 84 undergraduates who had never met before to rate each other on five personality traits, based entirely on appearance, as they sat for 15 minutes in silence. For three traits—extroversion, conscientiousness and openness—the observers' rapid judgements matched real personality scores significantly more often than chance. More recently, researchers have re-examined the link between appearance and personality, notably Anthony Little of the University of Stirling and David Perrett of the University of St Andrews, both in the UK. They pointed out that the Michigan studies were not tightly controlled for confounding factors. But when Little and Perrett re-ran the experiment using mugshots rather than live subjects, they also found a link between facial appearance and personality—though only for extroversion and conscientiousness. Little and Perrett claimed that they only found a correlation at the extremes of personality.</p>
                    
                    <p>Justin Carre and Cheryl McCormick of Brock University in Ontario, Canada studied 90 ice-hockey players. They found that a wider face in which the cheekbone-to-cheekbone distance was unusually large relative to the distance between brow and upper lip was linked in a statistically significant way with the number of penalty minutes a player was given for violent acts including slashing, elbowing, checking from behind and fighting. The kernel of truth idea isn't the only explanation on offer for our readiness to make facial judgements. Leslie Zebrowitz, a psychologist at Brandeis University in Waltham, Massachusetts, says that in many cases snap judgements are not accurate. The snap judgement, she says, is often an "overgeneralisation" of a more fundamental response. A classic example of overgeneralisation can be seen in predators' response to eye spots, the conspicuous circular markings seen on some moths, butterflies and fish. These act as a deterrent to predators because they mimic the eyes of other creatures that the potential predators might see as a threat.</p>
                    
                    <p>Another researcher who leans towards overgeneralisation is Alexander Todorov. With Princeton colleague Nikolaas Oosterhof, he recently put forward a theory which he says explains our snap judgements of faces in terms of how threatening they appear. Todorov and Oosterhof asked people for their gut reactions to pictures of emotionally neutral faces, sifted through all the responses, and boiled them down to two underlying factors: how trustworthy the face looks, and how dominant. Todorov and Oosterhof conclude that personality judgements based on people's faces are an overgeneralisation of our evolved ability to infer emotions from facial expressions, and hence a person's intention to cause us harm and their ability to carry it out. Todorov, however, stresses that overgeneralisation does not rule out the idea that there is sometimes a kernel of truth in these assessments of personality.</p>
                    
                    <p>So if there is a kernel of truth, where does it come from? Perrett has a hunch that the link arises when our prejudices about faces turn into self-fulfilling prophecies—an idea that was investigated by other researchers back in 1977. Our expectations can lead us to influence people to behave in ways that confirm those expectations: consistently treat someone as untrustworthy and they end up behaving that way. This effect sometimes works the other way round, however, especially for those who look cute. The Nobel prize-winning ethologist Konrad Lorenz once suggested that baby-faced features evoke a nurturing response. Support for this has come from work by Zebrowitz, who has found that baby-faced boys and men stimulate an emotional centre of the brain, the amygdala, in a similar way. But there's a twist. Babyfaced men are, on average, better educated, more assertive and apt to win more military medals than their mature-looking counterparts. They are also more likely to be criminals; think Al Capone. Similarly, Zebrowitz found baby-faced boys to be quarrelsome and hostile, and more likely to be academic highfliers. She calls this the "self-defeating prophecy effect": a man with a baby face strives to confound expectations and ends up overcompensating.</p>
                    
                    <p>There is another theory that recalls the old parental warning not to pull faces because they might freeze that way. According to this theory, our personality moulds the way our faces look. It is supported by a study two decades ago which found that angry old people tend to look cross even when asked to strike a neutral expression. A lifetime of scowling, grumpiness and grimaces seemed to have left its mark.</p>
                </div>
            </div>
            <div class="resizer" id="resizer"></div>
            <div class="questions-panel" id="questions-panel">
                <div id="questions-1" class="question-set">
                    <div class="questions-container">
                        <div class="question" data-q-start="1" data-q-end="7">
                            <div class="question-prompt">
                                <p><strong>Questions 1-7</strong><br>Do the following statements agree with the information given in Reading Passage 1?</p>
                                <p>In boxes 1-7 on your answer sheet, write</p>
                                <ul style="list-style: none; padding-left: 0;">
                                    <li><strong>TRUE</strong> if the statement is true</li>
                                    <li><strong>FALSE</strong> if the statement is false</li>
                                    <li><strong>NOT GIVEN</strong> if the information is not given in the passage</li>
                                </ul>
                            </div>
                            <div class="tf-question" data-q-start="1" data-q-end="1">
                                <div class="tf-question-line"><span class="tf-question-number">1</span><span class="tf-question-text">Jack Horner knew exactly the bone belonged to a certain dinosaur when he was in father's ranch at the age of 8.</span></div>
                                <div class="tf-options"><label class="tf-option"><input type="radio" name="q1" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q1" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q1" value="NOT GIVEN"> NOT GIVEN</label></div>
                            </div>
                            <div class="tf-question" data-q-start="2" data-q-end="2">
                                <div class="tf-question-line"><span class="tf-question-number">2</span><span class="tf-question-text">Jack Horner achieved a distinctive degree in university when he graduated.</span></div>
                                <div class="tf-options"><label class="tf-option"><input type="radio" name="q2" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q2" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q2" value="NOT GIVEN"> NOT GIVEN</label></div>
                            </div>
                            <div class="tf-question" data-q-start="3" data-q-end="3">
                                <div class="tf-question-line"><span class="tf-question-number">3</span><span class="tf-question-text">Jack Horner is the first man that discovered T-Rex's bone in the world.</span></div>
                                <div class="tf-options"><label class="tf-option"><input type="radio" name="q3" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q3" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q3" value="NOT GIVEN"> NOT GIVEN</label></div>
                            </div>
                            <div class="tf-question" data-q-start="4" data-q-end="4">
                                <div class="tf-question-line"><span class="tf-question-number">4</span><span class="tf-question-text">Jack Horner believes that the number of prey should be more than that of the predator.</span></div>
                                <div class="tf-options"><label class="tf-option"><input type="radio" name="q4" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q4" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q4" value="NOT GIVEN"> NOT GIVEN</label></div>
                            </div>
                            <div class="tf-question" data-q-start="5" data-q-end="5">
                                <div class="tf-question-line"><span class="tf-question-number">5</span><span class="tf-question-text">T-rex's number is equivalent to the number of vulture in the Serengeti.</span></div>
                                <div class="tf-options"><label class="tf-option"><input type="radio" name="q5" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q5" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q5" value="NOT GIVEN"> NOT GIVEN</label></div>
                            </div>
                            <div class="tf-question" data-q-start="6" data-q-end="6">
                                <div class="tf-question-line"><span class="tf-question-number">6</span><span class="tf-question-text">The hypothesis that T-rex is top predator conflicts with the fact of the predator-prey ratio which Jack found.</span></div>
                                <div class="tf-options"><label class="tf-option"><input type="radio" name="q6" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q6" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q6" value="NOT GIVEN"> NOT GIVEN</label></div>
                            </div>
                            <div class="tf-question" data-q-start="7" data-q-end="7">
                                <div class="tf-question-line"><span class="tf-question-number">7</span><span class="tf-question-text">He refused to accept any other viewpoints about T-rex's category.</span></div>
                                <div class="tf-options"><label class="tf-option"><input type="radio" name="q7" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q7" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q7" value="NOT GIVEN"> NOT GIVEN</label></div>
                            </div>
                        </div>
                        <div class="question" data-q-start="8" data-q-end="13">
                            <div class="question-prompt">
                                <p><strong>Questions 8-13</strong><br>Complete the following summary of the paragraphs of Reading Passage.</p>
                                <p>Using <strong>NO MORE THAN TWO WORDS</strong> from the Reading Passage for each answer.</p>
                                <p>Write your answers in boxes 8-13 on your answer sheet.</p>
                            </div>
                            <div class="summary-text">
                                <p>Jack Horner found that T-rex's <input type="text" class="answer-input" id="q8" placeholder="8"> is shorter than the thigh bone, which demonstrated that it was actually a <input type="text" class="answer-input" id="q9" placeholder="9">, unlike other swift animals such as ostrich or <input type="text" class="answer-input" id="q10" placeholder="10"> that was built to <input type="text" class="answer-input" id="q11" placeholder="11">. Another explanation supports his idea is that T-rex's teeth were rather <input type="text" class="answer-input" id="q12" placeholder="12">, which only allowed T-rex to <input type="text" class="answer-input" id="q13" placeholder="13"> hard bones instead of tearing flesh like Velociraptor.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="questions-2" class="question-set hidden">
                    <div class="questions-container">
                        <div class="question" data-q-start="14" data-q-end="19">
                            <div class="question-prompt">
                                <p><strong>Questions 14-19</strong><br>The reading passage has seven paragraphs, <strong>A-F</strong>.</p>
                                <p>Choose the correct heading for paragraphs A-F from the list below and move it into the gap above each paragraph.</p>
                                <p>Write the correct number, <strong>i-vii</strong>, in boxes 14-19 on your answer sheet.</p>
                            </div>
                            
                            <div class="recommendations-box" data-dnd-group="headings" style="width: 100%;">
                                <p><strong>List of Headings</strong></p>
                                <div class="drag-item" draggable="true" data-value="i" data-dnd-group="headings">Potential error exists in the database</div>
                                <div class="drag-item" draggable="true" data-value="ii" data-dnd-group="headings">Supporter of database recleared its value</div>
                                <div class="drag-item" draggable="true" data-value="iii" data-dnd-group="headings">The purpose of this paleobiology data</div>
                                <div class="drag-item" draggable="true" data-value="iv" data-dnd-group="headings">Reason why some certain species were not included in it</div>
                                <div class="drag-item" draggable="true" data-value="v" data-dnd-group="headings">Duplication of the breed but with different names</div>
                                <div class="drag-item" draggable="true" data-value="vi" data-dnd-group="headings">Achievement of Paleobiology Database since</div>
                                <div class="drag-item" draggable="true" data-value="vii" data-dnd-group="headings">Criticism on the project which is a waste of fund</div>
                            </div>
                        </div>
                        <div class="question" data-q-start="20" data-q-end="22">
                            <div class="question-prompt">
                                <p><strong>Questions 20-22</strong><br>Use the information in the passage to match the people (listed A, B or C) with opinions or deeds below.</p>
                                <p>Write the appropriate letters <strong>A, B or C</strong> in boxes 20-22 on your answer sheet.</p>
                                <p><strong>A</strong>&nbsp;&nbsp;Jonathan Adrain<br>
                                <strong>B</strong>&nbsp;&nbsp;John Alroy<br>
                                <strong>C</strong>&nbsp;&nbsp;David Jablonsky<br>
                                <strong>D</strong>&nbsp;&nbsp;Edward O. Wilson</p>
                            </div>
                            <div class="matching-form-container">
                                <div class="matching-form-row">
                                    <label for="q20" class="matching-form-label"><strong>20</strong>&nbsp;&nbsp;Creating the Database would help scientist to identify connections of all species.</label>
                                    <select class="answer-input" id="q20"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q21" class="matching-form-label"><strong>21</strong>&nbsp;&nbsp;Believed in the contribution of detailed statistics should cover beyond the known species.</label>
                                    <select class="answer-input" id="q21"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q22" class="matching-form-label"><strong>22</strong>&nbsp;&nbsp;Reached a contradictory finding to the tremendous species die-out.</label>
                                    <select class="answer-input" id="q22"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option></select>
                                </div>
                            </div>
                        </div>
                        <div class="question" data-q-start="23" data-q-end="24">
                            <div class="question-prompt">
                                <p><strong>Questions 23-24</strong><br>Choose the <strong>TWO</strong> correct letter following</p>
                                <p>Write your answers in boxes 23-24 on your answer sheet.</p>
                                <p>Please choose <strong>TWO CORRECT</strong> descriptions about the The Paleobiology Database in this passage:</p>
                            </div>
                            <div class="multi-choice-question" data-q-start="23" data-q-end="24">
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="checkbox" name="q23-24" value="A"> &nbsp;&nbsp;&nbsp;almost all the experts welcome this project</label></div>
                                    <div class="multi-choice-option"><label><input type="checkbox" name="q23-24" value="B"> &nbsp;&nbsp;&nbsp;intrigues both positive and negative opinions from various experts</label></div>
                                    <div class="multi-choice-option"><label><input type="checkbox" name="q23-24" value="C"> &nbsp;&nbsp;&nbsp;all different creature in the database have a unique name</label></div>
                                    <div class="multi-choice-option"><label><input type="checkbox" name="q23-24" value="D"> &nbsp;&nbsp;&nbsp;aims to embrace all fossil information globally</label></div>
                                    <div class="multi-choice-option"><label><input type="checkbox" name="q23-24" value="E"> &nbsp;&nbsp;&nbsp;get more information from record rather than the field</label></div>
                                </div>
                            </div>
                        </div>
                        <div class="question" data-q-start="25" data-q-end="26">
                            <div class="question-prompt">
                                <p><strong>Questions 25-26</strong><br>Choose the correct letter, <strong>A, B, C or D</strong>.</p>
                                <p>Write your answers in boxes 25-26 on your answer sheet.</p>
                            </div>
                            <div class="multi-choice-question" data-q-start="25" data-q-end="25">
                                <p><strong>25</strong>&nbsp;&nbsp;According to the passage, jellyfish belongs to which category of The Paleobiology Database?</p>
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q25" value="A"> &nbsp;&nbsp;&nbsp;repetition breed</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q25" value="B"> &nbsp;&nbsp;&nbsp;untraceable species</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q25" value="C"> &nbsp;&nbsp;&nbsp;specifically detailed species</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q25" value="D"> &nbsp;&nbsp;&nbsp;currently living creature</label></div>
                                </div>
                            </div>
                            <div class="multi-choice-question" data-q-start="26" data-q-end="26">
                                <p><strong>26</strong>&nbsp;&nbsp;What is the author's suggestion according to the end of the passage?</p>
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q26" value="A"> &nbsp;&nbsp;&nbsp;continue to complete counting the number of species in the Paleobiology Database</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q26" value="B"> &nbsp;&nbsp;&nbsp;stop contributing The Paleobiology Database</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q26" value="C"> &nbsp;&nbsp;&nbsp;try to create a database of a living creature</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q26" value="D"> &nbsp;&nbsp;&nbsp;study more in the field rather than in the book</label></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="questions-3" class="question-set hidden">
                    <div class="questions-container">
                        <div class="question" data-q-start="27" data-q-end="31">
                            <div class="question-prompt">
                                <p><strong>Questions 27-31</strong><br>Do the following statements agree with the views of the writer in Reading Passage 3?</p>
                                <p>In boxes 27-31 on your answer sheet, write</p>
                                <ul style="list-style: none; padding-left: 0;">
                                    <li><strong>YES</strong> if the statement agrees with the views of the writer</li>
                                    <li><strong>NO</strong> if the statement contradicts the views of the writer</li>
                                    <li><strong>NOT GIVEN</strong> if it is impossible to say that the writer thinks about this</li>
                                </ul>
                            </div>
                            <div class="tf-question" data-q-start="27" data-q-end="27">
                                <div class="tf-question-line">
                                    <span class="tf-question-number">27</span>
                                    <span class="tf-question-text">Robert Fitzroy's first impression of Darwin was accurate.</span>
                                </div>
                                <div class="tf-options">
                                    <label class="tf-option"><input type="radio" name="q27" value="YES"> YES</label>
                                    <label class="tf-option"><input type="radio" name="q27" value="NO"> NO</label>
                                    <label class="tf-option"><input type="radio" name="q27" value="NOT GIVEN"> NOT GIVEN</label>
                                </div>
                            </div>
                            <div class="tf-question" data-q-start="28" data-q-end="28">
                                <div class="tf-question-line">
                                    <span class="tf-question-number">28</span>
                                    <span class="tf-question-text">The precise rules of "physiognomy" have remained unchanged since the 18th century.</span>
                                </div>
                                <div class="tf-options">
                                    <label class="tf-option"><input type="radio" name="q28" value="YES"> YES</label>
                                    <label class="tf-option"><input type="radio" name="q28" value="NO"> NO</label>
                                    <label class="tf-option"><input type="radio" name="q28" value="NOT GIVEN"> NOT GIVEN</label>
                                </div>
                            </div>
                            <div class="tf-question" data-q-start="29" data-q-end="29">
                                <div class="tf-question-line">
                                    <span class="tf-question-number">29</span>
                                    <span class="tf-question-text">The first impression of a person can be modified later with little effort.</span>
                                </div>
                                <div class="tf-options">
                                    <label class="tf-option"><input type="radio" name="q29" value="YES"> YES</label>
                                    <label class="tf-option"><input type="radio" name="q29" value="NO"> NO</label>
                                    <label class="tf-option"><input type="radio" name="q29" value="NOT GIVEN"> NOT GIVEN</label>
                                </div>
                            </div>
                            <div class="tf-question" data-q-start="30" data-q-end="30">
                                <div class="tf-question-line">
                                    <span class="tf-question-number">30</span>
                                    <span class="tf-question-text">People who appear capable are more likely to be chosen to a position of power.</span>
                                </div>
                                <div class="tf-options">
                                    <label class="tf-option"><input type="radio" name="q30" value="YES"> YES</label>
                                    <label class="tf-option"><input type="radio" name="q30" value="NO"> NO</label>
                                    <label class="tf-option"><input type="radio" name="q30" value="NOT GIVEN"> NOT GIVEN</label>
                                </div>
                            </div>
                            <div class="tf-question" data-q-start="31" data-q-end="31">
                                <div class="tf-question-line">
                                    <span class="tf-question-number">31</span>
                                    <span class="tf-question-text">It is unfair for good-looking people to be better treated in society.</span>
                                </div>
                                <div class="tf-options">
                                    <label class="tf-option"><input type="radio" name="q31" value="YES"> YES</label>
                                    <label class="tf-option"><input type="radio" name="q31" value="NO"> NO</label>
                                    <label class="tf-option"><input type="radio" name="q31" value="NOT GIVEN"> NOT GIVEN</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="question" data-q-start="32" data-q-end="36">
                            <div class="question-prompt">
                                <p><strong>Questions 32-36</strong><br>Choose the correct letter, <strong>A, B, C or D</strong>.</p>
                                <p>Write your answers in boxes 32-36 on your answer sheet.</p>
                            </div>
                            <div class="multi-choice-question" data-q-start="32" data-q-end="32">
                                <p><strong>32</strong>&nbsp;&nbsp;What's true about Anthony Little and David Perrett's experiment?</p>
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q32" value="A"> &nbsp;&nbsp;&nbsp;It is based on the belief that none of the conclusions in the Michigan experiment is accurate.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q32" value="B"> &nbsp;&nbsp;&nbsp;It supports parts of the conclusions in the Michigan experiment.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q32" value="C"> &nbsp;&nbsp;&nbsp;It replicates the study conditions in the Michigan experiment.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q32" value="D"> &nbsp;&nbsp;&nbsp;It has a greater range of faces than in the Michigan experiment.</label></div>
                                </div>
                            </div>
                            <div class="multi-choice-question" data-q-start="33" data-q-end="33">
                                <p><strong>33</strong>&nbsp;&nbsp;What can be concluded from Justin Carre and Cheryl McCormick's experiment?</p>
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q33" value="A"> &nbsp;&nbsp;&nbsp;A wide-faced man may be more aggressive.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q33" value="B"> &nbsp;&nbsp;&nbsp;Aggressive men have a wide range of facial features.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q33" value="C"> &nbsp;&nbsp;&nbsp;There is no relation between facial features and an aggressive character.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q33" value="D"> &nbsp;&nbsp;&nbsp;It's necessary for people to be aggressive in competitive games.</label></div>
                                </div>
                            </div>
                            <div class="multi-choice-question" data-q-start="34" data-q-end="34">
                                <p><strong>34</strong>&nbsp;&nbsp;What's exemplified by referring to butterfly marks?</p>
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q34" value="A"> &nbsp;&nbsp;&nbsp;Threats to safety are easy to notice.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q34" value="B"> &nbsp;&nbsp;&nbsp;Instinct does not necessarily lead to accurate judgment.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q34" value="C"> &nbsp;&nbsp;&nbsp;People should learn to distinguish between accountable and unaccountable judgments.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q34" value="D"> &nbsp;&nbsp;&nbsp;Different species have various ways to notice danger.</label></div>
                                </div>
                            </div>
                            <div class="multi-choice-question" data-q-start="35" data-q-end="35">
                                <p><strong>35</strong>&nbsp;&nbsp;What is the aim of Alexander Todorov's study?</p>
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q35" value="A"> &nbsp;&nbsp;&nbsp;to determine the correlation between facial features and social development</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q35" value="B"> &nbsp;&nbsp;&nbsp;to undermine the belief that appearance is important</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q35" value="C"> &nbsp;&nbsp;&nbsp;to learn the influence of facial features on judgments of a person's personality</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q35" value="D"> &nbsp;&nbsp;&nbsp;to study the role of judgments in a person's relationship</label></div>
                                </div>
                            </div>
                            <div class="multi-choice-question" data-q-start="36" data-q-end="36">
                                <p><strong>36</strong>&nbsp;&nbsp;Which of the following is the conclusion of Alexander Todorov's study?</p>
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q36" value="A"> &nbsp;&nbsp;&nbsp;People should draw accurate judgments from overgeneralization.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q36" value="B"> &nbsp;&nbsp;&nbsp;Using appearance to determine a person's character is undependable.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q36" value="C"> &nbsp;&nbsp;&nbsp;Overgeneralization can be misleading as a way to determine a person's character.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q36" value="D"> &nbsp;&nbsp;&nbsp;The judgment of a person's character based on appearance may be accurate.</label></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="question" data-q-start="37" data-q-end="40">
                            <div class="question-prompt">
                                <p><strong>Questions 37-40</strong><br>Complete each sentence with the correct ending,<strong>A-F</strong>, below.</p>
                                <p>Write the correct letter, <strong>A-F</strong>, in boxes 37-40 on your answer sheet.</p>
                                <div style="margin: 20px 0;">
                                    <p><strong>A</strong>&nbsp;&nbsp;judge other people by overgeneralization,</p>
                                    <p><strong>B</strong>&nbsp;&nbsp;may influence the behaviour of other people,</p>
                                    <p><strong>C</strong>&nbsp;&nbsp;tend to commit criminal acts.</p>
                                    <p><strong>D</strong>&nbsp;&nbsp;may be influenced by the low expectations of other people.</p>
                                    <p><strong>E</strong>&nbsp;&nbsp;may show the effect of long-term behaviours.</p>
                                    <p><strong>F</strong>&nbsp;&nbsp;may be trying to repel the expectations of other people.</p>
                                </div>
                            </div>
                            <table class="people-table" style="width: 100%; border-collapse: collapse; border: 1px solid #4a90e2;">
                                <thead>
                                    <tr style="background-color: #4a90e2; color: white;">
                                        <th style="padding: 10px; text-align: left; border: 1px solid #4a90e2;">Statements</th>
                                        <th style="padding: 10px; text-align: center; border: 1px solid #4a90e2; width: 60px;">A</th>
                                        <th style="padding: 10px; text-align: center; border: 1px solid #4a90e2; width: 60px;">B</th>
                                        <th style="padding: 10px; text-align: center; border: 1px solid #4a90e2; width: 60px;">C</th>
                                        <th style="padding: 10px; text-align: center; border: 1px solid #4a90e2; width: 60px;">D</th>
                                        <th style="padding: 10px; text-align: center; border: 1px solid #4a90e2; width: 60px;">E</th>
                                        <th style="padding: 10px; text-align: center; border: 1px solid #4a90e2; width: 60px;">F</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>37</strong>&nbsp;&nbsp;Perret believed people behaving dishonestly</td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q37" value="A"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q37" value="B"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q37" value="C"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q37" value="D"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q37" value="E"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q37" value="F"></td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>38</strong>&nbsp;&nbsp;The writer supports the view that people with babyish features</td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q38" value="A"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q38" value="B"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q38" value="C"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q38" value="D"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q38" value="E"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q38" value="F"></td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>39</strong>&nbsp;&nbsp;According to Zebrowitz, baby-faced people who behave dominantly</td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q39" value="A"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q39" value="B"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q39" value="C"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q39" value="D"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q39" value="E"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q39" value="F"></td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>40</strong>&nbsp;&nbsp;The writer believes facial features</td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q40" value="A"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q40" value="B"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q40" value="C"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q40" value="D"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q40" value="E"></td>
                                        <td style="padding: 10px; text-align: center; border: 1px solid #ddd;"><input type="radio" name="q40" value="F"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation Arrows -->
    <div class="nav-arrows">
        <button class="nav-arrow" onclick="previousQuestion()" id="prevBtn">‹</button>
        <button class="nav-arrow" onclick="nextQuestion()" id="nextBtn">›</button>
    </div>

    <!-- Bottom Navigation -->
    <nav class="nav-row perScorableItem" aria-label="Questions">
        <div class="footer__questionWrapper___1tZ46 multiple" role="tablist" onclick="switchToPart(1)" style="cursor: pointer;">
            <button role="tab" class="footer__questionNo___3WNct">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">1</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 13</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(1); event.stopPropagation();"><span class="sr-only">Question 1</span><span aria-hidden="true">1</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(2); event.stopPropagation();"><span class="sr-only">Question 2</span><span aria-hidden="true">2</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(3); event.stopPropagation();"><span class="sr-only">Question 3</span><span aria-hidden="true">3</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(4); event.stopPropagation();"><span class="sr-only">Question 4</span><span aria-hidden="true">4</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(5); event.stopPropagation();"><span class="sr-only">Question 5</span><span aria-hidden="true">5</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(6); event.stopPropagation();"><span class="sr-only">Question 6</span><span aria-hidden="true">6</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(7); event.stopPropagation();"><span class="sr-only">Question 7</span><span aria-hidden="true">7</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(8); event.stopPropagation();"><span class="sr-only">Question 8</span><span aria-hidden="true">8</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(9); event.stopPropagation();"><span class="sr-only">Question 9</span><span aria-hidden="true">9</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(10); event.stopPropagation();"><span class="sr-only">Question 10</span><span aria-hidden="true">10</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(11); event.stopPropagation();"><span class="sr-only">Question 11</span><span aria-hidden="true">11</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(12); event.stopPropagation();"><span class="sr-only">Question 12</span><span aria-hidden="true">12</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(13); event.stopPropagation();"><span class="sr-only">Question 13</span><span aria-hidden="true">13</span></button>
            </div>
        </div>
        
        <div class="footer__questionWrapper___1tZ46 selected multiple" role="tablist" onclick="switchToPart(2)" style="cursor: pointer;">
            <button role="tab" class="footer__questionNo___3WNct">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">2</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 13</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(14); event.stopPropagation();"><span class="sr-only">Question 14</span><span aria-hidden="true">14</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(15); event.stopPropagation();"><span class="sr-only">Question 15</span><span aria-hidden="true">15</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(16); event.stopPropagation();"><span class="sr-only">Question 16</span><span aria-hidden="true">16</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(17); event.stopPropagation();"><span class="sr-only">Question 17</span><span aria-hidden="true">17</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(18); event.stopPropagation();"><span class="sr-only">Question 18</span><span aria-hidden="true">18</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(19); event.stopPropagation();"><span class="sr-only">Question 19</span><span aria-hidden="true">19</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(20); event.stopPropagation();"><span class="sr-only">Question 20</span><span aria-hidden="true">20</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(21); event.stopPropagation();"><span class="sr-only">Question 21</span><span aria-hidden="true">21</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(22); event.stopPropagation();"><span class="sr-only">Question 22</span><span aria-hidden="true">22</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(23); event.stopPropagation();"><span class="sr-only">Question 23</span><span aria-hidden="true">23</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(24); event.stopPropagation();"><span class="sr-only">Question 24</span><span aria-hidden="true">24</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(25); event.stopPropagation();"><span class="sr-only">Question 25</span><span aria-hidden="true">25</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(26); event.stopPropagation();"><span class="sr-only">Question 26</span><span aria-hidden="true">26</span></button>
            </div>
        </div>
        
        <div class="footer__questionWrapper___1tZ46 multiple" role="tablist" onclick="switchToPart(3)" style="cursor: pointer;">
            <button role="tab" class="footer__questionNo___3WNct">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">3</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 14</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(27); event.stopPropagation();"><span class="sr-only">Question 27</span><span aria-hidden="true">27</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(28); event.stopPropagation();"><span class="sr-only">Question 28</span><span aria-hidden="true">28</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(29); event.stopPropagation();"><span class="sr-only">Question 29</span><span aria-hidden="true">29</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(30); event.stopPropagation();"><span class="sr-only">Question 30</span><span aria-hidden="true">30</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(31); event.stopPropagation();"><span class="sr-only">Question 31</span><span aria-hidden="true">31</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(32); event.stopPropagation();"><span class="sr-only">Question 32</span><span aria-hidden="true">32</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(33); event.stopPropagation();"><span class="sr-only">Question 33</span><span aria-hidden="true">33</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(34); event.stopPropagation();"><span class="sr-only">Question 34</span><span aria-hidden="true">34</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(35); event.stopPropagation();"><span class="sr-only">Question 35</span><span aria-hidden="true">35</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(36); event.stopPropagation();"><span class="sr-only">Question 36</span><span aria-hidden="true">36</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(37); event.stopPropagation();"><span class="sr-only">Question 37</span><span aria-hidden="true">37</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(38); event.stopPropagation();"><span class="sr-only">Question 38</span><span aria-hidden="true">38</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(39); event.stopPropagation();"><span class="sr-only">Question 39</span><span aria-hidden="true">39</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(40); event.stopPropagation();"><span class="sr-only">Question 40</span><span aria-hidden="true">40</span></button>
            </div>
        </div>
    </nav>

    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu">
        <div id="menu-highlight" class="context-menu-item" onclick="highlightText()">
            Highlight
        </div>
        <div id="menu-note" class="context-menu-item" onclick="addNote()">
            Note
        </div>
        <div id="menu-clear" class="context-menu-item" onclick="clearHighlight()">
            Clear
        </div>
        <div id="menu-clear-all" class="context-menu-item" onclick="clearAllHighlights()">
            Clear All
        </div>
    </div>

    <div id="results-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="modal-close-btn" onclick="closeResultsModal()">&times;</button>
            <h2>Results</h2>
            <div class="results-summary">
                <p>Score: <span id="results-score"></span> / 40</p>
                <p>IELTS Band: <span id="results-band"></span></p>
            </div>
            <div id="results-details" class="results-details-container">
                <!-- Results for each question will be injected here -->
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- STATE VARIABLES ---
        let currentPassage = 1;
        let currentQuestion = 1;
        let selectedRange = null;
        let timeInSeconds = 3600;
        let timerInterval;
        let draggedItem = null;
        let activeQuestionElement = null;
        let selectedDragItem = null;

        // --- DOM ELEMENTS ---
        const timerDisplay = document.querySelector('.timer-display');
        const timerToggleButton = document.getElementById('timer-toggle-btn');
        const timerResetButton = document.getElementById('timer-reset-btn');
        const deliverButton = document.getElementById('deliver-button');
        const resizer = document.getElementById('resizer');
        const passagePanel = document.getElementById('passage-panel');
        const questionsPanel = document.getElementById('questions-panel');
        const contextMenu = document.getElementById('contextMenu');

        // --- ICON SVGs ---
        const playIcon = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M8 5v14l11-7L8 5z"/></svg>';
        const pauseIcon = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>';

        // --- ANSWERS ---
        const correctAnswers = {
            '1': 'TRUE', '2': 'FALSE', '3': 'NOT GIVEN', '4': 'TRUE', '5': 'NOT GIVEN', '6': 'TRUE', '7': 'FALSE',
            '8': 'shin bone', '9': 'slow walker', '10': 'cheetah', '11': 'run fast', '12': 'blunt', '13': 'crush',
            '14': 'iii', '15': 'i', '16': 'ii', '17': 'vi', '18': 'v', '19': 'iv',
            '20': 'B', '21': 'D', '22': 'C', '23': 'B', '24': 'D', '25': 'B', '26': 'C',
            '27': 'NO', '28': 'NOT GIVEN', '29': 'NO', '30': 'YES', '31': 'NOT GIVEN',
            '32': 'B', '33': 'A', '34': 'B', '35': 'C', '36': 'D',
            '37': 'D', '38': 'C', '39': 'F', '40': 'E'
        };

        // --- INITIALIZATION ---
        function initialize() {
            startTimer();
            initializeDragAndDrop();
            setupCheckboxLimits();
            setupExampleHeading();
            switchToPart(1); // Also calls goToQuestion(1) and updateNavigation
            
            document.body.addEventListener('input', updateAllIndicators);
            document.body.addEventListener('change', updateAllIndicators);
            deliverButton.addEventListener('click', checkAnswers);
            timerToggleButton.addEventListener('click', toggleTimer);
            timerResetButton.addEventListener('click', resetTimer);

            // Add click listeners to question containers for navigation
            document.querySelectorAll('[data-q-start]').forEach(el => {
                el.addEventListener('click', (e) => {
                    // Don't navigate if clicking on form elements or table cells
                    if (e.target.matches('input, select, textarea, label, .tf-option, .multi-choice-option, td, th')) {
                        return;
                    }
                    
                    // Don't navigate if clicking inside a tf-question (individual T/F/NG questions)
                    if (e.target.closest('.tf-question')) {
                        return;
                    }
                    
                    const qNum = parseInt(el.dataset.qStart, 10);
                    if (currentQuestion !== qNum) {
                        goToQuestion(qNum);
                    }
                });
            });

            // Prevent radio button clicks from bubbling up to parent containers
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('click', (e) => {
                    e.stopPropagation();
                    // Update indicators when radio button is clicked
                    setTimeout(() => updateAllIndicators(), 10);
                });
            });

            // Add click handlers for table cells to select radio buttons
            document.querySelectorAll('table td').forEach(cell => {
                const radio = cell.querySelector('input[type="radio"]');
                if (radio) {
                    cell.addEventListener('click', (e) => {
                        if (e.target !== radio) {
                            radio.checked = true;
                            // Trigger change event
                            radio.dispatchEvent(new Event('change', { bubbles: true }));
                            setTimeout(() => updateAllIndicators(), 10);
                        }
                    });
                    // Add hover effect
                    cell.style.cursor = 'pointer';
                }
            });

            resizer.addEventListener('mousedown', initResize, false);
            initializeContextMenu();
        }

        // --- CORE TEST LOGIC ---

        function checkAnswers() {
            // Disable all inputs to prevent changes
            const allInputs = document.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                input.disabled = true;
                input.style.pointerEvents = 'none';
            });

            // Disable all drag and drop functionality
            document.querySelectorAll('.drag-item').forEach(item => {
                item.setAttribute('draggable', 'false');
                item.style.cursor = 'not-allowed';
                item.style.pointerEvents = 'none';
            });

            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.style.pointerEvents = 'none';
                zone.classList.add('disabled');
            });

            // Disable all clickable elements
            document.querySelectorAll('label, .tf-option, .multi-choice-option').forEach(element => {
                element.style.pointerEvents = 'none';
                element.style.cursor = 'not-allowed';
            });

            // Change submit button to show results again
            deliverButton.innerHTML = `<span>My result</span>`;
            deliverButton.removeEventListener('click', checkAnswers);
            deliverButton.addEventListener('click', showResultsModal);
            
            clearInterval(timerInterval);
            let score = 0;
            const totalQuestions = 40;
            const resultsDetailsContainer = document.getElementById('results-details');
            resultsDetailsContainer.innerHTML = '';

            // Clear previous results
            document.querySelectorAll('.correct, .incorrect, .correct-answer-highlight').forEach(el => {
                el.classList.remove('correct', 'incorrect', 'correct-answer-highlight');
            });
            document.querySelectorAll('.correct-answer-display').forEach(el => el.remove());

            for (let i = 1; i <= totalQuestions; i++) {
                const questionKey = String(i);
                const correctAnswer = correctAnswers[questionKey];
                let userAnswer = '';
                let isCorrect = false;
                
                let userAnswerDisplay = 'Not Answered';
                const correctAnswerText = Array.isArray(correctAnswer) ? correctAnswer.join(' / ') : correctAnswer;

                const textInput = document.getElementById(`q${i}`);
                const radioGroup = document.querySelectorAll(`input[name="q${i}"][type="radio"]`);
                
                // Handle drag and drop questions (14-19)
                if (i >= 14 && i <= 19) {
                    const dropZone = document.querySelector(`.drop-zone[data-q-start="${i}"]`);
                    const droppedItem = dropZone ? dropZone.querySelector('.drag-item') : null;
                    
                    if (droppedItem) {
                        userAnswer = droppedItem.dataset.value;
                        userAnswerDisplay = userAnswer;
                        isCorrect = userAnswer === correctAnswer;
                        
                        // Mark the drop zone as correct or incorrect
                        dropZone.classList.add(isCorrect ? 'correct' : 'incorrect');
                        
                        if (isCorrect) {
                            score++;
                        } else {
                            // Highlight the correct answer in the options box (only drag items, not the title)
                            const correctDragItem = document.querySelector(`.recommendations-box .drag-item[data-value="${correctAnswer}"][draggable="true"]`);
                            if (correctDragItem) {
                                correctDragItem.classList.add('correct-answer-highlight');
                            }
                        }
                    } else {
                        // No answer provided - mark as incorrect
                        dropZone.classList.add('incorrect');
                        // Still highlight the correct answer (only drag items, not the title)
                        const correctDragItem = document.querySelector(`.recommendations-box .drag-item[data-value="${correctAnswer}"][draggable="true"]`);
                        if (correctDragItem) {
                            correctDragItem.classList.add('correct-answer-highlight');
                        }
                    }
                }
                // Handle checkbox questions (23-24)
                else if (i === 23 || i === 24) {
                    const checkboxes = document.querySelectorAll(`input[name="q23-24"]:checked`);
                    const selectedValues = Array.from(checkboxes).map(cb => cb.value);
                    userAnswerDisplay = selectedValues.join(', ') || 'Not Answered';
                    
                    if (i === 23) {
                        isCorrect = selectedValues.includes('B');
                        if (isCorrect) score++;
                    } else if (i === 24) {
                        isCorrect = selectedValues.includes('D');
                        if (isCorrect) score++;
                    }
                    
                    // Mark correct/incorrect options
                    checkboxes.forEach(cb => {
                        const option = cb.closest('.multi-choice-option');
                        if (cb.value === correctAnswer) {
                            option.classList.add('correct');
                        } else {
                            option.classList.add('incorrect');
                        }
                    });
                    
                    // Highlight correct answers if not selected
                    const correctCheckbox = document.querySelector(`input[name="q23-24"][value="${correctAnswer}"]`);
                    if (correctCheckbox && !correctCheckbox.checked) {
                        const correctOption = correctCheckbox.closest('.multi-choice-option');
                        if (correctOption) {
                            correctOption.classList.add('correct-answer-highlight');
                        }
                    }
                }
                // Handle Text and Select Inputs
                else if (textInput && (textInput.tagName === 'INPUT' || textInput.tagName === 'SELECT')) {
                    const element = textInput.closest('.matching-form-row') || textInput;
                    userAnswer = textInput.value.trim();
                    userAnswerDisplay = userAnswer || 'Not Answered';

                    if (textInput.tagName === 'SELECT') {
                        isCorrect = userAnswer === correctAnswer;
                    } else {
                        isCorrect = Array.isArray(correctAnswer) ?
                            correctAnswer.some(ans => userAnswer.toLowerCase() === ans.toLowerCase()) :
                            userAnswer.toLowerCase() === correctAnswer.toLowerCase();
                    }
                    
                    if (isCorrect) {
                        score++;
                        element.classList.add('correct');
                    } else {
                        element.classList.add('incorrect');
                        const correctAnswerSpan = document.createElement('span');
                        correctAnswerSpan.className = 'correct-answer-display';
                        correctAnswerSpan.innerHTML = `&nbsp;➜&nbsp;<span class="correct-answer-highlight">${correctAnswerText}</span>`;
                        textInput.parentNode.insertBefore(correctAnswerSpan, textInput.nextSibling);
                    }
                }
                // Handle Radio Button Inputs (T/F, MCQs)
                else if (radioGroup.length > 0) {
                    const questionContainer = radioGroup[0].closest('.tf-question') || radioGroup[0].closest('.multi-choice-question');
                    const checkedRadio = document.querySelector(`input[name="q${i}"]:checked`);

                    if (checkedRadio) {
                        userAnswer = checkedRadio.value;
                        userAnswerDisplay = userAnswer;
                        isCorrect = userAnswer === correctAnswer;

                        const userLabel = checkedRadio.closest('.tf-option, .multi-choice-option');
                        if (userLabel) {
                            userLabel.classList.add(isCorrect ? 'correct' : 'incorrect');
                        }
                    }

                    if (isCorrect) {
                        score++;
                    } else {
                        if (questionContainer){
                            const correctOptionEl = questionContainer.querySelector(`input[value="${correctAnswerText}"]`);
                            if (correctOptionEl) {
                                const correctLabel = correctOptionEl.closest('.tf-option, .multi-choice-option');
                                if (correctLabel) {
                                    correctLabel.classList.add('correct-answer-highlight');
                                }
                            }
                        }
                    }
                }
                 
                // For showing results in the modal
                 const resultRow = `
                    <div class="result-row ${isCorrect ? '' : 'incorrect'}">
                        <span class="q-num">${i}</span>
                        <span class="user-ans">${userAnswerDisplay}</span>
                        <span class="correct-ans">${correctAnswerText}</span>
                    </div>`;
                resultsDetailsContainer.innerHTML += resultRow;
                
                // Update nav button color
                const navButton = document.querySelector(`.subQuestion[onclick*="goToQuestion(${i})"]`);
                if (navButton) {
                    navButton.classList.remove('answered', 'active');
                    navButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
            }

            document.getElementById('results-score').textContent = score;
            document.getElementById('results-band').textContent = calculateBandScore(score);
            document.getElementById('results-modal').classList.remove('hidden');
        }

        function calculateBandScore(score) {
            if (score >= 39) return '9.0';
            const mapping = {
                40: 9.0, 39: 9.0, 38: 8.5, 37: 8.5, 36: 8.0, 35: 8.0, 34: 7.5,
                33: 7.5, 32: 7.0, 31: 7.0, 30: 7.0, 29: 6.5, 28: 6.5, 27: 6.5,
                26: 6.0, 25: 6.0, 24: 6.0, 23: 5.5, 22: 5.5, 21: 5.5, 20: 5.5,
                19: 5.0, 18: 5.0, 17: 5.0, 16: 5.0, 15: 5.0, 14: 4.5, 13: 4.5,
                12: 4.0, 11: 4.0, 10: 4.0, 9: 3.5, 8: 3.5, 7: 3.0, 6: 3.0,
                5: 2.5, 4: 2.5
            };
            if (score <= 0) return 0.0;
            if (score === 1) return 1.0;
            if (score <= 3) return 2.0;
            if (score <= 5) return 2.5;
            return mapping[score] || 0.0;
        }

        function getUserAnswer(qNum) {
            const textInput = document.getElementById(`q${qNum}`);
            const radioInput = document.querySelector(`input[name="q${qNum}"]:checked`);
            
            // Handle drag and drop questions (14-19)
            if (qNum >= 14 && qNum <= 19) {
                const dropZone = document.querySelector(`.drop-zone[data-q-start="${qNum}"]`);
                if (dropZone) {
                    const droppedItem = dropZone.querySelector('.drag-item');
                    return {
                        value: droppedItem ? droppedItem.dataset.value : null,
                        text: droppedItem ? droppedItem.textContent.trim() : 'Not Answered'
                    };
                }
            }

            if (textInput) { // Handles <input type="text"> and <select>
                return { value: textInput.value, text: textInput.value || 'Not Answered' };
            }
            if (radioInput) {
                return { value: radioInput.value, text: radioInput.value };
            }
            
            return { value: null, text: 'Not Answered' };
        }

        function displayCorrectAnswer(qNum, correctAnswer) {
            // Handle multi-choice group questions (e.g., 38-40)
            if (qNum >= 38 && qNum <= 40) {
                 const correctAnswersArr = Array.isArray(correctAnswer) ? correctAnswer : [correctAnswer];
                 correctAnswersArr.forEach(ansValue => {
                    const correctInput = document.querySelector(`input[name="q38-40"][value="${ansValue}"]`);
                    correctInput?.closest('.multi-choice-option')?.classList.add('correct-answer-highlight');
                 });
                 return;
            }

            // Handle radio button questions by highlighting the correct label
            const correctRadioInput = document.querySelector(`input[name="q${qNum}"][value="${correctAnswer}"]`);
            if (correctRadioInput) {
                const parentOption = correctRadioInput.closest('.tf-option, .multi-choice-option');
                if (parentOption) {
                    parentOption.classList.add('correct-answer-highlight');
                    return;
                }
            }

            // Handle text inputs, select dropdowns, and others by showing the answer next to them
            const inputEl = document.getElementById(`q${qNum}`);
            if (inputEl) {
                const displaySpan = document.createElement('span');
                displaySpan.className = 'correct-answer-display';
                displaySpan.textContent = ` ✓ ${correctAnswer}`;
                inputEl.insertAdjacentElement('afterend', displaySpan);
                return; // Done
            }
            
            // Fallback for questions identified by a container (e.g., some T/F/NG questions)
            const element = findQuestionElement(qNum);
            if (element) {
                const displaySpan = document.createElement('span');
                displaySpan.className = 'correct-answer-display';
                displaySpan.textContent = ` ✓ ${correctAnswer}`;
                const itemContainer = element.querySelector('.tf-question-text');
                if (itemContainer) {
                     itemContainer.appendChild(displaySpan);
                } else {
                     element.appendChild(displaySpan);
                }
            }
        }
        
        function findQuestionElement(qNum) {
             return document.querySelector(`[data-q-start="${qNum}"]`);
        }

        function addResultToModal(qNum, userAnswer, correctAnswer, isCorrect) {
            const resultsDetails = document.getElementById('results-details');
            const row = document.createElement('div');
            row.className = 'result-row';
            if (!isCorrect) {
                row.classList.add('incorrect');
            }
            row.innerHTML = `
                <span class="q-num">${qNum}</span>
                <span class="user-ans">${userAnswer}</span>
                <span class="correct-ans">${correctAnswer}</span>
            `;
            resultsDetails.appendChild(row);
        }

        function showResultsModal() {
            document.getElementById('results-modal').classList.remove('hidden');
        }

        window.closeResultsModal = function() {
            document.getElementById('results-modal').classList.add('hidden');
        }
        

        function checkValue(userValue, correctValue) {
            if (userValue === null || userValue === undefined) return false;
            const formattedUserValue = userValue.trim().toLowerCase();
            if (Array.isArray(correctValue)) {
                return correctValue.map(v => v.toLowerCase()).includes(formattedUserValue);
            } else {
                return formattedUserValue === String(correctValue).toLowerCase();
            }
        }

        function markQuestion(qNum, isCorrect) {
            const subQuestionBtn = document.querySelector(`.subQuestion[onclick="goToQuestion(${qNum})"]`);
            subQuestionBtn?.classList.add(isCorrect ? 'correct' : 'incorrect');

            const elementsToMark = [
                document.querySelector(`.tf-question[data-q-start="${qNum}"]`),
                document.querySelector(`.multi-choice-question[data-q-start="${qNum}"]`),
                document.querySelector(`.matching-question-item[data-q-start="${qNum}"]`),
                document.querySelector(`.drop-zone[data-q-start="${qNum}"]`),
                document.getElementById(`q${qNum}`),
                document.querySelector(`input[name="q${qNum}"]:checked`)?.closest('.tf-option'),
                document.querySelector(`input[name="q${qNum}"]:checked`)?.closest('.multi-choice-option')
            ];
            
            elementsToMark.forEach(el => {
                if (el) el.classList.add(isCorrect ? 'correct' : 'incorrect');
            });

             if (qNum === 14 || qNum === 15) {
                const multiChoiceContainer = document.querySelector('.multi-choice-question[data-q-start="14"]');
                if (multiChoiceContainer) multiChoiceContainer.classList.add(isCorrect ? 'correct' : 'incorrect');
             } else if (qNum >= 1 && qNum <= 5) {
                const pMatchInput = document.getElementById(`q${qNum}`);
                if (pMatchInput) pMatchInput.classList.add(isCorrect ? 'correct' : 'incorrect');
             } else if (qNum >= 38 && qNum <= 40) {
                // For this group, individual options are marked, not the container.
             }
        }

        function switchToPart(partNumber, targetQuestion = null) {
            currentPassage = partNumber;

            // Hide all passages and questions
            document.querySelectorAll('.reading-passage, .question-set, .part-header').forEach(el => {
                el.classList.add('hidden');
            });

            // Show the correct passage, questions, and header
            document.getElementById(`passage-text-${partNumber}`).classList.remove('hidden');
            document.getElementById(`questions-${partNumber}`).classList.remove('hidden');
            document.getElementById(`part-header-${partNumber}`).classList.remove('hidden');

            // Update bottom navigation 'selected' state
            document.querySelectorAll('.footer__questionWrapper___1tZ46').forEach((wrapper, index) => {
                wrapper.classList.toggle('selected', (index + 1) === partNumber);
            });

            // Go to the target question if specified, otherwise go to the first question of the part
            if (targetQuestion) {
                // Don't call goToQuestion recursively, just update the UI directly
                currentQuestion = targetQuestion;
                updateNavigation();
                
                if (activeQuestionElement) {
                    activeQuestionElement.classList.remove('active-question', 'active-input');
                }

                let targetEl = document.querySelector(`[data-q-start="${targetQuestion}"]`);

                if (targetEl) {
                    activeQuestionElement = targetEl;
                     if (targetEl.matches('input[type="text"]') || targetEl.matches('select')) {
                         targetEl.classList.add('active-input');
                     } else {
                         targetEl.classList.add('active-question');
                     }
                     scrollIntoViewIfNeeded(targetEl);
                } else {
                     const pMatch = document.querySelector(`.paragraph-matching-question select[id="q${targetQuestion}"]`);
                     if(pMatch) {
                        activeQuestionElement = pMatch;
                        pMatch.classList.add('active-input');
                        scrollIntoViewIfNeeded(pMatch);
                     }
                }
            } else {
                const firstQuestionOfPart = {1: 1, 2: 14, 3: 27}[partNumber];
                goToQuestion(firstQuestionOfPart);
            }
        }
        
        function goToQuestion(questionNumber) {
            currentQuestion = questionNumber;

            let passageNumber = 1;
            if (questionNumber >= 14 && questionNumber <= 26) passageNumber = 2;
            else if (questionNumber >= 27) passageNumber = 3;
            
            if (currentPassage !== passageNumber) {
                switchToPart(passageNumber, questionNumber);
                return;
            }

            if (activeQuestionElement) {
                activeQuestionElement.classList.remove('active-question', 'active-input');
            }

            // First try to find a direct input element with the question ID
            let targetEl = document.getElementById(`q${questionNumber}`);
            
            if (targetEl) {
                activeQuestionElement = targetEl;
                targetEl.classList.add('active-input');
                scrollIntoViewIfNeeded(targetEl);
            } else {
                // Look for the most specific question element first (individual questions)
                // Try to find elements where data-q-start equals data-q-end (individual questions)
                targetEl = document.querySelector(`[data-q-start="${questionNumber}"][data-q-end="${questionNumber}"]`);
                
                if (targetEl) {
                    activeQuestionElement = targetEl;
                    if (targetEl.matches('input[type="text"]') || targetEl.matches('select')) {
                        targetEl.classList.add('active-input');
                    } else {
                        targetEl.classList.add('active-question');
                    }
                    scrollIntoViewIfNeeded(targetEl);
                } else {
                    // If no specific individual question found, look for question containers that contain this question number
                    const containers = document.querySelectorAll('[data-q-start][data-q-end]');
                    for (const container of containers) {
                        const start = parseInt(container.dataset.qStart);
                        const end = parseInt(container.dataset.qEnd);
                        if (questionNumber >= start && questionNumber <= end) {
                            activeQuestionElement = container;
                            container.classList.add('active-question');
                            scrollIntoViewIfNeeded(container);
                            break;
                        }
                    }
                }
            }

            updateNavigation();
        }
        
        // --- UI & NAVIGATION ---

        function updateNavigation() {
            const navButtons = document.querySelectorAll('.subQuestion');
            navButtons.forEach(btn => btn.classList.remove('active'));
            const activeNav = document.querySelector(`.subQuestion[onclick="goToQuestion(${currentQuestion})"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }

            const inputs = document.querySelectorAll('.answer-input, .drop-zone.filled, .summary-drop-zone.filled');
            inputs.forEach(input => input.classList.remove('active-input'));
            
            const activeInput = document.getElementById(`q${currentQuestion}`);
            if (activeInput) {
                activeInput.classList.add('active-input');
                if (typeof activeInput.focus === 'function') {
                    activeInput.focus();
                }
            } else {
                const activeQuestionBlock = document.querySelector(`[data-q-start="${currentQuestion}"]`);
                if (activeQuestionBlock) {
                    const firstInput = activeQuestionBlock.querySelector('input, select');
                    if(firstInput) {
                        firstInput.classList.add('active-input');
                         if (typeof firstInput.focus === 'function') {
                            firstInput.focus();
                        }
                    }
                }
            }
        }
        
        function selectDragItem(item) {
            if (selectedDragItem) {
                selectedDragItem.classList.remove('selected');
            }
            selectedDragItem = item;
            if (selectedDragItem) {
                selectedDragItem.classList.add('selected');
            }
        }
        
        window.nextQuestion = () => currentQuestion < 40 && goToQuestion(currentQuestion + 1);
        window.previousQuestion = () => currentQuestion > 1 && goToQuestion(currentQuestion - 1);

        function updateAllIndicators() {
            updateAttemptedCount(1, 1, 13);
            updateAttemptedCount(2, 14, 26);
            updateAttemptedCount(3, 27, 40);
            updateAnsweredNav();
        }
        
        function updateAnsweredNav() {
            const navButtons = document.querySelectorAll('.subQuestion');
            navButtons.forEach(btn => {
                const qNum = parseInt(btn.textContent, 10);
                if (isQuestionAnswered(qNum)) {
                    btn.classList.add('answered');
                } else {
                    btn.classList.remove('answered');
                }
            });
        }
        
        function isQuestionAnswered(qNum) {
            // Check text inputs and select dropdowns
            const textInput = document.getElementById(`q${qNum}`);
            if (textInput && textInput.value.trim() !== '') {
                return true;
            }
            
            // Check radio buttons
            const radio = document.querySelector(`input[name="q${qNum}"]:checked`);
            if (radio) {
                return true;
            }
            
            // Check checkbox questions (questions 23-24)
            if (qNum === 23 || qNum === 24) {
                const checkboxes = document.querySelectorAll(`input[name="q23-24"]:checked`);
                return checkboxes.length >= 2; // Both questions answered when 2 checkboxes selected
            }
            
            // Check drop zones for drag-and-drop questions (questions 14-19)
            if (qNum >= 14 && qNum <= 19) {
                const dropZone = document.querySelector(`.drop-zone[data-q-start="${qNum}"]`);
                if (dropZone && dropZone.querySelector('.drag-item')) {
                    return true;
                }
            }
            
            return false;
        }

        function scrollIntoViewIfNeeded(element) {
            const panel = element.closest('.questions-panel, .passage-panel');
            const panelRect = panel.getBoundingClientRect();
            const elementRect = element.getBoundingClientRect();
            if (elementRect.top < panelRect.top || elementRect.bottom > panelRect.bottom) {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        // --- DRAG AND DROP ---
        
        function initializeDragAndDrop() {
            document.querySelectorAll('.drag-item').forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
                item.addEventListener('click', () => selectDragItem(item));
            });
            document.querySelectorAll('.drop-zone, .drag-options-container').forEach(zone => {
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('dragleave', handleDragLeave);
                zone.addEventListener('drop', handleDrop);
            });
        }

        function handleDragStart(e) {
            draggedItem = e.target;
            setTimeout(() => e.target.classList.add('dragging'), 0);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            draggedItem = null;
        }

        function handleDragOver(e) {
            e.preventDefault();
            const targetZone = e.currentTarget;
            if (draggedItem && draggedItem.dataset.dndGroup === targetZone.dataset.dndGroup) {
                targetZone.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            const targetZone = e.currentTarget;
            targetZone.classList.remove('drag-over');

            if (!draggedItem || draggedItem.dataset.dndGroup !== targetZone.dataset.dndGroup) {
                return;
            }

            const sourceZone = draggedItem.parentElement;
            if (sourceZone === targetZone) return; // Prevent dropping on itself

            const existingItemInTarget = targetZone.classList.contains('drop-zone')
                ? targetZone.querySelector('.drag-item')
                : null;

            // First, clear the target drop-zone of any text (like question numbers) before adding the new item.
            if (targetZone.classList.contains('drop-zone')) {
                Array.from(targetZone.childNodes).forEach(node => {
                    if (node.nodeType === Node.TEXT_NODE) {
                        node.remove();
                    }
                });
            }

            // Move the item that was in the target (if any) to the source zone.
            if (existingItemInTarget) {
                sourceZone.appendChild(existingItemInTarget);
            }
            
            // Finally, move the dragged item to the target zone.
            targetZone.appendChild(draggedItem);
            targetZone.classList.add('filled');

            // After the move, clean up the source zone if it's a drop-zone and is now empty.
            if (sourceZone.classList.contains('drop-zone') && !sourceZone.querySelector('.drag-item')) {
                 sourceZone.classList.remove('filled');
                 const qNum = sourceZone.dataset.qStart;
                 if (qNum) {
                     sourceZone.innerText = qNum; // Restore the question number
                 }
            }
            
            // Clear any previous result styling
            targetZone.classList.remove('correct', 'incorrect');
            if (sourceZone.classList.contains('drop-zone')) {
                sourceZone.classList.remove('correct', 'incorrect');
            }
            
            updateAllIndicators();
        }
        
        // --- MISC HELPERS ---
        
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval); // Ensure no multiple intervals
            timerInterval = setInterval(() => {
                timeInSeconds--;
                const minutes = Math.floor(timeInSeconds / 60);
                const seconds = timeInSeconds % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                if (timeInSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "Time's up!";
                    // checkAnswers(); // Disabled to prevent modal from opening automatically.
                }
            }, 1000);
            timerToggleButton.innerHTML = pauseIcon;
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            timerToggleButton.innerHTML = playIcon;
        }

        function toggleTimer() {
            // Check based on the icon currently displayed
            if (timerToggleButton.innerHTML.includes('M6 19h4V5H6v14z')) { // Check for pause icon shape
                pauseTimer();
            } else {
                startTimer();
            }
        }

        function resetTimer() {
            timeInSeconds = 3600;
            const minutes = Math.floor(timeInSeconds / 60);
            const seconds = timeInSeconds % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            startTimer();
            timerToggleButton.innerHTML = pauseIcon;
        }
        
        function setupCheckboxLimits() {
            const checkboxGroups = [
                { name: 'q23-24', limit: 2 },
                { name: 'q38-40', limit: 3 }
            ];
            checkboxGroups.forEach(group => {
                const checkboxes = document.querySelectorAll(`input[name="${group.name}"]`);
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        const checkedCount = document.querySelectorAll(`input[name="${group.name}"]:checked`).length;
                        if (checkedCount > group.limit) checkbox.checked = false;
                        updateAllIndicators();
                    });
                });
            });
        }

        function setupExampleHeading() {
            const exampleBox = document.querySelector('.example-box');
            if(exampleBox){
                const title = document.createElement('p');
                title.style.fontWeight = 'bold';
                title.textContent = 'List of Statements';
                // exampleBox.insertBefore(title, exampleBox.firstChild);
            }
        }
        
        function initResize(e) {
            e.preventDefault();
            const startX = e.clientX;
            const startWidth = passagePanel.offsetWidth;
            
            const doDrag = (e) => {
                const newWidth = startWidth + e.clientX - startX;
                if (newWidth > 200 && (document.body.clientWidth - newWidth - resizer.offsetWidth) > 200) {
                    passagePanel.style.flex = `0 0 ${newWidth}px`;
                }
            };
            const stopDrag = () => {
                window.removeEventListener('mousemove', doDrag, false);
                window.removeEventListener('mouseup', stopDrag, false);
            };
            
            window.addEventListener('mousemove', doDrag, false);
            window.addEventListener('mouseup', stopDrag, false);
        }
        
        // --- CONTEXT MENU (Highlighting) ---
        
        function initializeContextMenu() {
            const panels = [passagePanel, questionsPanel];
            let targetElementForClear = null;

            // This listener simply tracks the last valid text selection in either panel.
            document.addEventListener('selectionchange', () => {
                const selection = window.getSelection();
                if (selection && !selection.isCollapsed && selection.toString().trim().length > 0) {
                    const range = selection.getRangeAt(0);
                    if (panels.some(panel => panel.contains(range.commonAncestorContainer))) {
                        selectedRange = range;
                        targetElementForClear = null; // New selection overrides clearing a specific element
                    }
                }
            });

            const showContextMenu = (e) => {
                const target = e.target;
                const isClickOnHighlight = target.closest('.highlight, .comment-highlight');
                const isSelectionActive = selectedRange && selectedRange.toString().trim().length > 0;
                
                let showMenu = false;

                if (isClickOnHighlight) {
                    document.getElementById('menu-highlight').style.display = 'none';
                    document.getElementById('menu-note').style.display = 'none';
                    document.getElementById('menu-clear').style.display = 'block';
                    document.getElementById('menu-clear-all').style.display = 'block';
                    contextMenu.targetElementForClear = isClickOnHighlight;
                    showMenu = true;
                } else if (isSelectionActive && panels.some(panel => panel.contains(selectedRange.commonAncestorContainer))) {
                    document.getElementById('menu-highlight').style.display = 'flex';
                    document.getElementById('menu-note').style.display = 'flex';
                    document.getElementById('menu-clear').style.display = 'none';
                    document.getElementById('menu-clear-all').style.display = 'block'; // Always show clear all
                    showMenu = true;
                }

                if (showMenu) {
                    e.preventDefault();
                    contextMenu.style.display = 'block';
                    const menuHeight = contextMenu.offsetHeight;
                    const menuWidth = contextMenu.offsetWidth;
                    let left = e.pageX;
                    let top = e.pageY;
                    if (left + menuWidth > window.innerWidth) left = window.innerWidth - menuWidth - 5;
                    if (top + menuHeight > window.innerHeight) top = e.pageY - menuHeight - 5;
                    else top = e.pageY - menuHeight - 5;
                    
                    contextMenu.style.left = `${left}px`;
                    contextMenu.style.top = `${top}px`;
                }
            };

            panels.forEach(panel => {
                panel.addEventListener('contextmenu', showContextMenu);
            });

            document.addEventListener('click', (e) => {
                if (contextMenu.style.display === 'block' && !contextMenu.contains(e.target)) {
                    closeContextMenu();
                }
            });
        }

        function closeContextMenu() {
            contextMenu.style.display = 'none';
            selectedRange = null; // Clear range after menu closes
        }

        function unwrapElement(element) {
            const parent = element.parentNode;
            if (!parent) return;
            while (element.firstChild) {
                parent.insertBefore(element.firstChild, element);
            }
            parent.removeChild(element);
            parent.normalize();
        }

        window.highlightText = () => {
            if (selectedRange && !selectedRange.collapsed) {
                try {
                    highlightSelection(selectedRange, 'highlight');
                } catch (e) {
                    console.warn('Highlighting failed:', e);
                }
            }
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        window.addNote = () => {
            const note = prompt('Enter your note:');
            if (note && selectedRange && !selectedRange.collapsed) {
                try {
                    highlightSelection(selectedRange, 'comment-highlight', note);
                } catch (e) {
                    console.warn('Note adding failed:', e);
                }
            }
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        function highlightSelection(range, className, noteText = null) {
            // Get all text nodes within the selection
            const walker = document.createTreeWalker(
                range.commonAncestorContainer,
                NodeFilter.SHOW_TEXT,
                {
                    acceptNode: function(node) {
                        const nodeRange = document.createRange();
                        nodeRange.selectNodeContents(node);
                        return range.intersectsNode(node) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;
                    }
                }
            );

            const textNodes = [];
            let node;
            while (node = walker.nextNode()) {
                textNodes.push(node);
            }

            if (textNodes.length === 0) {
                // Fallback to original method for simple selections
                const contents = range.extractContents();
                const span = document.createElement('span');
                span.className = className;
                if (noteText) {
                    const tooltip = document.createElement('span');
                    tooltip.className = 'comment-tooltip';
                    tooltip.textContent = noteText;
                    span.appendChild(contents);
                    span.appendChild(tooltip);
                } else {
                    span.appendChild(contents);
                }
                range.insertNode(span);
                return;
            }

            // Process each text node
            const nodesToHighlight = [];
            textNodes.forEach(textNode => {
                const nodeRange = document.createRange();
                nodeRange.selectNodeContents(textNode);
                
                // Find intersection with selection
                const intersection = document.createRange();
                intersection.setStart(
                    range.startContainer.compareDocumentPosition(textNode) & Node.DOCUMENT_POSITION_FOLLOWING ?
                    textNode : range.startContainer,
                    range.startContainer.compareDocumentPosition(textNode) & Node.DOCUMENT_POSITION_FOLLOWING ?
                    0 : range.startOffset
                );
                intersection.setEnd(
                    range.endContainer.compareDocumentPosition(textNode) & Node.DOCUMENT_POSITION_PRECEDING ?
                    textNode : range.endContainer,
                    range.endContainer.compareDocumentPosition(textNode) & Node.DOCUMENT_POSITION_PRECEDING ?
                    textNode.textContent.length : range.endOffset
                );

                if (!intersection.collapsed) {
                    nodesToHighlight.push({
                        node: textNode,
                        startOffset: intersection.startOffset,
                        endOffset: intersection.endOffset
                    });
                }
            });

            // Apply highlighting to each node
            nodesToHighlight.reverse().forEach(({node, startOffset, endOffset}) => {
                const beforeText = node.textContent.substring(0, startOffset);
                const highlightText = node.textContent.substring(startOffset, endOffset);
                const afterText = node.textContent.substring(endOffset);

                const span = document.createElement('span');
                span.className = className;
                span.textContent = highlightText;

                if (noteText && className === 'comment-highlight') {
                    const tooltip = document.createElement('span');
                    tooltip.className = 'comment-tooltip';
                    tooltip.textContent = noteText;
                    span.appendChild(tooltip);
                }

                const parent = node.parentNode;
                
                if (beforeText) {
                    parent.insertBefore(document.createTextNode(beforeText), node);
                }
                parent.insertBefore(span, node);
                if (afterText) {
                    parent.insertBefore(document.createTextNode(afterText), node);
                }
                parent.removeChild(node);
            });
        }

        window.clearHighlight = () => {
             const elementToClear = contextMenu.targetElementForClear;
             if (elementToClear) {
                 unwrapElement(elementToClear);
             }
             closeContextMenu();
             window.getSelection().removeAllRanges();
        };
        
        window.clearAllHighlights = () => {
            document.querySelectorAll('.highlight, .comment-highlight').forEach(unwrapElement);
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        function updateAttemptedCount(part, startQ, endQ) {
            let answeredCount = 0;
            for (let i = startQ; i <= endQ; i++) {
                if (isQuestionAnswered(i)) {
                    answeredCount++;
                }
            }
            const partHeader = document.querySelector(`.footer__questionNo___3WNct[onclick="switchToPart(${part})"]`);
            if (partHeader) {
                const countSpan = partHeader.querySelector('.attemptedCount');
                if (countSpan) {
                     countSpan.textContent = `${answeredCount} of ${endQ - startQ + 1}`;
                }
            }
        }

        // --- GLOBAL FUNCTION EXPOSURE ---
        window.nextQuestion = nextQuestion;
        window.previousQuestion = previousQuestion;
        window.goToQuestion = goToQuestion;
        window.switchToPart = switchToPart;
        window.closeResultsModal = closeResultsModal;
        window.highlightText = highlightText;
        window.addNote = addNote;
        window.clearHighlight = clearHighlight;
        window.clearAllHighlights = clearAllHighlights;

        // --- START THE APP ---
        initialize();
    });
    </script>
</body>
</html>
