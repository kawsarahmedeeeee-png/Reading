<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Full Reading Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            line-height: 1.4;
            font-size: 16px;
        }

        .header {
            background-color: #ffffff;
            padding: 12px 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            height: 60px;
        }

        .ielts-logo {
            display: none;
        }

        .test-info {
            display: flex;
            align-items: center;
            gap: 30px;
            font-size: 14px;
            color: #333;
        }

        
#deliver-button {
    pointer-events: none;
    opacity: 0.5;
    cursor: not-allowed;
}


        .audio-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
        }

        .audio-icon {
            width: 16px;
            height: 16px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg>') no-repeat center;
        }

        .header-icons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        
        #volume-slider {
            -webkit-appearance: none;
            width: 80px;
            height: 4px;
            background: #ddd;
            outline: none;
            border-radius: 2px;
            cursor: pointer;
        }

        #volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #333;
            cursor: pointer;
        }

        #volume-slider::-moz-range-thumb {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #333;
            cursor: pointer;
            border: none;
        }

        .icon {
            width: 20px;
            height: 20px;
            cursor: pointer;
            opacity: 0.7;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .icon:hover {
            opacity: 1;
        }
        
        #play-pause-btn {
            background: none;
            border: none;
            padding: 0;
        }

        .main-container {
            margin-top: 60px;
            display: flex;
            flex-direction: column;
            background: #ffffff;
            height: calc(100vh - 60px); /* Full height minus header */
        }

        .panels-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .passage-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
        }

        /* Passage Content */
        .text-center {
            text-align: center;
        }
        .reading-passage h4 {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
       
        .reading-passage p {
            margin-bottom: 1.2em;
        }

        .question ul li label {
            display: block;
            margin-top: 8px;
            cursor: pointer;
        }

        .questions-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
            border-left: 1px solid #e0e0e0;
        }

        .resizer {
            width: 10px;
            cursor: col-resize;
            background-color: #f0f0f0;
            background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="30" viewBox="0 0 10 30"><path d="M4 11h2v2H4zM4 15h2v2H4zM4 19h2v2H4z" fill="%23888"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
            flex-shrink: 0;
            flex-grow: 0;
        }

        /* Left Panel */
        .left-panel {
            width: 100%;
            padding: 20px;
        }

        /* Right Panel */
        .right-panel {
            display: none;
            width: 50%;
            padding: 20px;
            position: relative;
        }

        .help-button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 20px;
        }

        .help-button:hover {
            background: #357abd;
        }

        .section-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .people-section {
            margin-bottom: 30px;
        }

        .people-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #ccc;
        }

        .people-table th {
            text-align: left;
            padding: 10px;
            font-weight: bold;
            border: 1px solid #ddd;
        }

        .people-table td {
            padding: 8px 10px;
            border: 1px solid #ddd;
        }

        .person-name {
            font-size: 16px;
        }

        .question-number {
            background: white;
            border: 1px solid #4a90e2;
            padding: 4px 8px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 14px;
            color: #4a90e2;
            min-width: 30px;
            text-align: center;
        }

        .assigned-responsibility {
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 14px;
            border: 1px solid #ddd;
        }

        .responsibilities-section {
            margin-bottom: 30px;
        }

        .responsibility-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .responsibility-item {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            text-align: center;
            transition: all 0.2s;
        }

        .responsibility-item:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .responsibility-item.dragging {
            opacity: 0.5;
        }

        .questions-section {
            margin-bottom: 20px;
        }

        .question-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .instruction {
            margin-bottom: 20px;
            font-size: 16px;
            color: #666;
        }

        /* Map Styles */
        .map-container {
            position: relative;
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }

        .map-svg {
            border: 2px solid #333;
            background: white;
        }

        .map-room {
            fill: #f9f9f9;
            stroke: #333;
            stroke-width: 1;
        }

        .map-text {
            font-family: Arial, sans-serif;
            font-size: 13px;
            text-anchor: middle;
            fill: #333;
        }

        .map-number {
            font-family: Arial, sans-serif;
            font-size: 16px;
            font-weight: bold;
            text-anchor: middle;
            fill: #333;
        }

        .room-labels {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .room-label {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            text-align: center;
            transition: all 0.2s;
        }

        .room-label:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .room-label.dragging {
            opacity: 0.5;
        }

        /* Navigation Arrows */
        .nav-arrows {
            position: fixed;
            bottom: 100px;
            right: 20px;
            display: flex;
            gap: 5px;
            z-index: 101;
        }

        .nav-arrow {
            width: 50px;
            height: 50px;
            background: #333;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
        }

        .nav-arrow:hover {
            background: #555;
        }

        .nav-arrow:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Bottom Navigation - Equal Sections */
        .nav-row {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #ffffff;
            padding: 8px 16px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            align-items: center;
            height: 60px;
            z-index: 100;
            gap: 8px;
        }

        .footer__questionWrapper___1tZ46 {
            display: flex;
            align-items: center;
            position: relative;
            transition: background-color 0.2s;
            border-radius: 4px;
            padding: 4px 8px;
            width: 100%;
            height: 100%;
            justify-content: center;
        }


        .footer__questionWrapper___1tZ46.selected {
            justify-content: flex-start;
        }

        .footer__questionNo___3WNct {
            background: none;
            border: none;
            padding: 4px 8px;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: none;
            min-width: 120px;
            position: relative;
        }



        
        .footer__questionWrapper___1tZ46:first-child:not(.selected) {
            justify-content: center;
        }

        .footer__questionWrapper___1tZ46:nth-child(2):not(.selected) {
            justify-content: center;
        }

        .footer__questionWrapper___1tZ46:nth-child(3):not(.selected) {
            justify-content: center;
        }

        .footer__questionWrapper___1tZ46:hover {
            background-color: #f0f0f0;
        }

        .footer__questionNo___3WNct:hover {
            background-color: transparent;
        }

        .section-prefix {
            font-size: 16px;
        }

        .sectionNr {
            font-size: 16px;
            font-weight: bold;
        }

        .attemptedCount {
            font-size: 14px;
            color: #666;
            margin-left: 8px;
            font-weight: 400;
        }

        @media (max-width: 768px) {
            .attemptedCount {
                display: none;
            }
        }

        .footer__questionWrapper___1tZ46.selected .attemptedCount {
            display: none !important;
        }

        .footer__questionWrapper___1tZ46:not(.selected) .attemptedCount {
            display: inline;
        }

        .footer__subquestionWrapper___9GgoP {
            display: none;
            gap: 3px;
            margin-left: 12px;
            flex-wrap: nowrap;
            align-items: center;
        }

        .footer__questionWrapper___1tZ46.selected .footer__subquestionWrapper___9GgoP {
            display: flex;
        }

        .subQuestion {
            width: 28px;
            height: 28px;
            border: 1px solid #ddd;
            background: white;
            color: #333;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            border-radius: 4px;
            margin: 1px;
            flex-shrink: 0;
        }

        .subQuestion.answered {
            background-color: #4CAF50;
            border-color: #4CAF50;
            color: white;
        }
        
        .subQuestion.correct {
            background-color: #28a745 !important;
            color: white !important;
            border-color: #28a745 !important;
        }
        
        .subQuestion.incorrect {
            background-color: #dc3545 !important;
            color: white !important;
            border-color: #dc3545 !important;
        }

        .subQuestion:hover {
            background-color: #f0f0f0;
            border-color: #ccc;
        }

        .subQuestion.active {
            background-color: #2196f3;
            color: white;
            border-color: #2196f3;
            box-shadow: 0 2px 4px rgba(33, 150, 243, 0.3);
        }

        .subQuestion.completed {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .footer__deliverButton___3FM07 {
            background-color: #f8f9fa;
            color: #333;
            border: 1px solid #dee2e6;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
            min-width: 40px;
            justify-content: center;
            height: 36px;
            margin-left: 16px;
            flex-shrink: 0;
        }

        .footer__deliverButton___3FM07:hover {
            background-color: #e9ecef;
            border-color: #adb5bd;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .footer__deliverButton___3FM07:disabled {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
            border-color: #ddd;
        }

        .fa-check::before {
            content: "✓";
        }

        .hidden {
            display: none !important;
        }

        /* Context Menu */
        .context-menu {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
            min-width: 140px;
        }

        .context-menu-item {
            padding: 12px 16px;
            cursor: pointer;
            font-size: 16px;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .context-menu-item:hover {
            background-color: #f8f9fa;
        }

        .context-menu-item:last-child {
            border-bottom: none;
        }

        .highlight {
            background-color: #ffff00;
        }

        .comment-highlight {
            background-color: #90EE90;
            position: relative;
            cursor: help;
        }

        .comment-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            white-space: nowrap;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .comment-highlight:hover .comment-tooltip {
            opacity: 1;
        }

        .question {
            margin-bottom: 40px;
        }
        .question p {
            margin-bottom: 10px;
        }
        .question ul, .question .people-table {
            margin-top: 0;
        }
        .question-prompt {
            margin-bottom: 20px;
        }
        .question ul {
            list-style: none;
            padding-left: 0;
        }
        .question ul li {
            margin-bottom: 5px;
        }
        .answer-input {
            border: 1px solid #888;
            border-radius: 4px;
            background-color: #fff;
            padding: 2px 5px;
            font-size: 16px;
            text-align: center;
            margin-right: 4px;
            margin-left: 4px;
            transition: border-color 0.3s, box-shadow 0.3s;
            height: 28px; /* Standard height */
            width: 150px; /* Standard width */
        }
        .answer-input.active-input {
            border-color: #4a90e2;
            box-shadow: 0 0 3px 1px rgba(74, 144, 226, 0.5);
        }
        .answer-input::placeholder {
            color: #999;
            font-weight: bold;
            text-align: center;
        }
        .answer-input.correct {
            border-color: #28a745;
            background-color: #e9f7ef;
        }
        .answer-input.incorrect {
            border-color: #dc3545;
            background-color: #f8d7da;
            color: #721c24;
        }
        .answer-input {
    z-index: 10;
    position: relative;
    pointer-events: auto;
}
        .drag-drop-container {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            align-items: flex-start;
        }
        .recommendations-box {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
            min-height: 200px;
        }
        .drag-item {
            background: white;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            transition: all 0.2s;
            user-select: none;
        }
        .drag-item:hover {
            background: #e9ecef;
        }
        .drag-item.dragging {
            opacity: 0.5;
        }
        .drag-item.selected {
            border-color: #4a90e2;
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.5);
        }
        .drop-zone {
            border: 2px dashed #aaa;
            border-radius: 4px;
            width: 50%;
            margin-top: 19px;
            margin-bottom: 5px;
            transition: background-color 0.2s, border-color 0.2s;
            padding: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .drop-zone.drag-over {
            background-color: #e6f4ff;
            border-color: #4a90e2;
        }
        .drop-zone.correct {
            background-color: #e9f7ef;
            border-color: #28a745;
            border-style: solid;
        }
        .drop-zone.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            border-style: solid;
        }
        .drop-zone.disabled {
            pointer-events: none;
        }
        .drop-zone .drag-item {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            padding: 2px;
        }
        .drag-options-container {
            margin-top: 10px;
        }
        .drag-options-container .drag-item {
            display: block;
            width: fit-content;
            font-size: 15px;
            padding: 0.5px 10px;
            margin-bottom: 5px;
        }
        .drag-options-container .drag-item:last-child {
            margin-bottom: 0;
        }
        .q-number {
            color: #888;
            font-size: 14px;
            font-weight: bold;
        }
        .questions-container {
            width: 100%;
        }
        audio {
            width: 100%;
            margin-bottom: 20px;
        }
        .part-header {
            background-color: #f1f2ec;
            padding: 15px 20px;
            border: 1px solid #e0e0e0;
            text-align: left;
            margin: 10px 20px;
            border-radius: 5px;
        }
        .part-header p {
            margin: 0;
        }
        .part-header p:first-child {
            margin-bottom: 5px;
        }

        .question li.correct {
            color: #155724;
            font-weight: bold;
        }
        .question li.incorrect {
            color: #721c24;
        }
        .question li.correct::before {
            content: '✔ ';
            color: #28a745;
        }
        .question li.incorrect::before {
            content: '✖ ';
            color: #dc3545;
        }

        .example-box {
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .timer-container {
            display: flex;
            position: relative;
            cursor: default;
            color: #333;
            font-size: 16px;
            font-weight: 500;
            align-items: center;
        }
        .timer-container .timer-tooltip {
            display: none;
        }

        .timer-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 15px;
        }

        .timer-controls button {
            background: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 50%;
            padding: 0;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        .timer-controls button:hover {
            background: #e0e0e0;
        }

        .timer-controls button svg {
            width: 20px;
            height: 20px;
            fill: #333;
        }

        .audio-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(40, 40, 40, 0.9);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }
        .audio-modal-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            max-width: 500px;
            padding: 20px;
        }
        .audio-modal-content p {
            font-size: 16px;
            line-height: 1.5;
            color: #eee;
        }
        .audio-modal-icon {
            margin-bottom: 20px;
        }
        .modal-play-btn {
            background-color: #000;
            color: white;
            border: 1px solid white;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }
        .modal-play-btn:hover {
            background-color: #333;
        }
        #goto-widget {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #goto-input {
            width: 80px;
            padding: 4px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #goto-btn {
            padding: 4px 10px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Styles for TRUE/FALSE/NOT GIVEN questions */
        .tf-question {
            margin-bottom: 25px;
            padding: 10px 0px;
            border-radius: 4px;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .tf-question-line {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 5px 0px;
            border-radius: 4px;
        }
        .tf-question-number, .question-number-box {
            border: 2px solid #ccc;
            padding: 2px 8px;
            margin-right: 10px;
            border-radius: 3px;
            font-weight: bold;
            transition: border-color 0.3s;
            display: inline-block;
        }
        .tf-question-text {
            padding-top: 3px;
        }
        .tf-options {
            padding-left: 5px;
        }
        .tf-option {
            display: block;
            margin-bottom: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        .tf-option input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        .tf-question.correct .tf-question-line {
            background-color: #e9f7ef;
        }
        .tf-question.incorrect .tf-question-line {
            background-color: #f8d7da;
        }
        .matching-question-container {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        .matching-options-bank {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .matching-questions {
            flex: 1.5;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .matching-question-item {
            display: flex;
            align-items: center;
            gap: 15px;

            border: 2px solid transparent;
            border-radius: 4px;
            transition: border-color 0.3s;
        }
        .matching-question-item > span {
            flex: 1;
        }
        .matching-question-item.correct {
            background-color: #e9f7ef;
            border-color: #28a745 !important;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .matching-question-item .drop-zone {
            width: 200px;
            flex-shrink: 0;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #aaa;
        }
        .matching-options-bank .drag-item {
            font-size: 15px;
            text-align: center;
            border: 1px solid #ccc;
            background: #f9f9f9;
        }

        .questions-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
            border-left: 1px solid #e0e0e0;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .summary-completion-container {
            margin-top: 20px;
        }
        .summary-text p {
            line-height: 2;
            font-size: 16px;
        }
        .summary-drop-zone {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            vertical-align: middle;
            max-width:200px;
            height: 25px;
            border: 2px dashed #999;
            border-radius: 4px;
            margin: 0 5px;
            padding: 0 5px;
            transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s;
            color: #aaa;
            font-weight: bold;
        }
        .summary-drop-zone.filled {
            border-color: #4a90e2;
        }
        .summary-drop-zone.active-input {
             border-color: #4a90e2;
             box-shadow: none;
        }
        .summary-drop-zone .drag-item {
            font-size: 15px;
            font-weight: bold;
            background-color: transparent;
            border: none;
            padding: 0;
            text-align: center;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .summary-options-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .summary-options-bank .drag-item {
            flex-grow: 1;
            min-width: 100px;
            text-align: center;
        }
        .multi-choice-question {
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 4px;
            border: 3px solid transparent;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .multi-choice-option {
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .multi-choice-option label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 16px;
        }
        .multi-choice-option input[type="checkbox"],
        .multi-choice-option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.3);
            accent-color: #4a90e2;
        }
        .multi-choice-option.correct {
            background-color: #e9f7ef;
        }
        .multi-choice-option.incorrect {
            background-color: #f8d7da;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .matching-question-item .drop-zone.filled {
            border-color: #4a90e2;
        }
        .matching-question-item .drop-zone {
            width: 200px;
            height: 40px;
        }
        .paragraph-matching-question {
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 12px;
        }
        .paragraph-matching-question .answer-input {
            width: 80px;
            flex-shrink: 0;
        }

        .matching-form-container {
            margin-top: 20px;
        }
        .matching-form-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        .matching-form-label {
            width: 180px;
            flex-shrink: 0;
        }

        /* Results Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .modal-overlay.hidden {
            display: none;
        }
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .modal-close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #888;
        }
        .modal-content h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #333;
        }
        .results-summary {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        .results-details-container {
            overflow-y: auto;
            padding-right: 10px; /* For scrollbar */
        }
        .result-row {
            display: grid;
            grid-template-columns: 40px 1fr 1fr;
            gap: 15px;
            padding: 8px 5px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 15px;
        }
        .result-row.incorrect {
            background-color: #f8d7da;
        }
        .result-row .q-num {
            font-weight: bold;
        }
        .result-row .user-ans {
            color: #555;
        }
        .result-row .correct-ans {
            color: #155724;
            font-weight: 500;
        }
        .correct-answer-display {
            font-weight: bold;
            color: #28a745;
            margin-left: 10px;
            font-size: 14px;
        }
        .correct-answer-highlight, .tf-option.correct-answer-highlight, .multi-choice-option.correct-answer-highlight {
            background-color: #d4edda !important;
            border: 1px solid #c3e6cb !important;
            border-radius: 4px;
            padding: 4px;
        }
        .correct-answer-highlight {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
        }
        .centered-title {
                    text-align: center;
                    font-size: 20px;
                    font-weight: bold;
                    margin-bottom: 15px;
                }

        /* Custom Scrollbar Styles */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #888;
            border-radius: 0;
        }

        ::-webkit-scrollbar-thumb:hover {
            background-color: #666;
        }

        /* Firefox scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: #888 transparent;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="timer-container">
            <span class="timer-display">60:00</span>
            <div class="timer-controls">
                <button id="timer-toggle-btn" title="Pause/Resume Timer">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M8 5v14l11-7L8 5z"/></svg>
                </button>
                <button id="timer-reset-btn" title="Reset Timer">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/></svg>
                </button>
            </div>
        </div>
        <a " target="_blank" class="telegram-link">
           <b>Juned Academy</b> 
        </a>
    </div>

    <div class="main-container" id="main-container">
        <div id="passage-header-container">
            <div id="part-header-1" class="part-header">
                <p><strong>Part 1</strong></p>
                <p>Read the text and answer questions 1-13.</p>
            </div>
            <div id="part-header-2" class="part-header hidden">
                <p><strong>Part 2</strong></p>
                <p>Read the text and answer questions 14-26.</p>
            </div>
            <div id="part-header-3" class="part-header hidden">
                <p><strong>Part 3</strong></p>
                <p>Read the text and answer questions 27-40.</p>
            </div>
        </div>
        <div class="panels-container">
            <div class="passage-panel" id="passage-panel">
                <div id="passage-text-1" class="reading-passage">                    
                    <p>With rapid urbanisation, more people now live in cities than in the countryside, and this number is set to rise. For all the benefits cities bestow, they are expensive places. In some years, Tokyo records the highest cost of living; in others, Moscow. In 2014, for expatriates, Luanda, the capital of Angola, received the dubious accolade; and, for Angolans themselves, it had also suddenly become pricey with real estate going through the roof, so to speak, and food being prohibitive – even locally sourced mangoes were $5 a kilo.</p>
                    
                    <p>What can urbanites do to reduce the financial burden of paying for food? Diet? Grow their own? Beg for subsidies? Some economists have proposed that they buy contracts giving rights to a food stream in perpetuity, for example, a kilogram of beef would be delivered weekly from the date the contract started until the end of the owner's life. In essence, this is what house purchase is – indefinite security of a single commodity. As is the case with buying a house, a loan from a financial institution might be necessary for the beef contract, even if it were merely for Australian blade steak and not Japanese Wagu. The contract could also be sold at the current market price if its owner moved out of delivery range or renounced beef.</p>
                    
                    <p>In order to maintain or increase the value of their investment, it is likely some owners would support national and international policies to limit food production – a sound idea in a world where 40% of food goes to waste.</p>
                    
                    <p>But let's imagine, in this system, a consumer purchased a 25-year contract for beef, which, over time, doubled in value. Naturally, at sale, the owner would make a tidy profit. Conversely, if mad cow disease erupted, and no one dared eat beef, then the vendor would suﬀer. If the owner had bought ten beef contracts, he or she might even go bankrupt in this scenario.</p>
                    
                    <p>Let's also imagine that people bought contracts on items they had no intention of consuming: that the health-conscious purchased, yet eschewed, saturated-fat meat; that shrewd amoral vegetarians speculated in beef, as they already buy share portfolios in which multinational agri-business is represented, or they deposit money into banks that do just that on their behalf.</p>
                    
                    <p>It is quite plausible that this speculative behaviour could lead to the overheating of the food-stream market. The state may intervene, attempting to cool things down, or it may tolerate such activity. Indeed, a government that proposed a capital gains tax or high death duties on food-stream contracts might be voted out in favour of another that believed in laissez-faire.* Besides which, an investment contract may be a way to realise wealth when there are few other possibilities either because the stock market is highly volatile, or much of the local economy generates little revenue, as is the case in Angola and many developing countries. Indeed, food-stream speculation could become a middle-class prerogative, indulged in by legislative members themselves.</p>
                    
                    <p>I hope by now, you've realised this essay is a spoof. Yet, the fantastic food-stream market is reminiscent of the global housing market, where homeownership and property speculation have become the privilege of a few at great expense to the many, who either cannot participate, or sign their lives away to banks. You may also have realised that when I bring this topic up at a dinner party, for instance, I am usually shouted down, despite what I believe to be its inherent logic, because my friends consider a house as more tangible than a steak, and their identities are bound up with vague but powerful notions of property rights and independence.</p>
                    
                    <p>I do concede that home-ownership oﬀers security (not having to move, being connected to one particular neighbourhood) and creativity (being able to modify and decorate as you please), but I would prefer people rent rather than buy in an eﬀort to lower property prices and to encourage investment in other sectors of the economy. Economists Moretti and Chang-Tai Hsieh of the University of Chicago have estimated that US output between 1999 and 2009 was 13% lower than it could have been because high housing costs forced so many people to move. Income locked up in housing could otherwise have been spent on local businesses, like restaurants or gyms, and job creation would likely have ensued.</p>
                    
                    <p>So, next time you toss a steak on the barbecue, ponder whether we should treat food in the same way we treat housing, or whether we should treat housing as we do food.</p>
                    
                    <p style="font-style: italic;">*French for 'allow to do'. An economic doctrine advocating that commerce should be free of state controls of any kind.</p>
                </div>
                <div id="passage-text-2" class="reading-passage hidden">
                    
                    <h4 class="text-center">The Eﬀects of Deforestation</h4>
                    
                    <p><strong>A</strong>&nbsp;&nbsp;Every year it is estimated that roughly 5.2 million hectares (52,000 km2) of the forest is lost worldwide. That is a net figure, meaning it represents the area of the forest not replaced. To put this size in context, that is an area of land the size of Croatia lost every single year. There is a wide range of negative effects from deforestation that range from the smallest biological processes right up to the health of our planet as a whole. On a human level, millions of lives are affected every year by flooding and landslides that often result from deforestation.</p>
                    
                    <p><strong>B</strong>&nbsp;&nbsp;There are 5 million people living in areas deemed at risk of flooding in England and Wales. Global warming, in part, worsened by deforestation, is responsible for higher rainfalls in Britain in recent decades. Although it can be argued that demand for cheap housing has meant more houses are being built in at-risk areas, the extent of the flooding is increasing. The presence of forests and trees along streams and rivers acts like a net. The trees catch and store water, but also hold the soil together, preventing erosion. By removing the trees, the land is more easily eroded increasing the risk of landslides and also, after precipitation, less water is intercepted when trees are absent and so more enters rivers, increasing the risk of flooding.</p>
                    
                    <p><strong>C</strong>&nbsp;&nbsp;It is well documented that forests are essential to the atmospheric balance of our planet, and therefore our own wellbeing too. Scientists agree unequivocally that global warming is a real and serious threat to our planet. Deforestation releases 15% of all greenhouse gas emissions. One-third of the carbon dioxide emissions created by human activity comes from deforestation around the globe.</p>
                    
                    <p><strong>D</strong>&nbsp;&nbsp;In his book Collapse, about the disappearance of various ancient civilisations, writer Jared Diamond theorises about the decline of the natives of Easter Island. European missionaries first arrived on the island in 1722. Research suggested that the island, whose population was in the region of two to three thousand at the time, had once been much higher at fifteen thousand people. This small native population survived on the island despite there being no trees at all. Archaeological digs uncovered evidence of trees once flourishing on the island. The uncontrolled deforestation not only led to the eradication of all such natural resources from the island but also greatly impacted the number of people the island could sustain. This underlines the importance of forest management, not only for useful building materials but also for food as well.</p>
                    
                    <p><strong>E</strong>&nbsp;&nbsp;Forestry management is important to make sure that stocks are not depleted and that whatever is cut down is replaced. Without sustainable development of forests, the levels of deforestation are only going to worsen as the global population continues to rise, creating a higher demand for the products of forests. Just as important though is consumer awareness. Simple changes in consumer activity can make a huge difference. These changes in behaviour include, but are not limited to, recycling all recyclable material; buying recycled products and looking for the FSC sustainably sourced forest products logo on any wood or paper products.</p>
                    
                    <p><strong>F</strong>&nbsp;&nbsp;Japan is often used as a model of exemplary forest management. During the Edo period between 1603 and 1868 drastic action was taken to reverse the country's serious exploitative deforestation problem. Whilst the solution was quite complex, one key aspect of its success was the encouragement of cooperation between villagers. This process of collaboration and re-education of the population saved Japan's forests. According to the World Bank, 68.5% of Japanese land area is covered by forest, making it one of the best performing economically developed nations in this regard.</p>
                    
                    <p><strong>G</strong>&nbsp;&nbsp;There is, of course, a negative impact of Japan's forest management. There is still a high demand for wood products in the country, and the majority of these resources are simply imported from other, poorer nations. Indonesia is a prime example of a country that has lost large swaths of its forest cover due to foreign demand from countries like Japan. This is in addition to other issues such as poor domestic forest management, weaker laws and local corruption. Located around the Equator, Indonesia has an ideal climate for the rainforest. Sadly much of this natural resource is lost every year. Forest cover is now down to less than 51% from 65.4% in 1990. This alone is proof that more needs to be done globally to manage forests.</p>
                    
                    <p><strong>H</strong>&nbsp;&nbsp;China is leading the way in recent years for replenishing their forests. The Chinese government began the Three-North Shelter Forest Program in 1978, with aims to complete the planting of a green wall, measuring 2,800 miles in length by its completion in 2050. Of course, this program is in many ways forced by nature itself; the expansion of the Gobi Desert threatened to destroy thousands of square miles of grassland annually through desertification. This is a process often exacerbated by deforestation in the first place, and so represents an attempt to buck the trend. Forested land in China rose from 17% to 22% from 1990 to 2015 making China one of the few developing nations to reverse the negative trend.</p>
                
                </div>
                <div id="passage-text-3" class="reading-passage hidden">
                    
                    <h4 class="text-center">Film Noir</h4>
                    
                    <p>After the Second World War, a curious change came over the outlook of Hollywood films. Rather than the positive, happy-ending stories that dominated the silver screen before the war, pessimism and negativity had entered American cinema. This post-war disillusionment was evident in Hollywood and the movement became known as film noir.</p>
                    
                    <p>One would be mistaken to call film noir a genre. Unlike westerns or romantic comedies, film noir cannot be defined by conventional uses of setting or conflict in a way that is common to genre films. Film noir is more of a movement, pinned to one specific point in time in much the same way as Soviet Montage or German Expressionism was. Instead, the defining quality of film noir was linked to tone, lighting and an often sombre mood.</p>
                    
                    <p>True film noir refers to Hollywood films of the 1940s and early 1950s that dealt with dark themes such as crime and corruption. These films were essentially critiquing certain aspects of American society in a way film had never done before. Since that time there have occasionally been other great noir films made, such as Chinatown, but the mood and tone are often different to the original film noir movies. One possible reason for this is the time in which the films were made. A common perception of art is that it reflects the society and time in which it is made. That makes film noir of the Forties and Fifties quite inimitable because, luckily, the world has not had to endure a war of the scale and destruction of the Second World War again.</p>
                    
                    <p>Paul Schrader, a writer of films like Taxi Driver and Raging Bull, sees film noir as one of Hollywood's best and least-known periods. In his essay Notes on Film Noir, he admits that classifying film noir is almost impossible because many films considered as film noir vary greatly in style. He observed that there were four main traditions in film noir. First were the films specifically about war and post-war disillusionment. Schrader believes these films were not only a reflection of the war but also a delayed reaction to the great economic depression of the 1930s. The trend in Hollywood throughout this period and into the war was to produce films aimed at keeping people's spirits up, hence the positivity. As soon as the war ended, crime fiction started to become popular, which mirrored growing disillusionment in America. Films such as The Blue Dahlia and Dead Reckoning picked up on a trend started during the war with The Maltese Falcon in 1941, which is seen as the first example of film noir.</p>
                    
                    <p>Another film noir tradition was post-war realism. This style of the film was similar to some European films of the same era, such as Italy's neorealist films like Vittorio De Sica's Bicycle Thieves and Roberto Rossellini's Open City. Part of this style was created by filming in real locations and away from constructed sets. The honesty of this style of film suited the post-war mood in America and is demonstrated well in Jules Dassin's Night and the City, much of which was filmed in and around London.</p>
                    
                    <p>The third tradition of film noir according to Paul Schrader involves what he characterises as 'The German Influence'. Especially during the 1920s German Expressionism was one of the most unique and creative forms of cinema. Many German, Austrian and Polish directors immigrated to America before or during the rise of Hitler and in part due to the increasing control and prevention of artistic freedom. Many of them, such as Fritz Lang and Billy Wilder, would find their way into the Hollywood system and to this day remain some of the most celebrated directors of all time.</p>
                    
                    <p>It was the lighting developed in German Expressionism, in particular, that was most influential on film noir. The interplay of light and shadow created by chiaroscuro was highly suggestive of hidden darkness and was largely responsible for creating the mood and feeling of film noir. But it was the coupling of expressionist lighting with realistic settings that really gave film noir its authenticity. It is no surprise then that two of the most popular film noir feature films, Sunset Boulevard and Ace in the Hole, were both directed by Billy Wilder.</p>
                    
                    <p>The final tradition of film noir noted by Schrader is what he dubs 'The Hard-Boiled Tradition'. He notes how American literature of the time was the driving force behind much of this style of film noir. Ernest Hemingway, Raymond Chandler and James M. Cain were tough, cynical and uncompromising and their work reflects this type of attitude. If German Expressionism influenced the visual aspect of film noir, it was this hard-boiled writing style that influenced the characters, stories and scripts depicted on screen. Raymond Chandler adapted the screenplay for the film noir classic Double Indemnity from a James M. Cain story. This writing team, with Billy Wilder, again directing, was the perfect combination for one of Hollywood's most celebrated films.</p>
                </div>
            </div>
            <div class="resizer" id="resizer"></div>
            <div class="questions-panel" id="questions-panel">
                <div id="questions-1" class="question-set">
                    <div class="questions-container">
                        <div class="question" data-q-start="1" data-q-end="7">
                            <div class="question-prompt">
                                <p><strong>Questions 1-7</strong><br>Complete the notes below.</p>
                                <p>Choose <strong>NO MORE THAN TWO WORDS</strong> from the passage for each answer.</p>
                                <p>Write your answers in boxes 1-7 on your answer sheet.</p>
                            </div>
                            <div style="border: 1px solid #000000; padding: 15px;">
                                <div class="summary-text">
                                    <p class="centered-title">A food-stream contract</p>
                                    <ul>
                                        <li style="padding-left: 5px;">&bull;&nbsp;&nbsp;Would guarantee access to one kind of food stream <input type="text" class="answer-input" id="q1" placeholder="1"></li>
                                        <li style="padding-left: 5px;">&bull;&nbsp;&nbsp;Due to its expense, a bank <input type="text" class="answer-input" id="q2" placeholder="2"> might be needed to buy one</li>
                                        <li style="padding-left: 5px;">&bull;&nbsp;&nbsp;Could be bought and sold at the current <input type="text" class="answer-input" id="q3" placeholder="3"></li>
                                        <li style="padding-left: 5px;">&bull;&nbsp;&nbsp;When sold, could result in a decent <input type="text" class="answer-input" id="q4" placeholder="4"> or a considerable loss</li>
                                        <li style="padding-left: 5px;">&bull;&nbsp;&nbsp;Could be purchased on food a person did not plan on <input type="text" class="answer-input" id="q5" placeholder="5"></li>
                                        <li style="padding-left: 5px;">&bull;&nbsp;&nbsp;May be one of the few legitimate ways to make money when the stock market is very <input type="text" class="answer-input" id="q6" placeholder="6"> or other parts of the economy perform poorly</li>
                                        <li style="padding-left: 5px;">&bull;&nbsp;&nbsp;Would probably be a privilege of the <input type="text" class="answer-input" id="q7" placeholder="7"> and members of parliament</li>
                                    </ul>
                                </div>
                            </div>
                            
                        </div>
                        <div class="question" data-q-start="8" data-q-end="13">
                            <div class="question-prompt">
                                <p><strong>Questions 8-12</strong><br>Do the following statements agree with the information given in Reading Passage 1?</p>
                                <p>In boxes 8-12 on your answer sheet write:</p>
                                <ul style="list-style: none; padding-left: 0;">
                                    <li><strong>TRUE</strong> if the statement agrees with the information</li>
                                    <li><strong>FALSE</strong> if the statement contradicts the information</li>
                                    <li><strong>NOT GIVEN</strong> if there is no information on this</li>
                                </ul>
                            </div>
                            <div class="tf-question" data-q-start="8" data-q-end="8">
                                <div class="tf-question-line"><span class="tf-question-number">8</span><span class="tf-question-text">The writer makes an analogy between the current housing and food markets.</span></div>
                                <div class="tf-options"><label class="tf-option"><input type="radio" name="q8" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q8" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q8" value="NOT GIVEN"> NOT GIVEN</label></div>
                            </div>
                            <div class="tf-question" data-q-start="9" data-q-end="9">
                                <div class="tf-question-line"><span class="tf-question-number">9</span><span class="tf-question-text">The writer rents his or her own home.</span></div>
                                <div class="tf-options"><label class="tf-option"><input type="radio" name="q9" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q9" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q9" value="NOT GIVEN"> NOT GIVEN</label></div>
                            </div>
                            <div class="tf-question" data-q-start="10" data-q-end="10">
                                <div class="tf-question-line"><span class="tf-question-number">10</span><span class="tf-question-text">The writer's friends share his or her ideas on the property market.</span></div>
                                <div class="tf-options"><label class="tf-option"><input type="radio" name="q10" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q10" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q10" value="NOT GIVEN"> NOT GIVEN</label></div>
                            </div>
                            <div class="tf-question" data-q-start="11" data-q-end="11">
                                <div class="tf-question-line"><span class="tf-question-number">11</span><span class="tf-question-text">The writer thinks people like to own their homes because they can customise them.</span></div>
                                <div class="tf-options"><label class="tf-option"><input type="radio" name="q11" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q11" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q11" value="NOT GIVEN"> NOT GIVEN</label></div>
                            </div>
                            <div class="tf-question" data-q-start="12" data-q-end="12">
                                <div class="tf-question-line"><span class="tf-question-number">12</span><span class="tf-question-text">Because Americans spent so much on housing, other parts of the economy suﬀered.</span></div>
                                <div class="tf-options"><label class="tf-option"><input type="radio" name="q12" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q12" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q12" value="NOT GIVEN"> NOT GIVEN</label></div>
                            </div>
                        </div>
                        <div class="question" data-q-start="13" data-q-end="13">
                            <div class="question-prompt">
                                <p><strong>Question 13</strong><br>What would be a suitable title for Passage 1?</p>
                                <p>Choose the correct letter <strong>A-E</strong>.</p>
                                <p>Write the correct letter in box 13 on your answer sheet.</p>
                            </div>
                            <div class="multi-choice-question" data-q-start="13" data-q-end="13">
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q13" value="A"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;How to make homes aﬀordable</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q13" value="B"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Buying a house is a bad investment</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q13" value="C"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rethinking the housing market</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q13" value="D"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A new model for buying and selling food</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q13" value="E"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The madness of house and food prices</label></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="questions-2" class="question-set hidden">
                    <div class="questions-container">
                        <div class="question" data-q-start="14" data-q-end="20">
                            <div class="question-prompt">
                                <p><strong>Questions 14-20</strong><br>The reading passage below has eight paragraphs, <strong>A-H</strong>.</p>
                                <p>Choose the correct heading for each paragraph from the list of headings below.</p>
                                <p>Write the correct number, <strong>i-xi</strong>, in boxes 14-20 on your answer sheet.</p>
                            </div>
                            <div class="example-box" style="font-size: 15px;">
                                <p><strong>List of Headings</strong></p>
                                <ul style="list-style-type: lower-roman; margin-left: 20px;">
                                    <li>Atmospheric impacts</li>
                                    <li>Ideal forestry management example</li>
                                    <li>No trees, less people</li>
                                    <li>Good uses for wood</li>
                                    <li>Looking after the forests</li>
                                    <li>Numbers of lost trees</li>
                                    <li>Wasted water</li>
                                    <li>Replanting forests</li>
                                    <li>Happy trees</li>
                                    <li>Flood risks</li>
                                    <li>Poorer nations at higher risk</li>
                                </ul>
                                <p><strong>Example</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>Answer</strong></p>
                                <p>Paragraph A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vi</p>
                            </div>
                            <div class="matching-form-container">
                                <div class="matching-form-row">
                                    <label for="q14" class="matching-form-label"><strong>14</strong>&nbsp;&nbsp;Paragraph B</label>
                                    <select class="answer-input" id="q14"><option value=""></option><option value="i">i</option><option value="ii">ii</option><option value="iii">iii</option><option value="iv">iv</option><option value="v">v</option><option value="vi">vi</option><option value="vii">vii</option><option value="viii">viii</option><option value="ix">ix</option><option value="x">x</option><option value="xi">xi</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q15" class="matching-form-label"><strong>15</strong>&nbsp;&nbsp;Paragraph C</label>
                                    <select class="answer-input" id="q15"><option value=""></option><option value="i">i</option><option value="ii">ii</option><option value="iii">iii</option><option value="iv">iv</option><option value="v">v</option><option value="vi">vi</option><option value="vii">vii</option><option value="viii">viii</option><option value="ix">ix</option><option value="x">x</option><option value="xi">xi</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q16" class="matching-form-label"><strong>16</strong>&nbsp;&nbsp;Paragraph D</label>
                                    <select class="answer-input" id="q16"><option value=""></option><option value="i">i</option><option value="ii">ii</option><option value="iii">iii</option><option value="iv">iv</option><option value="v">v</option><option value="vi">vi</option><option value="vii">vii</option><option value="viii">viii</option><option value="ix">ix</option><option value="x">x</option><option value="xi">xi</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q17" class="matching-form-label"><strong>17</strong>&nbsp;&nbsp;Paragraph E</label>
                                    <select class="answer-input" id="q17"><option value=""></option><option value="i">i</option><option value="ii">ii</option><option value="iii">iii</option><option value="iv">iv</option><option value="v">v</option><option value="vi">vi</option><option value="vii">vii</option><option value="viii">viii</option><option value="ix">ix</option><option value="x">x</option><option value="xi">xi</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q18" class="matching-form-label"><strong>18</strong>&nbsp;&nbsp;Paragraph F</label>
                                    <select class="answer-input" id="q18"><option value=""></option><option value="i">i</option><option value="ii">ii</option><option value="iii">iii</option><option value="iv">iv</option><option value="v">v</option><option value="vi">vi</option><option value="vii">vii</option><option value="viii">viii</option><option value="ix">ix</option><option value="x">x</option><option value="xi">xi</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q19" class="matching-form-label"><strong>19</strong>&nbsp;&nbsp;Paragraph G</label>
                                    <select class="answer-input" id="q19"><option value=""></option><option value="i">i</option><option value="ii">ii</option><option value="iii">iii</option><option value="iv">iv</option><option value="v">v</option><option value="vi">vi</option><option value="vii">vii</option><option value="viii">viii</option><option value="ix">ix</option><option value="x">x</option><option value="xi">xi</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q20" class="matching-form-label"><strong>20</strong>&nbsp;&nbsp;Paragraph H</label>
                                    <select class="answer-input" id="q20"><option value=""></option><option value="i">i</option><option value="ii">ii</option><option value="iii">iii</option><option value="iv">iv</option><option value="v">v</option><option value="vi">vi</option><option value="vii">vii</option><option value="viii">viii</option><option value="ix">ix</option><option value="x">x</option><option value="xi">xi</option></select>
                                </div>
                            </div>
                        </div>
                        <div class="question" data-q-start="21" data-q-end="26">
                            <div class="question-prompt">
                                <p><strong>Questions 21-26</strong><br>Complete the summary below.</p>
                                <p>Choose <strong>NO MORE THAN TWO WORDS AND/OR A NUMBER</strong> from the passage for each answer.</p>
                                <p>Write your answers in boxes 21-26 on your answer sheet.</p>
                            </div>
                            <div class="summary-text">
                                <p>The effects of deforestation are widespread and various. Some examples include flooding at a local scale to the wider effects of global warming on a worldwide scale. In Britain, for example, <input type="text" class="answer-input" id="q21" placeholder="21">  people live in areas at risk of flooding. This risk is increased by deforestation. Trees catch and <input type="text" class="answer-input" id="q22" placeholder="22">  water lowering the chance of flooding. By removing trees land erosion is also higher, increasing the chance of <input type="text" class="answer-input" id="q23" placeholder="23">  Deforestation also affects global warming by contributing 15% of the <input type="text" class="answer-input" id="q24" placeholder="24">  of greenhouse gasses. To make sure that the cutting down of trees is done in a sustainable way, good forestry <input type="text" class="answer-input" id="q25" placeholder="25">  is important. In most countries, more trees are cut down every year than planted. One country that is reversing this trend is China, making it one of the few nations to <input type="text" class="answer-input" id="q26" placeholder="26"> . the more common negative trend.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="questions-3" class="question-set hidden">
                    <div class="questions-container">
                        <div class="question" data-q-start="27" data-q-end="32">
                            <div class="question-prompt">
                                <p><strong>Questions 27-32</strong><br>Do the following statements agree with the claims of the writer in Reading Passage 3?</p>
                                <p>In boxes 27-32 on your answer sheet, write</p>
                                <ul style="list-style: none; padding-left: 0;">
                                    <li><strong>YES</strong> if the statement agrees with the claims of the writer</li>
                                    <li><strong>NO</strong> if the statement contradicts the claims of the writer</li>
                                    <li><strong>NOT GIVEN</strong> if it is impossible to say what the writer thinks about this</li>
                                </ul>
                            </div>
                            <div class="tf-question" data-q-start="27" data-q-end="27">
                                <div class="tf-question-line">
                                    <span class="tf-question-number">27</span>
                                    <span class="tf-question-text">The First World War had a big influence on the types of films being made in Hollywood.</span>
                                </div>
                                <div class="tf-options">
                                    <label class="tf-option"><input type="radio" name="q27" value="YES"> YES</label>
                                    <label class="tf-option"><input type="radio" name="q27" value="NO"> NO</label>
                                    <label class="tf-option"><input type="radio" name="q27" value="NOT GIVEN"> NOT GIVEN</label>
                                </div>
                            </div>
                            <div class="tf-question" data-q-start="28" data-q-end="28">
                                <div class="tf-question-line">
                                    <span class="tf-question-number">28</span>
                                    <span class="tf-question-text">Film noir is an official genre.</span>
                                </div>
                                <div class="tf-options">
                                    <label class="tf-option"><input type="radio" name="q28" value="YES"> YES</label>
                                    <label class="tf-option"><input type="radio" name="q28" value="NO"> NO</label>
                                    <label class="tf-option"><input type="radio" name="q28" value="NOT GIVEN"> NOT GIVEN</label>
                                </div>
                            </div>
                            <div class="tf-question" data-q-start="29" data-q-end="29">
                                <div class="tf-question-line">
                                    <span class="tf-question-number">29</span>
                                    <span class="tf-question-text">True film noir can be from any time and be about any kind of social issue.</span>
                                </div>
                                <div class="tf-options">
                                    <label class="tf-option"><input type="radio" name="q29" value="YES"> YES</label>
                                    <label class="tf-option"><input type="radio" name="q29" value="NO"> NO</label>
                                    <label class="tf-option"><input type="radio" name="q29" value="NOT GIVEN"> NOT GIVEN</label>
                                </div>
                            </div>
                            <div class="tf-question" data-q-start="30" data-q-end="30">
                                <div class="tf-question-line">
                                    <span class="tf-question-number">30</span>
                                    <span class="tf-question-text">Filmmaker Paul Schrader believes that film noir is almost impossible to classify.</span>
                                </div>
                                <div class="tf-options">
                                    <label class="tf-option"><input type="radio" name="q30" value="YES"> YES</label>
                                    <label class="tf-option"><input type="radio" name="q30" value="NO"> NO</label>
                                    <label class="tf-option"><input type="radio" name="q30" value="NOT GIVEN"> NOT GIVEN</label>
                                </div>
                            </div>
                            <div class="tf-question" data-q-start="31" data-q-end="31">
                                <div class="tf-question-line">
                                    <span class="tf-question-number">31</span>
                                    <span class="tf-question-text">Mixing light and shadow was mainly responsible for creating a unique mood and feeling of film noir.</span>
                                </div>
                                <div class="tf-options">
                                    <label class="tf-option"><input type="radio" name="q31" value="YES"> YES</label>
                                    <label class="tf-option"><input type="radio" name="q31" value="NO"> NO</label>
                                    <label class="tf-option"><input type="radio" name="q31" value="NOT GIVEN"> NOT GIVEN</label>
                                </div>
                            </div>
                            <div class="tf-question" data-q-start="32" data-q-end="32">
                                <div class="tf-question-line">
                                    <span class="tf-question-number">32</span>
                                    <span class="tf-question-text">During the 1950s film noir was the most successful type of film at the box office.</span>
                                </div>
                                <div class="tf-options">
                                    <label class="tf-option"><input type="radio" name="q32" value="YES"> YES</label>
                                    <label class="tf-option"><input type="radio" name="q32" value="NO"> NO</label>
                                    <label class="tf-option"><input type="radio" name="q32" value="NOT GIVEN"> NOT GIVEN</label>
                                </div>
                            </div>
                        </div>
                        
                            <div class="question" data-q-start="33" data-q-end="37">
                                <div class="question-prompt">
                                    <p><strong>Questions 33-37</strong><br>Complete the notes below.</p>
                                    <p>Write <strong>NO MORE THAN TWO WORDS AND/OR A NUMBER</strong> for each answer.</p>
                                    <p>Write your answers in boxes 33-37 on your answer sheet.</p>
                                </div>
                                <div style="border: 1px solid #000000; padding: 15px;">
                                    <div class="summary-text">
                                        <p class="centered-title">THE FOUR TRADITIONS OF FILM NOIR</p>
                                        <p><strong>War and post-war disillusionment:</strong></p>
                                        <p style="padding-left: 10px;">&bull;&nbsp;&nbsp;A delayed <input type="text" class="answer-input" id="q33" placeholder="33">  to the great economic depression.</p>
                                        <p style="padding-left: 10px;">&bull;&nbsp;&nbsp;The Hollywood trend during the depression and war was to produce films aimed at keeping people's spirits up.</p>
                                        
                                        <p><strong>Post-war realism:</strong></p>
                                        <p style="padding-left: 10px;">&bull;&nbsp;&nbsp;Part of the style was created by shooting the films in real locations instead of on sets. Similar to European film styles such as <input type="text" class="answer-input" id="q34" placeholder="34"> . in Italy.</p>
                                     
                                        <p><strong>The German Influence:</strong></p>
                                        <p style="padding-left: 10px;">&bull;&nbsp;&nbsp;Many directors from Germany, Austria and Poland <input type="text" class="answer-input" id="q35" placeholder="35">  to America during the 1920s and 1930s.</p>
                                        <p style="padding-left: 10px;">&bull;&nbsp;&nbsp;The use of lighting styles developed by German Expressionist films was very influential on film noir.</p>
                                        <p style="padding-left: 10px;">&bull;&nbsp;&nbsp;Combining chiaroscuro lighting with filming in real locations gave film noir its <input type="text" class="answer-input" id="q36" placeholder="36"> </p>
                                        
                                        <p><strong>The hard-boiled tradition:</strong></p>
                                        <p style="padding-left: 10px;">&bull;&nbsp;&nbsp;These films were heavily influenced by popular literature of the time by writers like Ernest Hemingway.</p>
                                        <p style="padding-left: 10px;">&bull;&nbsp;&nbsp;The hard-boiled writing style influenced the depiction of <input type="text" class="answer-input" id="q37" placeholder="37"> , stories and scripts in film noir.</p>
                                    </div>
                                </div>
                               
                            </div>
                        
                        
                        <div class="question" data-q-start="38" data-q-end="40">
                            <div class="question-prompt">
                                <p><strong>Questions 38-40</strong><br>Complete each sentence with the correct ending, A-F</p>
                                <p>Write your answers in boxes 38-40 on your answer sheet.</p>
                            </div>
                            <div class="multi-choice-question" data-q-start="38" data-q-end="38">
                                <p><strong>38</strong>&nbsp;&nbsp;After the war, instead of the positive films that existed in Hollywood before</p>
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q38" value="A"> &nbsp;&nbsp;&nbsp;suited the mood in America well.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q38" value="B"> &nbsp;&nbsp;&nbsp;one of Hollywood's most notable films.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q38" value="C"> &nbsp;&nbsp;&nbsp;there were a lot more romantic comedies released in America.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q38" value="D"> &nbsp;&nbsp;&nbsp;was something most people were not ready for.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q38" value="E"> &nbsp;&nbsp;&nbsp;negativity had entered Hollywood films.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q38" value="F"> &nbsp;&nbsp;&nbsp;a film that very few people know about today.</label></div>
                                </div>
                            </div>
                            <div class="multi-choice-question" data-q-start="39" data-q-end="39">
                                <p><strong>39</strong>&nbsp;&nbsp;The honesty of post-war realism in film noir</p>
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q39" value="A"> &nbsp;&nbsp;&nbsp;suited the mood in America well.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q39" value="B"> &nbsp;&nbsp;&nbsp;one of Hollywood's most notable films.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q39" value="C"> &nbsp;&nbsp;&nbsp;there were a lot more romantic comedies released in America.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q39" value="D"> &nbsp;&nbsp;&nbsp;was something most people were not ready for.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q39" value="E"> &nbsp;&nbsp;&nbsp;negativity had entered Hollywood films.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q39" value="F"> &nbsp;&nbsp;&nbsp;a film that very few people know about today.</label></div>
                                </div>
                            </div>
                            <div class="multi-choice-question" data-q-start="40" data-q-end="40">
                                <p><strong>40</strong>&nbsp;&nbsp;Double Indemnity, directed by Billy Wilder, is</p>
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q40" value="A"> &nbsp;&nbsp;&nbsp;suited the mood in America well.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q40" value="B"> &nbsp;&nbsp;&nbsp;one of Hollywood's most notable films.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q40" value="C"> &nbsp;&nbsp;&nbsp;there were a lot more romantic comedies released in America.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q40" value="D"> &nbsp;&nbsp;&nbsp;was something most people were not ready for.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q40" value="E"> &nbsp;&nbsp;&nbsp;negativity had entered Hollywood films.</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q40" value="F"> &nbsp;&nbsp;&nbsp;a film that very few people know about today.</label></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation Arrows -->
    <div class="nav-arrows">
        <button class="nav-arrow" onclick="previousQuestion()" id="prevBtn">‹</button>
        <button class="nav-arrow" onclick="nextQuestion()" id="nextBtn">›</button>
    </div>

    <!-- Bottom Navigation -->
    <nav class="nav-row perScorableItem" aria-label="Questions">
        <div class="footer__questionWrapper___1tZ46 multiple" role="tablist" onclick="switchToPart(1)" style="cursor: pointer;">
            <button role="tab" class="footer__questionNo___3WNct">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">1</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 13</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(1); event.stopPropagation();"><span class="sr-only">Question 1</span><span aria-hidden="true">1</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(2); event.stopPropagation();"><span class="sr-only">Question 2</span><span aria-hidden="true">2</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(3); event.stopPropagation();"><span class="sr-only">Question 3</span><span aria-hidden="true">3</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(4); event.stopPropagation();"><span class="sr-only">Question 4</span><span aria-hidden="true">4</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(5); event.stopPropagation();"><span class="sr-only">Question 5</span><span aria-hidden="true">5</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(6); event.stopPropagation();"><span class="sr-only">Question 6</span><span aria-hidden="true">6</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(7); event.stopPropagation();"><span class="sr-only">Question 7</span><span aria-hidden="true">7</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(8); event.stopPropagation();"><span class="sr-only">Question 8</span><span aria-hidden="true">8</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(9); event.stopPropagation();"><span class="sr-only">Question 9</span><span aria-hidden="true">9</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(10); event.stopPropagation();"><span class="sr-only">Question 10</span><span aria-hidden="true">10</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(11); event.stopPropagation();"><span class="sr-only">Question 11</span><span aria-hidden="true">11</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(12); event.stopPropagation();"><span class="sr-only">Question 12</span><span aria-hidden="true">12</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(13); event.stopPropagation();"><span class="sr-only">Question 13</span><span aria-hidden="true">13</span></button>
            </div>
        </div>
        
        <div class="footer__questionWrapper___1tZ46 selected multiple" role="tablist" onclick="switchToPart(2)" style="cursor: pointer;">
            <button role="tab" class="footer__questionNo___3WNct">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">2</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 13</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(14); event.stopPropagation();"><span class="sr-only">Question 14</span><span aria-hidden="true">14</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(15); event.stopPropagation();"><span class="sr-only">Question 15</span><span aria-hidden="true">15</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(16); event.stopPropagation();"><span class="sr-only">Question 16</span><span aria-hidden="true">16</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(17); event.stopPropagation();"><span class="sr-only">Question 17</span><span aria-hidden="true">17</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(18); event.stopPropagation();"><span class="sr-only">Question 18</span><span aria-hidden="true">18</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(19); event.stopPropagation();"><span class="sr-only">Question 19</span><span aria-hidden="true">19</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(20); event.stopPropagation();"><span class="sr-only">Question 20</span><span aria-hidden="true">20</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(21); event.stopPropagation();"><span class="sr-only">Question 21</span><span aria-hidden="true">21</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(22); event.stopPropagation();"><span class="sr-only">Question 22</span><span aria-hidden="true">22</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(23); event.stopPropagation();"><span class="sr-only">Question 23</span><span aria-hidden="true">23</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(24); event.stopPropagation();"><span class="sr-only">Question 24</span><span aria-hidden="true">24</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(25); event.stopPropagation();"><span class="sr-only">Question 25</span><span aria-hidden="true">25</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(26); event.stopPropagation();"><span class="sr-only">Question 26</span><span aria-hidden="true">26</span></button>
            </div>
        </div>
        
        <div class="footer__questionWrapper___1tZ46 multiple" role="tablist" onclick="switchToPart(3)" style="cursor: pointer;">
            <button role="tab" class="footer__questionNo___3WNct">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">3</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 14</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(27); event.stopPropagation();"><span class="sr-only">Question 27</span><span aria-hidden="true">27</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(28); event.stopPropagation();"><span class="sr-only">Question 28</span><span aria-hidden="true">28</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(29); event.stopPropagation();"><span class="sr-only">Question 29</span><span aria-hidden="true">29</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(30); event.stopPropagation();"><span class="sr-only">Question 30</span><span aria-hidden="true">30</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(31); event.stopPropagation();"><span class="sr-only">Question 31</span><span aria-hidden="true">31</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(32); event.stopPropagation();"><span class="sr-only">Question 32</span><span aria-hidden="true">32</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(33); event.stopPropagation();"><span class="sr-only">Question 33</span><span aria-hidden="true">33</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(34); event.stopPropagation();"><span class="sr-only">Question 34</span><span aria-hidden="true">34</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(35); event.stopPropagation();"><span class="sr-only">Question 35</span><span aria-hidden="true">35</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(36); event.stopPropagation();"><span class="sr-only">Question 36</span><span aria-hidden="true">36</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(37); event.stopPropagation();"><span class="sr-only">Question 37</span><span aria-hidden="true">37</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(38); event.stopPropagation();"><span class="sr-only">Question 38</span><span aria-hidden="true">38</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(39); event.stopPropagation();"><span class="sr-only">Question 39</span><span aria-hidden="true">39</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(40); event.stopPropagation();"><span class="sr-only">Question 40</span><span aria-hidden="true">40</span></button>
            </div>
        </div>
        
        <button id="deliver-button" aria-label="Review your answers" class="footer__deliverButton___3FM07">
            <i class="fa fa fa-check" aria-hidden="true"></i>
            <span>Check Answers</span>
        </button>
    </nav>

    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu">
        <div id="menu-highlight" class="context-menu-item" onclick="highlightText()">
            Highlight
        </div>
        <div id="menu-note" class="context-menu-item" onclick="addNote()">
            Note
        </div>
        <div id="menu-clear" class="context-menu-item" onclick="clearHighlight()">
            Clear
        </div>
        <div id="menu-clear-all" class="context-menu-item" onclick="clearAllHighlights()">
            Clear All
        </div>
    </div>

    <div id="results-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="modal-close-btn" onclick="closeResultsModal()">&times;</button>
            <h2>Results</h2>
            <div class="results-summary">
                <p>Score: <span id="results-score"></span> / 40</p>
                <p>IELTS Band: <span id="results-band"></span></p>
            </div>
            <div id="results-details" class="results-details-container">
                <!-- Results for each question will be injected here -->
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- STATE VARIABLES ---
        let currentPassage = 1;
        let currentQuestion = 1;
        let selectedRange = null;
        let timeInSeconds = 3600;
        let timerInterval;
        let draggedItem = null;
        let activeQuestionElement = null;
        let selectedDragItem = null;

        // --- DOM ELEMENTS ---
        const timerDisplay = document.querySelector('.timer-display');
        const timerToggleButton = document.getElementById('timer-toggle-btn');
        const timerResetButton = document.getElementById('timer-reset-btn');
        const deliverButton = document.getElementById('deliver-button');
        const resizer = document.getElementById('resizer');
        const passagePanel = document.getElementById('passage-panel');
        const questionsPanel = document.getElementById('questions-panel');
        const contextMenu = document.getElementById('contextMenu');

        // --- ICON SVGs ---
        const playIcon = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M8 5v14l11-7L8 5z"/></svg>';
        const pauseIcon = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>';

        // --- ANSWERS ---
        const correctAnswers = {
            '1': 'in perpetuity', '2': 'loan', '3': 'market price', '4': 'profit', '5': 'consuming', '6': 'volatile', '7': 'middle class',
            '8': 'FALSE', '9': 'NOT GIVEN', '10': 'FALSE', '11': 'TRUE', '12': 'TRUE', '13': 'C',
            '14': 'x', '15': 'i', '16': 'iii', '17': 'v', '18': 'ii', '19': 'xi', '20': 'viii',
            '21': '5 million', '22': 'store', '23': 'landslides', '24': 'emissions', '25': 'management', '26': 'reverse',
            '27': 'NOT GIVEN', '28': 'NO', '29': 'NO', '30': 'YES', '31': 'YES', '32': 'NOT GIVEN',
            '33': 'reaction', '34': 'neorealism', '35': 'immigrated', '36': 'authenticity', '37': 'characters',
            '38': 'E', '39': 'A', '40': 'B'
        };

        // --- INITIALIZATION ---
        function initialize() {
            startTimer();
            initializeDragAndDrop();
            setupCheckboxLimits();
            setupExampleHeading();
            switchToPart(1); // Also calls goToQuestion(1) and updateNavigation
            
            document.body.addEventListener('input', updateAllIndicators);
            document.body.addEventListener('change', updateAllIndicators);
            deliverButton.addEventListener('click', checkAnswers);
            timerToggleButton.addEventListener('click', toggleTimer);
            timerResetButton.addEventListener('click', resetTimer);

            // Add click listeners to question containers for navigation
            document.querySelectorAll('[data-q-start]').forEach(el => {
                el.addEventListener('click', (e) => {
                    // Don't navigate if clicking on form elements
                    if (e.target.matches('input, select, textarea, label, .tf-option, .multi-choice-option')) {
                        return;
                    }
                    
                    const qNum = parseInt(el.dataset.qStart, 10);
                    if (currentQuestion !== qNum) {
                        goToQuestion(qNum);
                    }
                });
            });

            // Prevent radio button clicks from bubbling up to parent containers
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('click', (e) => {
                    e.stopPropagation();
                    // Update indicators when radio button is clicked
                    setTimeout(() => updateAllIndicators(), 10);
                });
            });
            
// ========== SIMPLE AUTOSAVE ==========
(function() {
    console.log('🔄 Autosave initialized');
    
    // Save to localStorage every 30 seconds
    const AUTOSAVE_INTERVAL = 30000; // 30 seconds
    const STORAGE_KEY = 'ielts-reading-autosave';
    
    // Function to save all answers
    function saveAnswers() {
        const saveData = {
            timestamp: new Date().toISOString(),
            answers: {}
        };
        
        // Save text inputs
        document.querySelectorAll('.answer-input[type="text"]').forEach(input => {
            if (input.value.trim()) {
                saveData.answers[input.id] = input.value;
            }
        });
        
        // Save select dropdowns
        document.querySelectorAll('.answer-input[type="select"], select.answer-input').forEach(select => {
            if (select.value) {
                saveData.answers[select.id] = select.value;
            }
        });
        
        // Save radio buttons
        document.querySelectorAll('input[type="radio"]:checked').forEach(radio => {
            saveData.answers[radio.name] = radio.value;
        });
        
        // Save drag & drop answers
        document.querySelectorAll('.drop-zone.filled .drag-item').forEach(item => {
            const dropZone = item.closest('.drop-zone, .summary-drop-zone');
            const questionId = dropZone?.dataset.qStart || dropZone?.dataset.question;
            if (questionId) {
                saveData.answers[`drag-${questionId}`] = item.dataset.value;
            }
        });
        
        // Save to localStorage
        localStorage.setItem(STORAGE_KEY, JSON.stringify(saveData));
        console.log('💾 Autosaved at', new Date().toLocaleTimeString());
    }
    
    // Function to load saved answers
    function loadSavedAnswers() {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (!saved) {
            console.log('📭 No saved data found');
            return;
        }
        
        try {
            const saveData = JSON.parse(saved);
            const answers = saveData.answers;
            
            // Load text inputs
            Object.keys(answers).forEach(key => {
                if (key.startsWith('q')) {
                    const input = document.getElementById(key);
                    if (input && (input.type === 'text' || input.tagName === 'SELECT')) {
                        input.value = answers[key];
                    }
                }
                
                // Load radio buttons
                if (!key.startsWith('drag-')) {
                    const radio = document.querySelector(`input[name="${key}"][value="${answers[key]}"]`);
                    if (radio) radio.checked = true;
                }
                
                // Load drag & drop (simplified - just marks as answered)
                if (key.startsWith('drag-')) {
                    const questionNum = key.replace('drag-', '');
                    const navBtn = document.querySelector(`.subQuestion[onclick="goToQuestion(${questionNum})"]`);
                    if (navBtn) navBtn.classList.add('answered');
                }
            });
            
            console.log('📂 Loaded saved answers from', new Date(saveData.timestamp).toLocaleString());
            updateAllIndicators(); // Update the answer counts
        } catch (error) {
            console.error('❌ Error loading saved answers:', error);
        }
    }
    
    // Auto-save every 30 seconds
    setInterval(saveAnswers, AUTOSAVE_INTERVAL);
    
    // Save when user leaves the page
    window.addEventListener('beforeunload', saveAnswers);
    
    // Save when user interacts with inputs
    document.addEventListener('input', () => {
        clearTimeout(window.saveTimeout);
        window.saveTimeout = setTimeout(saveAnswers, 2000); // Debounce: save 2 seconds after last input
    });
    
    // Load saved answers when page loads
    setTimeout(loadSavedAnswers, 500); // Small delay to ensure DOM is ready
    
    // Add a simple status indicator to the timer area
    const statusIndicator = document.createElement('span');
    statusIndicator.id = 'autosave-status';
    statusIndicator.style.cssText = 'margin-left: 15px; font-size: 12px; color: #666;';
    statusIndicator.innerHTML = '💾 Autosave: <span style="color: green;">ON</span>';
    document.querySelector('.timer-container').appendChild(statusIndicator);
    
    // Visual feedback when saving
    let saveCount = 0;
    setInterval(() => {
        const statusText = statusIndicator.querySelector('span');
        if (saveCount % 2 === 0) {
            statusText.style.color = '#4CAF50';
            statusText.textContent = 'ON';
        } else {
            statusText.style.color = '#666';
            statusText.textContent = 'ON';
        }
        saveCount++;
    }, 15000);
    
    console.log('✅ Autosave enabled - saving every 30 seconds');
})();

            resizer.addEventListener('mousedown', initResize, false);
            initializeContextMenu();
        }

        // --- CORE TEST LOGIC ---

        function checkAnswers() {
            // Disable all inputs to prevent changes
            const allInputs = document.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                input.disabled = true;
            });

            // Disable submit button
            deliverButton.disabled = true;
            deliverButton.style.cursor = 'not-allowed';
            
            clearInterval(timerInterval);
            let score = 0;
            const totalQuestions = 40;
            const resultsDetailsContainer = document.getElementById('results-details');
            resultsDetailsContainer.innerHTML = '';

            document.querySelectorAll('.correct, .incorrect, .correct-answer-highlight').forEach(el => {
                el.classList.remove('correct', 'incorrect', 'correct-answer-highlight');
            });
            document.querySelectorAll('.correct-answer-display').forEach(el => el.remove());

            for (let i = 1; i <= totalQuestions; i++) {
                const questionKey = String(i);
                const correctAnswer = correctAnswers[questionKey];
                let userAnswer = '';
                let isCorrect = false;
                
                let userAnswerDisplay = 'Not Answered';
                const correctAnswerText = Array.isArray(correctAnswer) ? correctAnswer.join(' / ') : correctAnswer;

                const textInput = document.getElementById(`q${i}`);
                const radioGroup = document.querySelectorAll(`input[name="q${i}"][type="radio"]`);
                
                // Handle Text and Select Inputs
                if (textInput && (textInput.tagName === 'INPUT' || textInput.tagName === 'SELECT')) {
                    const element = textInput.closest('.matching-form-row') || textInput;
                    userAnswer = textInput.value.trim();
                    userAnswerDisplay = userAnswer || 'Not Answered';

                    if (textInput.tagName === 'SELECT') {
                        isCorrect = userAnswer === correctAnswer;
                    } else {
                        isCorrect = Array.isArray(correctAnswer) ?
                            correctAnswer.some(ans => userAnswer.toLowerCase() === ans.toLowerCase()) :
                            userAnswer.toLowerCase() === correctAnswer.toLowerCase();
                    }
                    
                    if (isCorrect) {
                        score++;
                        element.classList.add('correct');
                    } else {
                        element.classList.add('incorrect');
                        const correctAnswerSpan = document.createElement('span');
                        correctAnswerSpan.className = 'correct-answer-display';
                        correctAnswerSpan.innerHTML = `&nbsp;➜&nbsp;<span class="correct-answer-highlight">${correctAnswerText}</span>`;
                        textInput.parentNode.insertBefore(correctAnswerSpan, textInput.nextSibling);
                    }
                }
                // Handle Radio Button Inputs (T/F, MCQs)
                else if (radioGroup.length > 0) {
                    const questionContainer = radioGroup[0].closest('.tf-question') || radioGroup[0].closest('.multi-choice-question');
                    const checkedRadio = document.querySelector(`input[name="q${i}"]:checked`);

                    if (checkedRadio) {
                        userAnswer = checkedRadio.value;
                        userAnswerDisplay = userAnswer;
                        isCorrect = userAnswer === correctAnswer;

                        const userLabel = checkedRadio.closest('.tf-option, .multi-choice-option');
                        if (userLabel) {
                            userLabel.classList.add(isCorrect ? 'correct' : 'incorrect');
                        }
                    }

                    if (isCorrect) {
                        score++;
                    } else {
                        if (questionContainer){
                            const correctOptionEl = questionContainer.querySelector(`input[value="${correctAnswerText}"]`);
                            if (correctOptionEl) {
                                const correctLabel = correctOptionEl.closest('.tf-option, .multi-choice-option');
                                if (correctLabel) {
                                    correctLabel.classList.add('correct-answer-highlight');
                                }
                            }
                        }
                    }
                }
                 
                // For showing results in the modal
                 const resultRow = `
                    <div class="result-row ${isCorrect ? '' : 'incorrect'}">
                        <span class="q-num">${i}</span>
                        <span class="user-ans">${userAnswerDisplay}</span>
                        <span class="correct-ans">${correctAnswerText}</span>
                    </div>`;
                resultsDetailsContainer.innerHTML += resultRow;
                
                // Update nav button color
                const navButton = document.querySelector(`.subQuestion[onclick*="goToQuestion(${i})"]`);
                if (navButton) {
                    navButton.classList.remove('answered', 'active');
                    navButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
            }

            document.getElementById('results-score').textContent = score;
            document.getElementById('results-band').textContent = calculateBandScore(score);
            document.getElementById('results-modal').classList.remove('hidden');
        }

        function calculateBandScore(score) {
            if (score >= 39) return '9.0';
            const mapping = {
                40: 9.0, 39: 9.0, 38: 8.5, 37: 8.5, 36: 8.0, 35: 8.0, 34: 7.5,
                33: 7.5, 32: 7.0, 31: 7.0, 30: 7.0, 29: 6.5, 28: 6.5, 27: 6.5,
                26: 6.0, 25: 6.0, 24: 6.0, 23: 5.5, 22: 5.5, 21: 5.5, 20: 5.5,
                19: 5.0, 18: 5.0, 17: 5.0, 16: 5.0, 15: 5.0, 14: 4.5, 13: 4.5,
                12: 4.0, 11: 4.0, 10: 4.0, 9: 3.5, 8: 3.5, 7: 3.0, 6: 3.0,
                5: 2.5, 4: 2.5
            };
            if (score <= 0) return 0.0;
            if (score === 1) return 1.0;
            if (score <= 3) return 2.0;
            if (score <= 5) return 2.5;
            return mapping[score] || 0.0;
        }

        function getUserAnswer(qNum) {
            const textInput = document.getElementById(`q${qNum}`);
            const radioInput = document.querySelector(`input[name="q${qNum}"]:checked`);
            const dropZone = document.querySelector(`.drop-zone[data-q-start="${qNum}"]`);

            if (textInput) { // Handles <input type="text"> and <select>
                return { value: textInput.value, text: textInput.value || 'N/A' };
            }
            if (radioInput) {
                return { value: radioInput.value, text: radioInput.value };
            }
            if (dropZone) {
                const droppedItem = dropZone.querySelector('.drag-item');
                return { 
                    value: droppedItem ? droppedItem.dataset.value : null, 
                    text: droppedItem ? droppedItem.textContent.trim() : 'N/A' 
                };
            }
            return { value: null, text: 'N/A' };
        }

        function displayCorrectAnswer(qNum, correctAnswer) {
            // Handle multi-choice group questions (e.g., 38-40)
            if (qNum >= 38 && qNum <= 40) {
                 const correctAnswersArr = Array.isArray(correctAnswer) ? correctAnswer : [correctAnswer];
                 correctAnswersArr.forEach(ansValue => {
                    const correctInput = document.querySelector(`input[name="q38-40"][value="${ansValue}"]`);
                    correctInput?.closest('.multi-choice-option')?.classList.add('correct-answer-highlight');
                 });
                 return;
            }

            // Handle radio button questions by highlighting the correct label
            const correctRadioInput = document.querySelector(`input[name="q${qNum}"][value="${correctAnswer}"]`);
            if (correctRadioInput) {
                const parentOption = correctRadioInput.closest('.tf-option, .multi-choice-option');
                if (parentOption) {
                    parentOption.classList.add('correct-answer-highlight');
                    return;
                }
            }

            // Handle text inputs, select dropdowns, and others by showing the answer next to them
            const inputEl = document.getElementById(`q${qNum}`);
            if (inputEl) {
                const displaySpan = document.createElement('span');
                displaySpan.className = 'correct-answer-display';
                displaySpan.textContent = ` ✓ ${correctAnswer}`;
                inputEl.insertAdjacentElement('afterend', displaySpan);
                return; // Done
            }
            
            // Fallback for questions identified by a container (e.g., some T/F/NG questions)
            const element = findQuestionElement(qNum);
            if (element) {
                const displaySpan = document.createElement('span');
                displaySpan.className = 'correct-answer-display';
                displaySpan.textContent = ` ✓ ${correctAnswer}`;
                const itemContainer = element.querySelector('.tf-question-text');
                if (itemContainer) {
                     itemContainer.appendChild(displaySpan);
                } else {
                     element.appendChild(displaySpan);
                }
            }
        }
        
        function findQuestionElement(qNum) {
             return document.querySelector(`[data-q-start="${qNum}"]`);
        }

        function addResultToModal(qNum, userAnswer, correctAnswer, isCorrect) {
            const resultsDetails = document.getElementById('results-details');
            const row = document.createElement('div');
            row.className = 'result-row';
            if (!isCorrect) {
                row.classList.add('incorrect');
            }
            row.innerHTML = `
                <span class="q-num">${qNum}</span>
                <span class="user-ans">${userAnswer}</span>
                <span class="correct-ans">${correctAnswer}</span>
            `;
            resultsDetails.appendChild(row);
        }

        function showResultsModal() {
            document.getElementById('results-modal').classList.remove('hidden');
        }

        window.closeResultsModal = function() {
            document.getElementById('results-modal').classList.add('hidden');
        }
        
        function disableInputs() {
            deliverButton.innerHTML = `<span>Checked! View Results.</span>`;
            deliverButton.removeEventListener('click', checkAnswers);
            deliverButton.onclick = showResultsModal;

            document.querySelectorAll('input, select').forEach(el => {
                el.disabled = true;
                 if (el.matches('input[type=radio], input[type=checkbox]')) {
                     el.style.cursor = 'not-allowed';
                     el.parentElement.style.cursor = 'not-allowed';
                 }
            });
            document.querySelectorAll('.drag-item').forEach(el => {
                el.setAttribute('draggable', 'false');
                el.style.cursor = 'default';
            });
            document.querySelectorAll('.drop-zone').forEach(el => {
                el.classList.add('disabled');
            });
        }

        function checkValue(userValue, correctValue) {
            if (userValue === null || userValue === undefined) return false;
            const formattedUserValue = userValue.trim().toLowerCase();
            if (Array.isArray(correctValue)) {
                return correctValue.map(v => v.toLowerCase()).includes(formattedUserValue);
            } else {
                return formattedUserValue === String(correctValue).toLowerCase();
            }
        }

        function markQuestion(qNum, isCorrect) {
            const subQuestionBtn = document.querySelector(`.subQuestion[onclick="goToQuestion(${qNum})"]`);
            subQuestionBtn?.classList.add(isCorrect ? 'correct' : 'incorrect');

            const elementsToMark = [
                document.querySelector(`.tf-question[data-q-start="${qNum}"]`),
                document.querySelector(`.multi-choice-question[data-q-start="${qNum}"]`),
                document.querySelector(`.matching-question-item[data-q-start="${qNum}"]`),
                document.querySelector(`.drop-zone[data-q-start="${qNum}"]`),
                document.getElementById(`q${qNum}`),
                document.querySelector(`input[name="q${qNum}"]:checked`)?.closest('.tf-option'),
                document.querySelector(`input[name="q${qNum}"]:checked`)?.closest('.multi-choice-option')
            ];
            
            elementsToMark.forEach(el => {
                if (el) el.classList.add(isCorrect ? 'correct' : 'incorrect');
            });

             if (qNum === 14 || qNum === 15) {
                const multiChoiceContainer = document.querySelector('.multi-choice-question[data-q-start="14"]');
                if (multiChoiceContainer) multiChoiceContainer.classList.add(isCorrect ? 'correct' : 'incorrect');
             } else if (qNum >= 1 && qNum <= 5) {
                const pMatchInput = document.getElementById(`q${qNum}`);
                if (pMatchInput) pMatchInput.classList.add(isCorrect ? 'correct' : 'incorrect');
             } else if (qNum >= 38 && qNum <= 40) {
                // For this group, individual options are marked, not the container.
             }
        }

        function switchToPart(partNumber, targetQuestion = null) {
            currentPassage = partNumber;

            // Hide all passages and questions
            document.querySelectorAll('.reading-passage, .question-set, .part-header').forEach(el => {
                el.classList.add('hidden');
            });

            // Show the correct passage, questions, and header
            document.getElementById(`passage-text-${partNumber}`).classList.remove('hidden');
            document.getElementById(`questions-${partNumber}`).classList.remove('hidden');
            document.getElementById(`part-header-${partNumber}`).classList.remove('hidden');

            // Update bottom navigation 'selected' state
            document.querySelectorAll('.footer__questionWrapper___1tZ46').forEach((wrapper, index) => {
                wrapper.classList.toggle('selected', (index + 1) === partNumber);
            });

            // Go to the target question if specified, otherwise go to the first question of the part
            if (targetQuestion) {
                // Don't call goToQuestion recursively, just update the UI directly
                currentQuestion = targetQuestion;
                updateNavigation();
                
                if (activeQuestionElement) {
                    activeQuestionElement.classList.remove('active-question', 'active-input');
                }

                let targetEl = document.querySelector(`[data-q-start="${targetQuestion}"]`);

                if (targetEl) {
                    activeQuestionElement = targetEl;
                     if (targetEl.matches('input[type="text"]') || targetEl.matches('select')) {
                         targetEl.classList.add('active-input');
                     } else {
                         targetEl.classList.add('active-question');
                     }
                     scrollIntoViewIfNeeded(targetEl);
                } else {
                     const pMatch = document.querySelector(`.paragraph-matching-question select[id="q${targetQuestion}"]`);
                     if(pMatch) {
                        activeQuestionElement = pMatch;
                        pMatch.classList.add('active-input');
                        scrollIntoViewIfNeeded(pMatch);
                     }
                }
            } else {
                const firstQuestionOfPart = {1: 1, 2: 14, 3: 27}[partNumber];
                goToQuestion(firstQuestionOfPart);
            }
        }
        
        function goToQuestion(questionNumber) {
            currentQuestion = questionNumber;

            let passageNumber = 1;
            if (questionNumber >= 14 && questionNumber <= 26) passageNumber = 2;
            else if (questionNumber >= 27) passageNumber = 3;
            
            if (currentPassage !== passageNumber) {
                switchToPart(passageNumber, questionNumber);
                return;
            }

            if (activeQuestionElement) {
                activeQuestionElement.classList.remove('active-question', 'active-input');
            }

            let targetEl = document.querySelector(`[data-q-start="${questionNumber}"]`);

            if (targetEl) {
                activeQuestionElement = targetEl;
                 if (targetEl.matches('input[type="text"]') || targetEl.matches('select')) {
                     targetEl.classList.add('active-input');
                 } else {
                     targetEl.classList.add('active-question');
                 }
                 scrollIntoViewIfNeeded(targetEl);
            } else {
                 const pMatch = document.querySelector(`.paragraph-matching-question select[id="q${questionNumber}"]`);
                 if(pMatch) {
                    activeQuestionElement = pMatch;
                    pMatch.classList.add('active-input');
                    scrollIntoViewIfNeeded(pMatch);
                 }
            }

            updateNavigation();
        }
        
        // --- UI & NAVIGATION ---

        function updateNavigation() {
            const navButtons = document.querySelectorAll('.subQuestion');
            navButtons.forEach(btn => btn.classList.remove('active'));
            const activeNav = document.querySelector(`.subQuestion[onclick="goToQuestion(${currentQuestion})"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }

            const inputs = document.querySelectorAll('.answer-input, .drop-zone.filled, .summary-drop-zone.filled');
            inputs.forEach(input => input.classList.remove('active-input'));
            
            const activeInput = document.getElementById(`q${currentQuestion}`);
            if (activeInput) {
                activeInput.classList.add('active-input');
                if (typeof activeInput.focus === 'function') {
                    activeInput.focus();
                }
            } else {
                const activeQuestionBlock = document.querySelector(`[data-q-start="${currentQuestion}"]`);
                if (activeQuestionBlock) {
                    const firstInput = activeQuestionBlock.querySelector('input, select');
                    if(firstInput) {
                        firstInput.classList.add('active-input');
                         if (typeof firstInput.focus === 'function') {
                            firstInput.focus();
                        }
                    }
                }
            }
        }
        
        function selectDragItem(item) {
            if (selectedDragItem) {
                selectedDragItem.classList.remove('selected');
            }
            selectedDragItem = item;
            if (selectedDragItem) {
                selectedDragItem.classList.add('selected');
            }
        }
        
        window.nextQuestion = () => currentQuestion < 40 && goToQuestion(currentQuestion + 1);
        window.previousQuestion = () => currentQuestion > 1 && goToQuestion(currentQuestion - 1);

        function updateAllIndicators() {
            updateAttemptedCount(1, 1, 13);
            updateAttemptedCount(2, 14, 26);
            updateAttemptedCount(3, 27, 40);
            updateAnsweredNav();
        }
        
        function updateAnsweredNav() {
            const navButtons = document.querySelectorAll('.subQuestion');
            navButtons.forEach(btn => {
                const qNum = parseInt(btn.textContent, 10);
                if (isQuestionAnswered(qNum)) {
                    btn.classList.add('answered');
                } else {
                    btn.classList.remove('answered');
                }
            });
        }
        
        function isQuestionAnswered(qNum) {
            // Check text inputs and select dropdowns
            const textInput = document.getElementById(`q${qNum}`);
            if (textInput && textInput.value.trim() !== '') {
                return true;
            }
            
            // Check radio buttons
            const radio = document.querySelector(`input[name="q${qNum}"]:checked`);
            if (radio) {
                return true;
            }
            
            // Check drop zones for drag-and-drop questions
            const dropZone = document.querySelector(`.drop-zone[data-q-start="${qNum}"]`);
            if (dropZone && dropZone.querySelector('.drag-item')) {
                return true;
            }
            
            return false;
        }

        function scrollIntoViewIfNeeded(element) {
            const panel = element.closest('.questions-panel, .passage-panel');
            const panelRect = panel.getBoundingClientRect();
            const elementRect = element.getBoundingClientRect();
            if (elementRect.top < panelRect.top || elementRect.bottom > panelRect.bottom) {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        // --- DRAG AND DROP ---
        
        function initializeDragAndDrop() {
            document.querySelectorAll('.drag-item').forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
                item.addEventListener('click', () => selectDragItem(item));
            });
            document.querySelectorAll('.drop-zone, .drag-options-container').forEach(zone => {
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('dragleave', handleDragLeave);
                zone.addEventListener('drop', handleDrop);
            });
        }

        function handleDragStart(e) {
            draggedItem = e.target;
            setTimeout(() => e.target.classList.add('dragging'), 0);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            draggedItem = null;
        }

        function handleDragOver(e) {
            e.preventDefault();
            const targetZone = e.currentTarget;
            if (draggedItem && draggedItem.dataset.dndGroup === targetZone.dataset.dndGroup) {
                targetZone.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            const targetZone = e.currentTarget;
            targetZone.classList.remove('drag-over');

            if (!draggedItem || draggedItem.dataset.dndGroup !== targetZone.dataset.dndGroup) {
                return;
            }

            const sourceZone = draggedItem.parentElement;
            if (sourceZone === targetZone) return; // Prevent dropping on itself

            const existingItemInTarget = targetZone.classList.contains('drop-zone') 
                ? targetZone.querySelector('.drag-item') 
                : null;

            // First, clear the target drop-zone of any text (like question numbers) before adding the new item.
            if (targetZone.classList.contains('drop-zone')) {
                Array.from(targetZone.childNodes).forEach(node => {
                    if (node.nodeType === Node.TEXT_NODE) {
                        node.remove();
                    }
                });
            }

            // Move the item that was in the target (if any) to the source zone.
            if (existingItemInTarget) {
                sourceZone.appendChild(existingItemInTarget);
            }
            
            // Finally, move the dragged item to the target zone.
            targetZone.appendChild(draggedItem);
            targetZone.classList.add('filled');

            // After the move, clean up the source zone if it's a drop-zone and is now empty.
            if (sourceZone.classList.contains('drop-zone') && !sourceZone.querySelector('.drag-item')) {
                 sourceZone.classList.remove('filled');
                 const qNum = sourceZone.dataset.qStart;
                 sourceZone.innerText = qNum; // Restore the question number
            }
            
            updateAllIndicators();
        }
        
        // --- MISC HELPERS ---
        
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval); // Ensure no multiple intervals
            timerInterval = setInterval(() => {
                timeInSeconds--;
                const minutes = Math.floor(timeInSeconds / 60);
                const seconds = timeInSeconds % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                if (timeInSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "Time's up!";
                    // checkAnswers(); // Disabled to prevent modal from opening automatically.
                }
            }, 1000);
            timerToggleButton.innerHTML = pauseIcon;
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            timerToggleButton.innerHTML = playIcon;
        }

        function toggleTimer() {
            // Check based on the icon currently displayed
            if (timerToggleButton.innerHTML.includes('M6 19h4V5H6v14z')) { // Check for pause icon shape
                pauseTimer();
            } else {
                startTimer();
            }
        }

        function resetTimer() {
            timeInSeconds = 3600;
            const minutes = Math.floor(timeInSeconds / 60);
            const seconds = timeInSeconds % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            startTimer();
            timerToggleButton.innerHTML = pauseIcon;
        }
        
        function setupCheckboxLimits() {
            const checkboxGroups = [
                { name: 'q38-40', limit: 3 }
            ];
            checkboxGroups.forEach(group => {
                const checkboxes = document.querySelectorAll(`input[name="${group.name}"]`);
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        const checkedCount = document.querySelectorAll(`input[name="${group.name}"]:checked`).length;
                        if (checkedCount > group.limit) checkbox.checked = false;
                        updateAllIndicators();
                    });
                });
            });
        }

        function setupExampleHeading() {
            const exampleBox = document.querySelector('.example-box');
            if(exampleBox){
                const title = document.createElement('p');
                title.style.fontWeight = 'bold';
                title.textContent = 'List of Statements';
                // exampleBox.insertBefore(title, exampleBox.firstChild);
            }
        }
        
        function initResize(e) {
            e.preventDefault();
            const startX = e.clientX;
            const startWidth = passagePanel.offsetWidth;
            
            const doDrag = (e) => {
                const newWidth = startWidth + e.clientX - startX;
                if (newWidth > 200 && (document.body.clientWidth - newWidth - resizer.offsetWidth) > 200) {
                    passagePanel.style.flex = `0 0 ${newWidth}px`;
                }
            };
            const stopDrag = () => {
                window.removeEventListener('mousemove', doDrag, false);
                window.removeEventListener('mouseup', stopDrag, false);
            };
            
            window.addEventListener('mousemove', doDrag, false);
            window.addEventListener('mouseup', stopDrag, false);
        }
        
        // --- CONTEXT MENU (Highlighting) ---
        
        function initializeContextMenu() {
            const panels = [passagePanel, questionsPanel];
            let targetElementForClear = null;

            // This listener simply tracks the last valid text selection in either panel.
            document.addEventListener('selectionchange', () => {
                const selection = window.getSelection();
                if (selection && !selection.isCollapsed && selection.toString().trim().length > 0) {
                    const range = selection.getRangeAt(0);
                    if (panels.some(panel => panel.contains(range.commonAncestorContainer))) {
                        selectedRange = range;
                        targetElementForClear = null; // New selection overrides clearing a specific element
                    }
                }
            });

            const showContextMenu = (e) => {
                const target = e.target;
                const isClickOnHighlight = target.closest('.highlight, .comment-highlight');
                const isSelectionActive = selectedRange && selectedRange.toString().trim().length > 0;
                
                let showMenu = false;

                if (isClickOnHighlight) {
                    document.getElementById('menu-highlight').style.display = 'none';
                    document.getElementById('menu-note').style.display = 'none';
                    document.getElementById('menu-clear').style.display = 'block';
                    document.getElementById('menu-clear-all').style.display = 'block';
                    contextMenu.targetElementForClear = isClickOnHighlight;
                    showMenu = true;
                } else if (isSelectionActive && panels.some(panel => panel.contains(selectedRange.commonAncestorContainer))) {
                    document.getElementById('menu-highlight').style.display = 'flex';
                    document.getElementById('menu-note').style.display = 'flex';
                    document.getElementById('menu-clear').style.display = 'none';
                    document.getElementById('menu-clear-all').style.display = 'block'; // Always show clear all
                    showMenu = true;
                }

                if (showMenu) {
                    e.preventDefault();
                    contextMenu.style.display = 'block';
                    const menuHeight = contextMenu.offsetHeight;
                    const menuWidth = contextMenu.offsetWidth;
                    let left = e.pageX;
                    let top = e.pageY;
                    if (left + menuWidth > window.innerWidth) left = window.innerWidth - menuWidth - 5;
                    if (top + menuHeight > window.innerHeight) top = e.pageY - menuHeight - 5;
                    else top = e.pageY - menuHeight - 5;
                    
                    contextMenu.style.left = `${left}px`;
                    contextMenu.style.top = `${top}px`;
                }
            };

            panels.forEach(panel => {
                panel.addEventListener('contextmenu', showContextMenu);
            });

            document.addEventListener('click', (e) => {
                if (contextMenu.style.display === 'block' && !contextMenu.contains(e.target)) {
                    closeContextMenu();
                }
            });
        }

        function closeContextMenu() {
            contextMenu.style.display = 'none';
            selectedRange = null; // Clear range after menu closes
        }

        function unwrapElement(element) {
            const parent = element.parentNode;
            if (!parent) return;
            while (element.firstChild) {
                parent.insertBefore(element.firstChild, element);
            }
            parent.removeChild(element);
            parent.normalize();
        }

        window.highlightText = () => {
            if (selectedRange && !selectedRange.collapsed) {
                try {
                    highlightSelection(selectedRange, 'highlight');
                } catch (e) {
                    console.warn('Highlighting failed:', e);
                }
            }
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        window.addNote = () => {
            const note = prompt('Enter your note:');
            if (note && selectedRange && !selectedRange.collapsed) {
                try {
                    highlightSelection(selectedRange, 'comment-highlight', note);
                } catch (e) {
                    console.warn('Note adding failed:', e);
                }
            }
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        function highlightSelection(range, className, noteText = null) {
            // Get all text nodes within the selection
            const walker = document.createTreeWalker(
                range.commonAncestorContainer,
                NodeFilter.SHOW_TEXT,
                {
                    acceptNode: function(node) {
                        const nodeRange = document.createRange();
                        nodeRange.selectNodeContents(node);
                        return range.intersectsNode(node) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;
                    }
                }
            );

            const textNodes = [];
            let node;
            while (node = walker.nextNode()) {
                textNodes.push(node);
            }

            if (textNodes.length === 0) {
                // Fallback to original method for simple selections
                const contents = range.extractContents();
                const span = document.createElement('span');
                span.className = className;
                if (noteText) {
                    const tooltip = document.createElement('span');
                    tooltip.className = 'comment-tooltip';
                    tooltip.textContent = noteText;
                    span.appendChild(contents);
                    span.appendChild(tooltip);
                } else {
                    span.appendChild(contents);
                }
                range.insertNode(span);
                return;
            }

            // Process each text node
            const nodesToHighlight = [];
            textNodes.forEach(textNode => {
                const nodeRange = document.createRange();
                nodeRange.selectNodeContents(textNode);
                
                // Find intersection with selection
                const intersection = document.createRange();
                intersection.setStart(
                    range.startContainer.compareDocumentPosition(textNode) & Node.DOCUMENT_POSITION_FOLLOWING ?
                    textNode : range.startContainer,
                    range.startContainer.compareDocumentPosition(textNode) & Node.DOCUMENT_POSITION_FOLLOWING ?
                    0 : range.startOffset
                );
                intersection.setEnd(
                    range.endContainer.compareDocumentPosition(textNode) & Node.DOCUMENT_POSITION_PRECEDING ?
                    textNode : range.endContainer,
                    range.endContainer.compareDocumentPosition(textNode) & Node.DOCUMENT_POSITION_PRECEDING ?
                    textNode.textContent.length : range.endOffset
                );

                if (!intersection.collapsed) {
                    nodesToHighlight.push({
                        node: textNode,
                        startOffset: intersection.startOffset,
                        endOffset: intersection.endOffset
                    });
                }
            });

            // Apply highlighting to each node
            nodesToHighlight.reverse().forEach(({node, startOffset, endOffset}) => {
                const beforeText = node.textContent.substring(0, startOffset);
                const highlightText = node.textContent.substring(startOffset, endOffset);
                const afterText = node.textContent.substring(endOffset);

                const span = document.createElement('span');
                span.className = className;
                span.textContent = highlightText;

                if (noteText && className === 'comment-highlight') {
                    const tooltip = document.createElement('span');
                    tooltip.className = 'comment-tooltip';
                    tooltip.textContent = noteText;
                    span.appendChild(tooltip);
                }

                const parent = node.parentNode;
                
                if (beforeText) {
                    parent.insertBefore(document.createTextNode(beforeText), node);
                }
                parent.insertBefore(span, node);
                if (afterText) {
                    parent.insertBefore(document.createTextNode(afterText), node);
                }
                parent.removeChild(node);
            });
        }

        window.clearHighlight = () => {
             const elementToClear = contextMenu.targetElementForClear;
             if (elementToClear) {
                 unwrapElement(elementToClear);
             }
             closeContextMenu();
             window.getSelection().removeAllRanges();
        };
        
        window.clearAllHighlights = () => {
            document.querySelectorAll('.highlight, .comment-highlight').forEach(unwrapElement);
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        function updateAttemptedCount(part, startQ, endQ) {
            let answeredCount = 0;
            for (let i = startQ; i <= endQ; i++) {
                if (isQuestionAnswered(i)) {
                    answeredCount++;
                }
            }
            const partHeader = document.querySelector(`.footer__questionNo___3WNct[onclick="switchToPart(${part})"]`);
            if (partHeader) {
                const countSpan = partHeader.querySelector('.attemptedCount');
                if (countSpan) {
                     countSpan.textContent = `${answeredCount} of ${endQ - startQ + 1}`;
                }
            }
        }

        // --- GLOBAL FUNCTION EXPOSURE ---
        window.nextQuestion = nextQuestion;
        window.previousQuestion = previousQuestion;
        window.goToQuestion = goToQuestion;
        window.switchToPart = switchToPart;
        window.closeResultsModal = closeResultsModal;
        window.highlightText = highlightText;
        window.addNote = addNote;
        window.clearHighlight = clearHighlight;
        window.clearAllHighlights = clearAllHighlights;

        // --- START THE APP ---
        initialize();
    });
    </script>
</body>
</html>
