<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Full Reading Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            line-height: 1.4;
            font-size: 16px;
        }

        .header {
            background-color: #ffffff;
            padding: 12px 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            height: 60px;
        }

        .ielts-logo {
            display: none;
        }

        .test-info {
            display: flex;
            align-items: center;
            gap: 30px;
            font-size: 14px;
            color: #333;
        }

        .audio-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
        }

        .audio-icon {
            width: 16px;
            height: 16px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg>') no-repeat center;
        }

        .header-icons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .telegram-link {
            color: #0088cc;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .telegram-link:hover {
            text-decoration: underline;
        }

        .telegram-link::before {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: currentColor;
            -webkit-mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-1.37.2-1.64l16.56-6.4c.75-.29 1.4.22 1.2.94l-2.67 12.61c-.22.95-1.13 1.18-1.78.73l-4.5-3.32l-2.23 2.15c-.47.44-1.29.21-1.48-.37z"/></svg>');
            mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-1.37.2-1.64l16.56-6.4c.75-.29 1.4.22 1.2.94l-2.67 12.61c-.22.95-1.13 1.18-1.78.73l-4.5-3.32l-2.23 2.15c-.47.44-1.29.21-1.48-.37z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
        }

        #volume-slider {
            -webkit-appearance: none;
            width: 80px;
            height: 4px;
            background: #ddd;
            outline: none;
            border-radius: 2px;
            cursor: pointer;
        }

        #volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #333;
            cursor: pointer;
        }

        #volume-slider::-moz-range-thumb {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #333;
            cursor: pointer;
            border: none;
        }

        .icon {
            width: 20px;
            height: 20px;
            cursor: pointer;
            opacity: 0.7;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .icon:hover {
            opacity: 1;
        }
        
        #play-pause-btn {
            background: none;
            border: none;
            padding: 0;
        }

        .main-container {
            margin-top: 60px;
            display: flex;
            flex-direction: column;
            background: #ffffff;
            height: calc(100vh - 60px); /* Full height minus header */
        }

        .panels-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .passage-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
        }

        /* Passage Content */
        .text-center {
            text-align: center;
        }
        .reading-passage h4 {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
       
        .reading-passage p {
            margin-bottom: 1.2em;
        }

        .question ul li label {
            display: block;
            margin-top: 8px;
            cursor: pointer;
        }

        .questions-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
            border-left: 1px solid #e0e0e0;
        }

        .resizer {
            width: 10px;
            cursor: col-resize;
            background-color: #f0f0f0;
            background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="30" viewBox="0 0 10 30"><path d="M4 11h2v2H4zM4 15h2v2H4zM4 19h2v2H4z" fill="%23888"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
            flex-shrink: 0;
            flex-grow: 0;
        }

        /* Left Panel */
        .left-panel {
            width: 100%;
            padding: 20px;
        }

        /* Right Panel */
        .right-panel {
            display: none;
            width: 50%;
            padding: 20px;
            position: relative;
        }

        .help-button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 20px;
        }

        .help-button:hover {
            background: #357abd;
        }

        .section-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .people-section {
            margin-bottom: 30px;
        }

        .people-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #ccc;
        }

        .people-table th {
            text-align: left;
            padding: 10px;
            font-weight: bold;
            border: 1px solid #ddd;
        }

        .people-table td {
            padding: 8px 10px;
            border: 1px solid #ddd;
        }

        .person-name {
            font-size: 16px;
        }

        .question-number {
            background: white;
            border: 1px solid #4a90e2;
            padding: 4px 8px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 14px;
            color: #4a90e2;
            min-width: 30px;
            text-align: center;
        }

        .assigned-responsibility {
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 14px;
            border: 1px solid #ddd;
        }

        .responsibilities-section {
            margin-bottom: 30px;
        }

        .responsibility-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .responsibility-item {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            text-align: center;
            transition: all 0.2s;
        }

        .responsibility-item:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .responsibility-item.dragging {
            opacity: 0.5;
        }

        .questions-section {
            margin-bottom: 20px;
        }

        .question-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .instruction {
            margin-bottom: 20px;
            font-size: 16px;
            color: #666;
        }

        /* Map Styles */
        .map-container {
            position: relative;
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }

        .map-svg {
            border: 2px solid #333;
            background: white;
        }

        .map-room {
            fill: #f9f9f9;
            stroke: #333;
            stroke-width: 1;
        }

        .map-text {
            font-family: Arial, sans-serif;
            font-size: 13px;
            text-anchor: middle;
            fill: #333;
        }

        .map-number {
            font-family: Arial, sans-serif;
            font-size: 16px;
            font-weight: bold;
            text-anchor: middle;
            fill: #333;
        }

        .room-labels {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .room-label {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            text-align: center;
            transition: all 0.2s;
        }

        .room-label:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .room-label.dragging {
            opacity: 0.5;
        }

        /* Navigation Arrows */
        .nav-arrows {
            position: fixed;
            bottom: 100px;
            right: 20px;
            display: flex;
            gap: 5px;
            z-index: 101;
        }

        .nav-arrow {
            width: 50px;
            height: 50px;
            background: #333;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
        }

        .nav-arrow:hover {
            background: #555;
        }

        .nav-arrow:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Bottom Navigation - Equal Sections */
        .nav-row {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #ffffff;
            padding: 8px 16px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            align-items: center;
            height: 60px;
            z-index: 100;
            gap: 8px;
        }

        .footer__questionWrapper___1tZ46 {
            display: flex;
            align-items: center;
            position: relative;
            transition: background-color 0.2s;
            border-radius: 4px;
            padding: 4px 8px;
            width: 100%;
            height: 100%;
            justify-content: center;
        }


        .footer__questionWrapper___1tZ46.selected {
            justify-content: flex-start;
        }

        .footer__questionNo___3WNct {
            background: none;
            border: none;
            padding: 4px 8px;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: none;
            min-width: 120px;
            position: relative;
        }



        
        .footer__questionWrapper___1tZ46:first-child:not(.selected) {
            justify-content: center;
        }

        .footer__questionWrapper___1tZ46:nth-child(2):not(.selected) {
            justify-content: center;
        }

        .footer__questionWrapper___1tZ46:nth-child(3):not(.selected) {
            justify-content: center;
        }

        .footer__questionWrapper___1tZ46:hover {
            background-color: #f0f0f0;
        }

        .footer__questionNo___3WNct:hover {
            background-color: transparent;
        }

        .section-prefix {
            font-size: 16px;
        }

        .sectionNr {
            font-size: 16px;
            font-weight: bold;
        }

        .attemptedCount {
            font-size: 14px;
            color: #666;
            margin-left: 8px;
            font-weight: 400;
        }

        @media (max-width: 768px) {
            .attemptedCount {
                display: none;
            }
        }

        .footer__questionWrapper___1tZ46.selected .attemptedCount {
            display: none !important;
        }

        .footer__questionWrapper___1tZ46:not(.selected) .attemptedCount {
            display: inline;
        }

        .footer__subquestionWrapper___9GgoP {
            display: none;
            gap: 3px;
            margin-left: 12px;
            flex-wrap: nowrap;
            align-items: center;
        }

        .footer__questionWrapper___1tZ46.selected .footer__subquestionWrapper___9GgoP {
            display: flex;
        }

        .subQuestion {
            width: 28px;
            height: 28px;
            border: 1px solid #ddd;
            background: white;
            color: #333;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            border-radius: 4px;
            margin: 1px;
            flex-shrink: 0;
        }

        .subQuestion.answered {
            background-color: #4CAF50;
            border-color: #4CAF50;
            color: white;
        }
        
        .subQuestion.correct {
            background-color: #28a745 !important;
            color: white !important;
            border-color: #28a745 !important;
        }
        
        .subQuestion.incorrect {
            background-color: #dc3545 !important;
            color: white !important;
            border-color: #dc3545 !important;
        }

        .subQuestion:hover {
            background-color: #f0f0f0;
            border-color: #ccc;
        }

        .subQuestion.active {
            background-color: #2196f3;
            color: white;
            border-color: #2196f3;
            box-shadow: 0 2px 4px rgba(33, 150, 243, 0.3);
        }

        .subQuestion.completed {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .footer__deliverButton___3FM07 {
            background-color: #f8f9fa;
            color: #333;
            border: 1px solid #dee2e6;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
            min-width: 40px;
            justify-content: center;
            height: 36px;
            margin-left: 16px;
            flex-shrink: 0;
        }

        .footer__deliverButton___3FM07:hover {
            background-color: #e9ecef;
            border-color: #adb5bd;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .footer__deliverButton___3FM07:disabled {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
            border-color: #ddd;
        }

        .fa-check::before {
            content: "✓";
        }

        .hidden {
            display: none !important;
        }

        /* Context Menu */
        .context-menu {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
            min-width: 140px;
        }

        .context-menu-item {
            padding: 12px 16px;
            cursor: pointer;
            font-size: 16px;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .context-menu-item:hover {
            background-color: #f8f9fa;
        }

        .context-menu-item:last-child {
            border-bottom: none;
        }

        .highlight {
            background-color: #ffff00;
        }

        .comment-highlight {
            background-color: #90EE90;
            position: relative;
            cursor: help;
        }

        .comment-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            white-space: nowrap;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .comment-highlight:hover .comment-tooltip {
            opacity: 1;
        }

        .question {
            margin-bottom: 40px;
        }
        .question p {
            margin-bottom: 10px;
        }
        .question ul, .question .people-table {
            margin-top: 0;
        }
        .question-prompt {
            margin-bottom: 20px;
        }
        .question ul {
            list-style: none;
            padding-left: 0;
        }
        .question ul li {
            margin-bottom: 5px;
        }
        .answer-input {
            border: 1px solid #888;
            border-radius: 4px;
            background-color: #fff;
            padding: 2px 5px;
            font-size: 16px;
            text-align: center;
            margin-right: 4px;
            margin-left: 4px;
            transition: border-color 0.3s, box-shadow 0.3s;
            height: 28px; /* Standard height */
            width: 150px; /* Standard width */
        }
        .answer-input.active-input {
            border-color: #4a90e2;
            box-shadow: 0 0 3px 1px rgba(74, 144, 226, 0.5);
        }
        .answer-input::placeholder {
            color: #999;
            font-weight: bold;
            text-align: center;
        }
        .answer-input.correct {
            border-color: #28a745;
            background-color: #e9f7ef;
        }
        .answer-input.incorrect {
            border-color: #dc3545;
            background-color: #f8d7da;
            color: #721c24;
        }
        .answer-input {
    z-index: 10;
    position: relative;
    pointer-events: auto;
}
        .drag-drop-container {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            align-items: flex-start;
            flex-direction: column;
        }
        .recommendations-box {
            display: flex;
            flex-direction: column;
            gap: 8px;

            min-height: 200px;
        }
        
        /* Styled headings format - matching the image format */
        .recommendations-box .drag-item {
            border: 1px solid #000000;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            font-weight: 600;
            text-align: left;
            transition: all 0.2s;
            user-select: none;
            color: #000000;
        }
        
        .drag-item {
            background: white;
            border: 1px solid #ddd;
            padding: 1px 5px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            transition: all 0.2s;
            user-select: none;
        }
        .drag-item:hover {
            background: #e9ecef;
        }
        .drag-item.dragging {
            opacity: 0.5;
        }
        .drag-item.selected {
            border-color: #4a90e2;
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.5);
        }
        .drop-zone {
            border: 2px dashed #aaa;
            border-radius: 4px;
            width: 50%;
            margin-top: 19px;
            margin-bottom: 5px;
            transition: background-color 0.2s, border-color 0.2s;
            padding: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .drop-zone.drag-over {
            background-color: #e6f4ff;
            border-color: #4a90e2;
        }
        .drop-zone.correct {
            background-color: #e9f7ef;
            border-color: #28a745;
            border-style: solid;
        }
        .drop-zone.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            border-style: solid;
        }
        .drop-zone.disabled {
            pointer-events: none;
        }
        .drop-zone .drag-item {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            padding: 2px;
        }
        .drag-options-container {
            margin-top: 10px;
        }
        .drag-options-container .drag-item {
            display: block;
            width: fit-content;
            font-size: 15px;
            padding: 0.5px 10px;
            margin-bottom: 5px;
        }
        .drag-options-container .drag-item:last-child {
            margin-bottom: 0;
        }
        .q-number {
            color: #888;
            font-size: 14px;
            font-weight: bold;
        }
        .questions-container {
            width: 100%;
        }
        audio {
            width: 100%;
            margin-bottom: 20px;
        }
        .part-header {
            background-color: #f1f2ec;
            padding: 15px 20px;
            border: 1px solid #e0e0e0;
            text-align: left;
            margin: 10px 20px;
            border-radius: 5px;
        }
        .part-header p {
            margin: 0;
        }
        .part-header p:first-child {
            margin-bottom: 5px;
        }

        .question li.correct {
            color: #155724;
            font-weight: bold;
        }
        .question li.incorrect {
            color: #721c24;
        }
        .question li.correct::before {
            content: '✔ ';
            color: #28a745;
        }
        .question li.incorrect::before {
            content: '✖ ';
            color: #dc3545;
        }

        .example-box {
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .timer-container {
            display: flex;
            position: relative;
            cursor: default;
            color: #333;
            font-size: 16px;
            font-weight: 500;
            align-items: center;
        }
        .timer-container .timer-tooltip {
            display: none;
        }

        .timer-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 15px;
        }

        .timer-controls button {
            background: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 50%;
            padding: 0;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        .timer-controls button:hover {
            background: #e0e0e0;
        }

        .timer-controls button svg {
            width: 20px;
            height: 20px;
            fill: #333;
        }

        .audio-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(40, 40, 40, 0.9);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }
        .audio-modal-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            max-width: 500px;
            padding: 20px;
        }
        .audio-modal-content p {
            font-size: 16px;
            line-height: 1.5;
            color: #eee;
        }
        .audio-modal-icon {
            margin-bottom: 20px;
        }
        .modal-play-btn {
            background-color: #000;
            color: white;
            border: 1px solid white;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }
        .modal-play-btn:hover {
            background-color: #333;
        }
        #goto-widget {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #goto-input {
            width: 80px;
            padding: 4px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #goto-btn {
            padding: 4px 10px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Styles for TRUE/FALSE/NOT GIVEN questions */
        .tf-question {
            margin-bottom: 25px;
            padding: 10px 0px;
            border-radius: 4px;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .tf-question-line {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 5px 0px;
            border-radius: 4px;
        }
        .tf-question-number, .question-number-box {
            border: 2px solid #ccc;
            padding: 2px 8px;
            margin-right: 10px;
            border-radius: 3px;
            font-weight: bold;
            transition: border-color 0.3s;
            display: inline-block;
        }
        .tf-question-text {
            padding-top: 3px;
        }
        .tf-options {
            padding-left: 5px;
        }
        .tf-option {
            display: block;
            margin-bottom: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        .tf-option input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        .tf-question.correct .tf-question-line {
            background-color: #e9f7ef;
        }
        .tf-question.incorrect .tf-question-line {
            background-color: #f8d7da;
        }
        .matching-question-container {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        .matching-options-bank {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .matching-questions {
            flex: 1.5;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .matching-question-item {
            display: flex;
            align-items: center;
            gap: 15px;

            border: 2px solid transparent;
            border-radius: 4px;
            transition: border-color 0.3s;
        }
        .matching-question-item > span {
            flex: 1;
        }
        .matching-question-item.correct {
            background-color: #e9f7ef;
            border-color: #28a745 !important;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .matching-question-item .drop-zone {
            width: 200px;
            flex-shrink: 0;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #aaa;
        }
        .matching-options-bank .drag-item {
            font-size: 15px;
            text-align: center;
            border: 1px solid #ccc;
            background: #f9f9f9;
        }

        .questions-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
            border-left: 1px solid #e0e0e0;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .summary-completion-container {
            margin-top: 20px;
        }
        .summary-text p {
            line-height: 2;
            font-size: 16px;
        }
        .summary-drop-zone {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            vertical-align: middle;
            min-width:200px;
            height: 25px;
            border: 2px dashed #999;
            border-radius: 4px;
            margin: 0 5px;
            padding: 0 5px;
            transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s;
            color: #aaa;
            font-weight: bold;
        }
        .summary-drop-zone.filled {
            border-color: #4a90e2;
        }
        .summary-drop-zone.active-input {
             border-color: #4a90e2;
             box-shadow: none;
        }
        .summary-drop-zone .drag-item {
            font-size: 15px;
            font-weight: bold;
            background-color: transparent;
            border: none;
            padding: 0;
            text-align: center;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .summary-options-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .summary-options-bank .drag-item {
            flex-grow: 1;
            min-width: 100px;
            text-align: center;
        }
        .multi-choice-question {
            margin-bottom: 20px;
            border-radius: 4px;
            border: 3px solid transparent;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .multi-choice-option {
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .multi-choice-option label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 16px;
        }
        .multi-choice-option input[type="checkbox"],
        .multi-choice-option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.3);
            accent-color: #4a90e2;
        }
        .multi-choice-option.correct {
            background-color: #e9f7ef;
        }
        .multi-choice-option.incorrect {
            background-color: #f8d7da;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .matching-question-item .drop-zone.filled {
            border-color: #4a90e2;
        }
        .matching-question-item .drop-zone {
            width: 200px;
            height: 40px;
        }
        .paragraph-matching-question {
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 12px;
        }
        .paragraph-matching-question .answer-input {
            width: 80px;
            flex-shrink: 0;
        }

        .matching-form-container {
            margin-top: 20px;
        }
        .matching-form-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        .matching-form-label {
            flex-shrink: 0;
        }

        /* Results Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .modal-overlay.hidden {
            display: none;
        }
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .modal-close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #888;
        }
        .modal-content h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #333;
        }
        .results-summary {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        .results-details-container {
            overflow-y: auto;
            padding-right: 10px; /* For scrollbar */
        }
        .result-row {
            display: grid;
            grid-template-columns: 40px 1fr 1fr;
            gap: 15px;
            padding: 8px 5px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 15px;
        }
        .result-row.incorrect {
            background-color: #f8d7da;
        }
        .result-row .q-num {
            font-weight: bold;
        }
        .result-row .user-ans {
            color: #555;
        }
        .result-row .correct-ans {
            color: #155724;
            font-weight: 500;
        }
        .correct-answer-display {
            font-weight: bold;
            color: #28a745;
            margin-left: 10px;
            font-size: 14px;
        }
        .correct-answer-highlight, .tf-option.correct-answer-highlight, .multi-choice-option.correct-answer-highlight {
            background-color: #d4edda !important;
            border: 1px solid #c3e6cb !important;
            border-radius: 4px;
            padding: 4px;
        }
        .correct-answer-highlight {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
        }
        .centered-title {
                    text-align: center;
                    font-size: 20px;
                    font-weight: bold;
                    margin-bottom: 15px;
                }

        /* Custom Scrollbar Styles */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #888;
            border-radius: 0;
        }

        ::-webkit-scrollbar-thumb:hover {
            background-color: #666;
        }

        /* Firefox scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: #888 transparent;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="timer-container">
            <span class="timer-display">58:49</span>
            <div class="timer-controls">
                <button id="timer-toggle-btn" title="Pause/Resume Timer"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg></button>
                <button id="timer-reset-btn" title="Reset Timer">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"></path></svg>
                </button>
            </div>
        </div>
        
    </div>

    <div class="main-container" id="main-container">
        <div id="passage-header-container">
            <div id="part-header-1" class="part-header">
                <p><strong>Part 1</strong></p>
                <p>Read the text and answer questions 1-13.</p>
            </div>
            <div id="part-header-2" class="part-header hidden">
                <p><strong>Part 2</strong></p>
                <p>Read the text and answer questions 14-26.</p>
            </div>
            <div id="part-header-3" class="part-header hidden">
                <p><strong>Part 3</strong></p>
                <p>Read the text and answer questions 27-40.</p>
            </div>
        </div>
        <div class="panels-container">
            <div class="passage-panel" id="passage-panel">
                <div id="passage-text-1" class="reading-passage">
                    <h4 class="text-center">Can We Hold Back the Flood?</h4>

                    <p><strong>A</strong>&nbsp;&nbsp;LAST winter's floods on the rivers of central Europe were among the worst since the Middle Ages, and as winter storms return, the spectre of floods is returning too. Just weeks ago, the river Rhône in south-east France burst its banks, driving 15,000 people from their homes, and worse could be on the way. Traditionally, river engineers have gone for Plan A: get rid of the water fast, draining it off the land and down to the sea in tall-sides rivers re-engineered as high-performance drains. But however big they dig city drains, however wide and straight they make the rivers, and however high they build the banks, the floods keep coming back to haunt them, from the Mississippi to the Danube. And when the floods come, they seem to be worse than ever.</p>

                    <p><strong>B</strong>&nbsp;&nbsp;No wonder engineers are turning to Plan B: sap the water's destructive strength by dispersing it into fields, forgotten lakes, flood plains and aquifers. Back in the days when rivers took a more tortuous path to the sea, floodwaters lost impetus and volume while meandering across flood plains and idling through wetlands and inland deltas. But today the water tends to have an unimpeded journey to the sea. And this means that when it rains in the uplands, the water comes down all at once. Worse, whenever we close off more flood plain, the river's flow farther downstream becomes more violent and uncontrollable. Dykes are only as good as their weakest link – and the water will unerringly find it.</p>

                    <p><strong>C</strong>&nbsp;&nbsp;Today, the river has lost 7 per cent of its original length and runs up to a third faster. When it rains hard in the Alps, the peak flows from several tributaries coincide in the main river, where once they arrived separately. And with four-fifths of the Lower Rhine's flood plain barricaded off, the waters rise ever higher. The result is more frequent flooding that does ever-greater damage to the homes, offices and roads that sit on the flood plain. Much the same has happened in the US on the mighty Mississippi, which drains the world's second-largest river catchment into the Gulf of Mexico.</p>

                    <p><strong>D</strong>&nbsp;&nbsp;The European Union is trying to improve rain forecasts and more accurately model how intense rains swell rivers. That may help cities prepare, but it won't stop the floods. To do that, say, hydrologists, you need a new approach to engineering, not just Agency – country £1 billion – puts it like this: "The focus is now on working with the forces of nature. Towering concrete walls are out, and new wetlands are in." to help keep London's upstream and reflooding 10 square kilometres outside Oxford. Nearer to London it has spent £100 million creating new wetlands and a relief channel across 16 kilometres.</p>

                    <p><strong>E</strong>&nbsp;&nbsp;The same is taking place on a much grander scale in Austria, in one of Europe's largest river restorations to date. Engineers are regenerating flood plains along 60 kilometres of the river Drave as it exits the Alps. They are also widening the river bed and channeling it back into abandoned meanders, oxbow lakes and backwaters overhung with willows. The engineers calculate that the restored flood plain can now store up to 10 million cubic metres of floodwaters and slow storm surges coming out of the Alps by more than an hour, protecting towns as far downstream as Slovenia and Croatia.</p>

                    <p><strong>F</strong>&nbsp;&nbsp;"Rivers have to be allowed to take more space. They have to be turned from flood-chutes into flood-foilers," says Nienhuis. And the Dutch, for whom preventing floods is a matter of survival, have gone furthest. A nation built largely on drained marshes and seabed had the fright of its life in 1993 when the Rhine almost overwhelmed it. The same happened again in 1995 when a quarter of a million people were evacuated from the Netherlands. But a new breed of "soft engineers" wants our cities to become porous, and Berlin is their governed by tough new rules to prevent its drains from becoming overloaded after heavy rains. Herald Kraft, an architect working in the city, says: "We now see rainwater as giant Potsdamer Platz, a huge new commercial redevelopment by DaimlerChrysler in the heart of the city.</p>

                    <p><strong>G</strong>&nbsp;&nbsp;Los Angeles has spent billions of dollars digging huge drains and concreting river beds to carry away the water from occasional intense storms. "In LA we receive half the water we need in rainfall, and we throw it away. Then we spend hundreds of millions to import water," says Andy Lipkis, an LA environmentalist who kick-started the idea of the porous city by showing it could work on one house. Lipkis, along with citizens groups like Friends of the Los Angeles River and Unpaved LA, want to beat the urban flood hazard and fill the taps by holding onto the city's floodwater. And it's not just a pipe dream. The authorities this year launched a $100 million scheme to road-test the porous city in one flood-hit community in Sun Valley. The plan is to catch the rain that falls on thousands of driveways, parking lots and rooftops in the valley. Trees will soak up water from parking lots. Homes and public buildings will capture roof water to irrigate gardens and parks. And road drains will empty into old gravel pits and other leaky places that should recharge the city's underground water reserves. Result: less flooding and more water for the city. Plan B says every city should be porous, every river should have room to flood naturally and every coastline should be left to build its own defences. It sounds expensive and utopian, until you realise how much we spend trying to drain cities and protect our watery margins – and how bad we are at it.</p>
                </div>
                <div id="passage-text-2" class="reading-passage hidden">
                    <h4 class="text-center">Life-Casting and Art</h4>
                    <p style="font-style: italic; text-align: center;">Julian Bames explores the questions posed by Life-Casts, an exhibition of plaster moulds of living people and objects which were originally used for scientific purposes</p>
                    <p><strong>A</strong>&nbsp;&nbsp;Art changes over time and our idea of what art is changing too. For example, objects originally intended for devotional, ritualistic or recreational purposes may be recategorized as art by members of other later civilisations, such as our own, which no longer respond to these purposes.</p>
                    <p><strong>B</strong>&nbsp;&nbsp;What also happens is that techniques and crafts which would have been judged inartistic at the time they were used are reassessed. Life-casting is an interesting example of this. It involved making a plaster mould of a living person or thing. This was complex, technical work, as Benjamin Robert Haydon discovered when he poured 250 litres of plaster over his human model and nearly killed him. At the time, the casts were used for medical research and, consequently, in the nineteenth-century life-casting was considered inferior to sculpture in the same way that, more recently, photography was thought to be a lesser art than painting. Both were viewed as unacceptable shortcuts by the 'senior' arts. Their virtues of speed and unwavering realism also implied their limitations; they left little or no room for the imagination.</p>
                    <p><strong>C</strong>&nbsp;&nbsp;For many, life-casting was an insult to the sculptor's creative genius. In an infamous lawsuit of 1834, a moulder whose mask of the dying French emperor Napoleon had been reproduced and sold without his permission was judged to have no rights to the image. In other words, he was specifically held not to be an artist. This judgement reflects the view of established members of the nineteenth-century art world such as Rodin, who commented that life-casting 'happens fast but it doesn't make Art'. Some even feared that 'if too much nature was allowed in, it would lead Art away from its proper course of the Ideal.</p>
                    <p><strong>
                        D
                    </strong>&nbsp;&nbsp;The painter Gauguin, at the end of the nineteenth century, worried about future developments in photography. If ever the process went into colour, what painter would labour away at a likeness with a brush made from squirrel-tail? But painting has proved robust. Photography has changed it, of course, just as the novel had to reassess narrative after the arrival of the cinema. But the gap between the senior and junior arts was always narrower than the traditionalists implied. Painters have always used technical back-up such as studio assistants to do the boring bits, while apparently lesser crafts involve great skill, thought, preparation and, depending on how we define it, imagination.</p>
                    <p><strong>E</strong>&nbsp;&nbsp;Time changes our view in another way, too. Each new movement implies a reassessment of what has gone before? What is done now alters what was done before. In some cases, this is merely self-serving, with the new art using the old to justify itself. It seems to be saying, look at how all of that points to this! Aren't we clever to be the culmination of all that has gone before? But usually, it is a matter of re-alerting the sensibility, reminding us not to take things for granted. Take, for example, the cast of the hand of a giant from a circus, made by an anonymous artist around 1889, an item that would now sit happily in any commercial or public gallery. The most significant impact of this piece is on the eye, in the contradiction between unexpected size and verisimilitude. Next, the human element kicks in, you note that the nails are dirt-encrusted, unless this is the caster's decorative addition, and the fingertips extend far beyond them. Then you take in the element of choice, arrangement, art if you like, in the neat, pleated, buttoned sleeve-end that gives the item balance and variation of texture. This is just a moulded hand, yet the part stands utterly for the whole. It reminds us slyly, poignantly, of the full-size original.</p>
                    <p><strong>F</strong>&nbsp;&nbsp;But is it art? And, if so, why? These are old tediously repeated questions to which artists have often responded, 'It is art because I am an artist and therefore what I do is art. However, what doesn't work for literature works much better for artworks of art do float free of their creators' intentions. Over time the "reader" does become more powerful. Few of us can look at a medieval altarpiece as its painter intended. We believe too little and aesthetically know too much, so we recreate and find new fields of pleasure in the work. Equally, the lack of artistic intention of Paul Richer and other forgotten craftsmen who brushed oil onto flesh, who moulded, cast and decorated in the nineteenth century is now irrelevant. What counts is the surviving object and our response to it. The tests are simple: does it interest the eye, excite the brain, move the mind to reflection and involve the heart. It may, to use the old dichotomy, be beautiful but it is rarely true to any significant depth. One of the constant pleasures of art is its ability to come at us from an unexpected angle and stop us short in wonder.</p>
                </div>
                <div id="passage-text-3" class="reading-passage hidden">
                    <h4 class="centered-title">How should reading be taught?</h4>
                    <p style="font-style: italic; text-align: center;">By Keith Rayncr a Barbara R Foorman</p>
                    <div class="drop-zone filled" data-q-start="example" data-dnd-group="headings-27-31" style="margin: 10px 0;border: 2px dashed #999; border-radius: 4px; text-align: center; color: #aaa; font-weight: bold;">
                        <div class="drag-item" data-value="ix" data-dnd-group="headings-27-31" style="background: white; border: 1px solid #ddd; padding: 1px 5px; border-radius: 4px; font-size: 16px; user-select: none; color: #242424;">A debate amongst educators</div>
                    </div>
                    <p><strong>A</strong>&nbsp;&nbsp;Learning to speak is automatic for almost all children, but learning to read requires elaborate instruction and conscious effort. Well aware of the difficulties, educators have given a great deal of thought to how they can best help children learn to read. No single method has triumphed. Indeed, heated arguments about the most appropriate form of reading instruction continue to polarize the teaching community.</p>
                    
                    <div class="drop-zone" data-q-start="27" data-dnd-group="headings-27-31" style="margin: 10px 0;border: 2px dashed #999; border-radius: 4px; text-align: center; color: #aaa; font-weight: bold;">27</div>
                    <p><strong>B</strong>&nbsp;&nbsp;Three general approaches have been tried. In one, called whole-word instruction, children learn by rote how to recognise at a glance a vocabulary of 50 to 100 words. Then they gradually acquire other words, often through seeing them used over and over again in the context of a story.</p>
                    <p>Speakers of most languages learn the relationship between letters and the sounds associated with them (phonemes). That is, children are taught how to use their knowledge of the alphabet to sound out words. This procedure constitutes a second approach to teaching reading – phonics.</p>
                    <p>Many schools have adopted a different approach: the whole-language method. The strategy here relies on the child's experience with the language. For example, students are offered engaging books and are encouraged to guess the words that they do not know by considering the context of the sentence or by looking for clues in the storyline and illustrations, rather than trying to sound them out.</p>
                    <p>Many teachers adopted the whole-language approach because of its intuitive appeal. Making reading fun promises to keep children motivated, and learning to read depends more on what the student does than on what the teacher does. The presumed benefits of whole-language instruction – and the contrast to the perceived dullness of phonics – led to its growing acceptance across American during the 1990s and a movement away from phonics.</p>
                    
                    <div class="drop-zone" data-q-start="28" data-dnd-group="headings-27-31" style="margin: 10px 0;border: 2px dashed #999; border-radius: 4px; text-align: center; color: #aaa; font-weight: bold;">28</div>
                    <p><strong>C</strong>&nbsp;&nbsp;However, many linguists and psychologists objected strongly to the abandonment of phonics in American schools. Why was this so? In short, because research had clearly demonstrated that understanding how letters related to the component sounds in words is critically important in reading. This conclusion rests, in part, on knowledge of how experienced readers make sense of words on a page. Advocates of whole-language instruction have argued forcefully that people often derive meanings directly from print without ever determining the sound of the word. Some psychologists today accept this view, but most believe that reading is typically a process of rapidly sounding out words mentally. Compelling evidence for this comes from experiments which show that subjects often confuse homophones (words that sound the same, such as Jrose and 'rows5). This supports the idea that readers convert strings of letters to sounds.</p>
                    
                    <div class="drop-zone" data-q-start="29" data-dnd-group="headings-27-31" style="margin: 10px 0;border: 2px dashed #999; border-radius: 4px; text-align: center; color: #aaa; font-weight: bold;">29</div>
                    <p><strong>D</strong>&nbsp;&nbsp;In order to evaluate different approaches to teaching reading, a number of experiments have been carried out, firstly with college students, then with school pupils. Investigators trained English-speaking college students to read using unfamiliar symbols such as Arabic letters (the phonics approach), while another group learned entire words associated with certain strings of Arabic letters (whole-word). Then both groups were required to read a new set of words constructed from the original characters. In general, readers who were taught the rules of phonics could read many more new words than those trained with a whole-word procedure.</p>
                    <p>Classroom studies comparing phonics with either whole-word or whole-language instruction are also quite illuminating. One particularly persuasive study compared two programmes used in 20 first-grade classrooms. Half the students were offered traditional reading instruction, which included the use of phonics drills and applications. The other half were taught using an individualised method that drew from their experiences with languages; these children produce their own booklets of stories and developed sets of words to be recognised (common components of the whole-language approach). This study found that the first group scored higher at year's end on tests of reading and comprehension.</p>
                    
                    <div class="drop-zone" data-q-start="30" data-dnd-group="headings-27-31" style="margin: 10px 0;border: 2px dashed #999; border-radius: 4px; text-align: center; color: #aaa; font-weight: bold;">30</div>
                    <p><strong>E</strong>&nbsp;&nbsp;If researchers are so convinced about the need for phonics instruction, why does the debate continue? Because the controversy is enmeshed in the philosophical differences between traditional and progressive (or new) approaches, differences that have divided educators for years. The progressive challenge the results of laboratory tests and classroom studies on the basis of a broad philosophical skepticism about the values of such research. They champion student-centred learned and teacher empowerment. Sadly, they fail to realise that these very admirable educational values are equally consistent with the teaching of phonics.</p>
                    
                    <div class="drop-zone" data-q-start="31" data-dnd-group="headings-27-31" style="margin: 10px 0;border: 2px dashed #999; border-radius: 4px; text-align: center; color: #aaa; font-weight: bold;">31</div>
                    <p><strong>F</strong>&nbsp;&nbsp;If schools of education insisted that would-be reading teachers learned something about the vast research in linguistics and psychology that bears on reading, their graduates would be more eager to use phonics and would be prepared to do so effectively. They could allow their pupils to apply the principles of phonics while reading for pleasure. Using whole-language activities to supplement phonics instruction certainly helps to make reading fun and meaningful for children, so no one would want to see such tools discarded. Indeed, recent work has indicated that the combination of literature-based instruction and phonics is more powerful than either method used alone.</p>
                    <p>Teachers need to strike a balance. But in doing so, we urge them to remember that reading must be grounded in a firm understanding of the connections between letters and sounds. Educators who deny this reality are neglecting decades of research. They are also neglecting the needs of their students.</p>
                </div>
            </div>
            <div class="resizer" id="resizer"></div>
            <div class="questions-panel" id="questions-panel">
                <div id="questions-1" class="question-set">
                    <div class="questions-container">
                        <div class="question" data-q-start="1" data-q-end="6">
                            <div class="question-prompt">
                                <p><strong>Questions 1-6</strong><br>The Reading Passage has seven paragraphs <strong>A-G</strong>.</p>
                                <p>Which paragraph contains the following information?</p>
                                <p>Write the correct letter <strong>A-G</strong>, in boxes <strong>1-6</strong> on your answer sheet.</p>
                            </div>
                            <div class="matching-form-container">
                                <div class="matching-form-row">
                                    <label for="q1" class="matching-form-label"><strong>1</strong>&nbsp;&nbsp;&nbsp;A new approach carried out in the UK.</label>
                                    <select class="answer-input active-input" id="q1"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option><option value="G">G</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q2" class="matching-form-label"><strong>2</strong>&nbsp;&nbsp;&nbsp;Reasons why the twisty path and dykes failed</label>
                                    <select class="answer-input" id="q2"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option><option value="G">G</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q3" class="matching-form-label"><strong>3</strong>&nbsp;&nbsp;&nbsp;Illustration of an alternative Plan in LA which seems much unrealistic</label>
                                    <select class="answer-input" id="q3"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option><option value="G">G</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q4" class="matching-form-label"><strong>4</strong>&nbsp;&nbsp;&nbsp;The traditional way of tackling flood</label>
                                    <select class="answer-input" id="q4"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option><option value="G">G</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q5" class="matching-form-label"><strong>5</strong>&nbsp;&nbsp;&nbsp;The effort made in the Netherlands and Germany</label>
                                    <select class="answer-input" id="q5"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option><option value="G">G</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q6" class="matching-form-label"><strong>6</strong>&nbsp;&nbsp;&nbsp;One project on a river benefits three nations</label>
                                    <select class="answer-input" id="q6"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option><option value="G">G</option></select>
                                </div>
                            </div>
                        </div>

                        <div class="question" data-q-start="7" data-q-end="11">
                            <div class="question-prompt">
                                <p><strong>Questions 7-11</strong><br>Complete the following summary of the paragraphs of Reading Passage 1.</p>
                                <p>Using <strong>NO MORE THAN TWO WORDS</strong> from the Reading Passage for each answer.</p>
                                <p>Write your answers in boxes 7-11 on your answer sheet.</p>
                            </div>
                            <div class="summary-text">
                                <p>Flood makes river shorter than it used to be, which means faster speed and more damage to constructions on a flood plain. Not only European river poses such threat but the same things happens to the powerful <input type="text" class="answer-input" id="q7" placeholder="7"> in the US.</p>
                                <p>In Europe, one innovative approach carried out by UK's Environment Agency, for example, a wetland instead of concrete walls in generated not far from the city of <input type="text" class="answer-input" id="q8" placeholder="8"> to protect it from flooding.</p>
                                <p>In 1995, Rhine flooded again and thousands of people left the country of <input type="text" class="answer-input" id="q9" placeholder="9">. A league of engineers suggested that cities should be porous, <input type="text" class="answer-input" id="q10" placeholder="10"> set a good example for others. Another city devastated by heavy storms casually is <input type="text" class="answer-input" id="q11" placeholder="11">, though its government pours billions of dollars each year in order to solve the problem.</p>
                            </div>
                        </div>

                        <div class="question" data-q-start="12" data-q-end="13">
                            <div class="question-prompt">
                                <p><strong>Questions 12-13</strong><br>Choose <strong>TWO</strong> correct letters, write your answers in boxes 12-13 on your answer sheet.</p>
                                <p>What <strong>TWO</strong> benefits will the new approach in the UK and Austria bring to us according to this passage?</p>
                            </div>
                            <div class="multi-choice-options">
                                <div class="multi-choice-option"><label><input type="checkbox" name="q12-13" value="A"> &nbsp;&nbsp;&nbsp;We can prepare before the flood comes</label></div>
                                <div class="multi-choice-option"><label><input type="checkbox" name="q12-13" value="B"> &nbsp;&nbsp;&nbsp;It may stop the flood involving the whole area</label></div>
                                <div class="multi-choice-option"><label><input type="checkbox" name="q12-13" value="C"> &nbsp;&nbsp;&nbsp;Decrease strong rainfalls around the Alps simply by engineering constructions</label></div>
                                <div class="multi-choice-option"><label><input type="checkbox" name="q12-13" value="D"> &nbsp;&nbsp;&nbsp;Reserve water to protect downstream towns</label></div>
                                <div class="multi-choice-option"><label><input type="checkbox" name="q12-13" value="E"> &nbsp;&nbsp;&nbsp;Store tons of water in the downstream area</label></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="questions-2" class="question-set hidden">
                    <div class="questions-container">
                        <div class="question" data-q-start="14" data-q-end="18">
                            <div class="question-prompt">
                                <p><strong>Questions 14-18</strong><br>The Reading Passage has six paragraphs <strong>A-F</strong>.</p>
                                <p>Which paragraph contains the following information?</p>
                                <p>Write the correct letter <strong>A-F</strong>, in boxes 14-18 on your answer sheet.</p>
                            </div>
                            <div class="matching-form-container">
                                <div class="matching-form-row">
                                    <label for="q14" class="matching-form-label"><strong>14</strong>&nbsp;&nbsp;&nbsp;an example of a craftsman's unsuccessful claim to ownership of his work</label>
                                    <select class="answer-input" id="q14"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q15" class="matching-form-label"><strong>15</strong>&nbsp;&nbsp;&nbsp;an example of how trends in the art can change attitudes to an earlier work</label>
                                    <select class="answer-input" id="q15"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q16" class="matching-form-label"><strong>16</strong>&nbsp;&nbsp;&nbsp;the original function of a particular type of art</label>
                                    <select class="answer-input" id="q16"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q17" class="matching-form-label"><strong>17</strong>&nbsp;&nbsp;&nbsp;ways of assessing whether or not an object is an art</label>
                                    <select class="answer-input" id="q17"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option></select>
                                </div>
                                <div class="matching-form-row">
                                    <label for="q18" class="matching-form-label"><strong>18</strong>&nbsp;&nbsp;&nbsp;how artists deal with the less interesting aspects of their work</label>
                                    <select class="answer-input" id="q18"><option value=""></option><option value="A">A</option><option value="B">B</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option></select>
                                </div>
                            </div>
                        </div>
                        <div class="question" data-q-start="19" data-q-end="24">
                            <div class="question-prompt">
                                <p><strong>Questions 19-24</strong><br>Do the following statements agree with the claims of the writer in Reading Passage 2?</p>
                                <p>In boxes 19-24 on your answer sheet, write</p>
                                <ul style="list-style: none; padding-left: 0;">
                                    <li><strong>YES</strong> if the statement is true</li>
                                    <li><strong>NO</strong> if the statement is false</li>
                                    <li><strong>NOT GIVEN</strong> if the information is not given in the passage</li>
                                </ul>
                            </div>
                            <div class="tf-question" data-q-start="19"><div class="tf-question-line"><span class="tf-question-number">19</span><span class="tf-question-text">Nineteenth-century sculptors admired the speed and realism of life-casting.</span></div><div class="tf-options"><label class="tf-option"><input type="radio" name="q19" value="YES"> YES</label><label class="tf-option"><input type="radio" name="q19" value="NO"> NO</label><label class="tf-option"><input type="radio" name="q19" value="NOT GIVEN"> NOT GIVEN</label></div></div>
                            <div class="tf-question" data-q-start="20"><div class="tf-question-line"><span class="tf-question-number">20</span><span class="tf-question-text">Rodin believed the quality of the life-casting would improve if a slower process were used.</span></div><div class="tf-options"><label class="tf-option"><input type="radio" name="q20" value="YES"> YES</label><label class="tf-option"><input type="radio" name="q20" value="NO"> NO</label><label class="tf-option"><input type="radio" name="q20" value="NOT GIVEN"> NOT GIVEN</label></div></div>
                            <div class="tf-question" data-q-start="21"><div class="tf-question-line"><span class="tf-question-number">21</span><span class="tf-question-text">The importance of painting has decreased with the development of colour photography.</span></div><div class="tf-options"><label class="tf-option"><input type="radio" name="q21" value="YES"> YES</label><label class="tf-option"><input type="radio" name="q21" value="NO"> NO</label><label class="tf-option"><input type="radio" name="q21" value="NOT GIVEN"> NOT GIVEN</label></div></div>
                            <div class="tf-question" data-q-start="22"><div class="tf-question-line"><span class="tf-question-number">22</span><span class="tf-question-text">Life-casting requires more skill than sculpture does.</span></div><div class="tf-options"><label class="tf-option"><input type="radio" name="q22" value="YES"> YES</label><label class="tf-option"><input type="radio" name="q22" value="NO"> NO</label><label class="tf-option"><input type="radio" name="q22" value="NOT GIVEN"> NOT GIVEN</label></div></div>
                            <div class="tf-question" data-q-start="23"><div class="tf-question-line"><span class="tf-question-number">23</span><span class="tf-question-text">New art encourages us to look at earlier work in a fresh way.</span></div><div class="tf-options"><label class="tf-option"><input type="radio" name="q23" value="YES"> YES</label><label class="tf-option"><input type="radio" name="q23" value="NO"> NO</label><label class="tf-option"><input type="radio" name="q23" value="NOT GIVEN"> NOT GIVEN</label></div></div>
                            <div class="tf-question" data-q-start="24"><div class="tf-question-line"><span class="tf-question-number">24</span><span class="tf-question-text">The intended meaning of a work of art can get lost over time.</span></div><div class="tf-options"><label class="tf-option"><input type="radio" name="q24" value="YES"> YES</label><label class="tf-option"><input type="radio" name="q24" value="NO"> NO</label><label class="tf-option"><input type="radio" name="q24" value="NOT GIVEN"> NOT GIVEN</label></div></div>
                        </div>
                        <div class="question" data-q-start="25" data-q-end="26">
                            <div class="question-prompt">
                                <p><strong>Questions 25-26</strong><br>Choose the correct letter, <strong>A, B, C or D</strong> .</p>
                                <p>Write the correct letter in boxes 25 and 26 on your answer sheet.</p>
                            </div>
                            <div class="multi-choice-question" data-q-start="25">
                                <p><strong>25</strong>&nbsp;&nbsp;The most noticeable contrast in the cast of the giant's hand is between the</p>
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q25" value="A"> &nbsp;&nbsp;&nbsp;dirt and decoration</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q25" value="B"> &nbsp;&nbsp;&nbsp;size and realism</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q25" value="C"> &nbsp;&nbsp;&nbsp;choice and arrangement</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q25" value="D"> &nbsp;&nbsp;&nbsp;balance and texture</label></div>
                                </div>
                            </div>
                            <div class="multi-choice-question" data-q-start="26">
                                <p><strong>26</strong>&nbsp;&nbsp;According to the writer, the importance of any artistic object lies in</p>
                                <div class="multi-choice-options">
                                    <div class="multi-choice-option"><label><input type="radio" name="q26" value="A"> &nbsp;&nbsp;&nbsp;the artist's intentions</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q26" value="B"> &nbsp;&nbsp;&nbsp;the artist's beliefs</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q26" value="C"> &nbsp;&nbsp;&nbsp;the relevance it has to modern life</label></div>
                                    <div class="multi-choice-option"><label><input type="radio" name="q26" value="D"> &nbsp;&nbsp;&nbsp;the way we respond to it</label></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="questions-3" class="question-set hidden">
                    <div class="questions-container">
                        <div class="question" data-q-start="27" data-q-end="31">
                            <div class="question-prompt">
                                <p><strong>Questions 27-31</strong><br>Reading Passage 3 has six sections, <strong>A-F</strong>.</p>
                                <p>Choose the correct heading for sections <strong>B-F</strong> from the list of headings below and drag it to the gap above each section in the reading passage.</p>
                                <p>Write the correct number, <strong>i-ix</strong>, in boxes 27-31 on your answer sheet.</p>
                            </div>
                            
                            <div class="recommendations-box" data-dnd-group="headings-27-31" style="width: 100%;">
                                <p><strong>List of Headings</strong></p>
                                <div class="drag-item" draggable="true" data-value="i" data-dnd-group="headings-27-31">Disagreement about the reading process</div>
                                <div class="drag-item" draggable="true" data-value="ii" data-dnd-group="headings-27-31">The roots of the debate</div>
                                <div class="drag-item" draggable="true" data-value="iii" data-dnd-group="headings-27-31">A combined approach</div>
                                <div class="drag-item" draggable="true" data-value="iv" data-dnd-group="headings-27-31">Methods of teaching reading</div>
                                <div class="drag-item" draggable="true" data-value="v" data-dnd-group="headings-27-31">A controversial approach</div>
                                <div class="drag-item" draggable="true" data-value="vi" data-dnd-group="headings-27-31">Inconclusive research</div>
                                <div class="drag-item" draggable="true" data-value="vii" data-dnd-group="headings-27-31">Research with learners</div>
                                <div class="drag-item" draggable="true" data-value="viii" data-dnd-group="headings-27-31">Allowing teachers more control</div>
                            </div>

                        </div>
                        <div class="question" data-q-start="32" data-q-end="36">
                            <div class="question-prompt">
                                <p><strong>Questions 32-36</strong><br>Do the following statements agree with the information given in Reading Passage 3?</p>
                                <p>In boxes 32-36 on your answer sheet, write</p>
                                <ul style="list-style: none; padding-left: 0;">
                                    <li><strong>TRUE</strong> if the statement agrees with the information</li>
                                    <li><strong>FALSE</strong> if the statement contradicts the information</li>
                                    <li><strong>NOT GIVEN</strong> if there is no information on this</li>
                                </ul>
                            </div>
                            <div class="tf-question" data-q-start="32"><div class="tf-question-line"><span class="tf-question-number">32</span><span class="tf-question-text">The whole-language approach relates letters to sounds.</span></div><div class="tf-options"><label class="tf-option"><input type="radio" name="q32" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q32" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q32" value="NOT GIVEN"> NOT GIVEN</label></div></div>
                            <div class="tf-question" data-q-start="33"><div class="tf-question-line"><span class="tf-question-number">33</span><span class="tf-question-text">Many educators believe the whole-language approach to be the most interesting way to teach children to read.</span></div><div class="tf-options"><label class="tf-option"><input type="radio" name="q33" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q33" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q33" value="NOT GIVEN"> NOT GIVEN</label></div></div>
                            <div class="tf-question" data-q-start="34"><div class="tf-question-line"><span class="tf-question-number">34</span><span class="tf-question-text">Research supports the theory that we read without linking words to sounds.</span></div><div class="tf-options"><label class="tf-option"><input type="radio" name="q34" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q34" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q34" value="NOT GIVEN"> NOT GIVEN</label></div></div>
                            <div class="tf-question" data-q-start="35"><div class="tf-question-line"><span class="tf-question-number">35</span><span class="tf-question-text">Research has shown that the whole-word approach is less effective than the whole-language approach.</span></div><div class="tf-options"><label class="tf-option"><input type="radio" name="q35" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q35" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q35" value="NOT GIVEN"> NOT GIVEN</label></div></div>
                            <div class="tf-question" data-q-start="36"><div class="tf-question-line"><span class="tf-question-number">36</span><span class="tf-question-text">Research has shown that phonics is more successful than both the whole-word and whole-language approaches.</span></div><div class="tf-options"><label class="tf-option"><input type="radio" name="q36" value="TRUE"> TRUE</label><label class="tf-option"><input type="radio" name="q36" value="FALSE"> FALSE</label><label class="tf-option"><input type="radio" name="q36" value="NOT GIVEN"> NOT GIVEN</label></div></div>
                        </div>
                        <div class="question" data-q-start="37" data-q-end="40">
                            <div class="question-prompt">
                                <p><strong>Questions 37-40</strong><br>Complete the summary of sections E and F by dragging the correct words from the list below.</p>
                                <p>Drag the correct option to each gap in the summary.</p>
                            </div>
                            <div class="drag-drop-container">
                                <div class="summary-completion-container" style="flex: 2;">
                                    <div class="summary-text">
                                        <p>
                                            In the teaching community, <span class="summary-drop-zone" data-q-start="37" data-dnd-group="summary-37-40">37</span> question the usefulness of research into methods of teaching reading. These critics believe that <span class="summary-drop-zone" data-q-start="38" data-dnd-group="summary-37-40">38</span> is incompatible with student-centred learning. In the future, teachers need to be aware of <span class="summary-drop-zone" data-q-start="39" data-dnd-group="summary-37-40">39</span> so that they understand the importance of phonics. They should not, however, ignore the ideas of <span class="summary-drop-zone" data-q-start="40" data-dnd-group="summary-37-40">40</span> which make reading enjoyable for learners.
                                        </p>
                                    </div>
                                </div>
                                <div class="recommendations-box" data-dnd-group="summary-37-40" style="flex: 1;">
                                    <p><strong>List of Options</strong></p>
                                    <div class="drag-item" draggable="true" data-value="A" data-dnd-group="summary-37-40">the phonics method</div>
                                    <div class="drag-item" draggable="true" data-value="B" data-dnd-group="summary-37-40">the whole-word method</div>
                                    <div class="drag-item" draggable="true" data-value="C" data-dnd-group="summary-37-40">the whole-language method</div>
                                    <div class="drag-item" draggable="true" data-value="D" data-dnd-group="summary-37-40">traditionalists</div>
                                    <div class="drag-item" draggable="true" data-value="E" data-dnd-group="summary-37-40">progressives</div>
                                    <div class="drag-item" draggable="true" data-value="F" data-dnd-group="summary-37-40">linguistics</div>
                                    <div class="drag-item" draggable="true" data-value="G" data-dnd-group="summary-37-40">research studies</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation Arrows -->
    <div class="nav-arrows">
        <button class="nav-arrow" onclick="previousQuestion()" id="prevBtn">‹</button>
        <button class="nav-arrow" onclick="nextQuestion()" id="nextBtn">›</button>
    </div>

    <!-- Bottom Navigation -->
    <nav class="nav-row perScorableItem" aria-label="Questions">
        <div class="footer__questionWrapper___1tZ46 multiple selected" role="tablist" onclick="switchToPart(1)" style="cursor: pointer;">
            <button role="tab" class="footer__questionNo___3WNct">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">1</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 13</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(1); event.stopPropagation();"><span class="sr-only">Question 1</span><span aria-hidden="true">1</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(2); event.stopPropagation();"><span class="sr-only">Question 2</span><span aria-hidden="true">2</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(3); event.stopPropagation();"><span class="sr-only">Question 3</span><span aria-hidden="true">3</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(4); event.stopPropagation();"><span class="sr-only">Question 4</span><span aria-hidden="true">4</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(5); event.stopPropagation();"><span class="sr-only">Question 5</span><span aria-hidden="true">5</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(6); event.stopPropagation();"><span class="sr-only">Question 6</span><span aria-hidden="true">6</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(7); event.stopPropagation();"><span class="sr-only">Question 7</span><span aria-hidden="true">7</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(8); event.stopPropagation();"><span class="sr-only">Question 8</span><span aria-hidden="true">8</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(9); event.stopPropagation();"><span class="sr-only">Question 9</span><span aria-hidden="true">9</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(10); event.stopPropagation();"><span class="sr-only">Question 10</span><span aria-hidden="true">10</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(11); event.stopPropagation();"><span class="sr-only">Question 11</span><span aria-hidden="true">11</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(12); event.stopPropagation();"><span class="sr-only">Question 12</span><span aria-hidden="true">12</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(13); event.stopPropagation();"><span class="sr-only">Question 13</span><span aria-hidden="true">13</span></button>
            </div>
        </div>
        
        <div class="footer__questionWrapper___1tZ46 multiple" role="tablist" onclick="switchToPart(2)" style="cursor: pointer;">
            <button role="tab" class="footer__questionNo___3WNct">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">2</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 13</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(14); event.stopPropagation();"><span class="sr-only">Question 14</span><span aria-hidden="true">14</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(15); event.stopPropagation();"><span class="sr-only">Question 15</span><span aria-hidden="true">15</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(16); event.stopPropagation();"><span class="sr-only">Question 16</span><span aria-hidden="true">16</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(17); event.stopPropagation();"><span class="sr-only">Question 17</span><span aria-hidden="true">17</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(18); event.stopPropagation();"><span class="sr-only">Question 18</span><span aria-hidden="true">18</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(19); event.stopPropagation();"><span class="sr-only">Question 19</span><span aria-hidden="true">19</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(20); event.stopPropagation();"><span class="sr-only">Question 20</span><span aria-hidden="true">20</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(21); event.stopPropagation();"><span class="sr-only">Question 21</span><span aria-hidden="true">21</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(22); event.stopPropagation();"><span class="sr-only">Question 22</span><span aria-hidden="true">22</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(23); event.stopPropagation();"><span class="sr-only">Question 23</span><span aria-hidden="true">23</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(24); event.stopPropagation();"><span class="sr-only">Question 24</span><span aria-hidden="true">24</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(25); event.stopPropagation();"><span class="sr-only">Question 25</span><span aria-hidden="true">25</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(26); event.stopPropagation();"><span class="sr-only">Question 26</span><span aria-hidden="true">26</span></button>
            </div>
        </div>
        
        <div class="footer__questionWrapper___1tZ46 multiple" role="tablist" onclick="switchToPart(3)" style="cursor: pointer;">
            <button role="tab" class="footer__questionNo___3WNct">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">3</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 14</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(27); event.stopPropagation();"><span class="sr-only">Question 27</span><span aria-hidden="true">27</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(28); event.stopPropagation();"><span class="sr-only">Question 28</span><span aria-hidden="true">28</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(29); event.stopPropagation();"><span class="sr-only">Question 29</span><span aria-hidden="true">29</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(30); event.stopPropagation();"><span class="sr-only">Question 30</span><span aria-hidden="true">30</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(31); event.stopPropagation();"><span class="sr-only">Question 31</span><span aria-hidden="true">31</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(32); event.stopPropagation();"><span class="sr-only">Question 32</span><span aria-hidden="true">32</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(33); event.stopPropagation();"><span class="sr-only">Question 33</span><span aria-hidden="true">33</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(34); event.stopPropagation();"><span class="sr-only">Question 34</span><span aria-hidden="true">34</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(35); event.stopPropagation();"><span class="sr-only">Question 35</span><span aria-hidden="true">35</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(36); event.stopPropagation();"><span class="sr-only">Question 36</span><span aria-hidden="true">36</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(37); event.stopPropagation();"><span class="sr-only">Question 37</span><span aria-hidden="true">37</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(38); event.stopPropagation();"><span class="sr-only">Question 38</span><span aria-hidden="true">38</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(39); event.stopPropagation();"><span class="sr-only">Question 39</span><span aria-hidden="true">39</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(40); event.stopPropagation();"><span class="sr-only">Question 40</span><span aria-hidden="true">40</span></button>
            </div>
        </div>
        

    </nav>

    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu">
        <div id="menu-highlight" class="context-menu-item" onclick="highlightText()">
            Highlight
        </div>
        <div id="menu-note" class="context-menu-item" onclick="addNote()">
            Note
        </div>
        <div id="menu-clear" class="context-menu-item" onclick="clearHighlight()">
            Clear
        </div>
        <div id="menu-clear-all" class="context-menu-item" onclick="clearAllHighlights()">
            Clear All
        </div>
    </div>

    <div id="results-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="modal-close-btn" onclick="closeResultsModal()">×</button>
            <h2>Results</h2>
            <div class="results-summary">
                <p>Score: <span id="results-score"></span> / 40</p>
                <p>IELTS Band: <span id="results-band"></span></p>
            </div>
            <div id="results-details" class="results-details-container">
                <!-- Results for each question will be injected here -->
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- STATE VARIABLES ---
        let currentPassage = 1;
        let currentQuestion = 1;
        let selectedRange = null;
        let timeInSeconds = 3600;
        let timerInterval;
        let draggedItem = null;
        let activeQuestionElement = null;
        let selectedDragItem = null;

        // --- DOM ELEMENTS ---
        const timerDisplay = document.querySelector('.timer-display');
        const timerToggleButton = document.getElementById('timer-toggle-btn');
        const timerResetButton = document.getElementById('timer-reset-btn');
        const deliverButton = document.getElementById('deliver-button');
        const resizer = document.getElementById('resizer');
        const passagePanel = document.getElementById('passage-panel');
        const questionsPanel = document.getElementById('questions-panel');
        const contextMenu = document.getElementById('contextMenu');

        // --- ICON SVGs ---
        const playIcon = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M8 5v14l11-7L8 5z"/></svg>';
        const pauseIcon = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>';

        // --- ANSWERS ---
        const correctAnswers = {
            '1': 'D', '2': 'B', '3': 'G', '4': 'A', '5': 'F', '6': 'E', '7': 'Mississippi',
            '8': 'London', '9': 'Netherlands', '10': 'Berlin', '11': 'Los Angeles',
            '12': ['B', 'D'], '13': ['B', 'D'], // Questions 12-13 are multi-select, both B and D are correct
            '14': 'C', '15': 'E', '16': 'B', '17': 'F', '18': 'D', '19': 'NO',
            '20': 'NOT GIVEN', '21': 'NO', '22': 'NOT GIVEN', '23': 'YES', '24': 'YES', '25': 'B', '26': 'D',
            '27': 'iv', '28': 'i', '29': 'vii', '30': 'ii', '31': 'iii',
            '32': 'FALSE', '33': 'TRUE', '34': 'FALSE', '35': 'NOT GIVEN', '36': 'TRUE',
            '37': 'E', '38': 'A', '39': 'G', '40': 'C'
        };

        // --- INITIALIZATION ---
        function initialize() {
            startTimer();
            initializeDragAndDrop();
            setupCheckboxLimits();
            setupExampleHeading();
            switchToPart(1); // Also calls goToQuestion(1) and updateNavigation
            
            document.body.addEventListener('input', updateAllIndicators);
            document.body.addEventListener('change', updateAllIndicators);
            deliverButton.addEventListener('click', checkAnswers);
            timerToggleButton.addEventListener('click', toggleTimer);
            timerResetButton.addEventListener('click', resetTimer);

            // Add click listeners to question containers for navigation
            document.querySelectorAll('[data-q-start]').forEach(el => {
                el.addEventListener('click', (e) => {
                    // Don't navigate if clicking on form elements or table cells
                    if (e.target.matches('input, select, textarea, label, .tf-option, .multi-choice-option, td, th')) {
                        return;
                    }
                    
                    // Don't navigate if clicking inside a tf-question (individual T/F/NG questions)
                    if (e.target.closest('.tf-question')) {
                        return;
                    }
                    
                    const qNum = parseInt(el.dataset.qStart, 10);
                    if (currentQuestion !== qNum) {
                        goToQuestion(qNum);
                    }
                });
            });

            // Prevent radio button clicks from bubbling up to parent containers
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('click', (e) => {
                    e.stopPropagation();
                    // Update indicators when radio button is clicked
                    setTimeout(() => updateAllIndicators(), 10);
                });
            });

            // Add click handlers for table cells to select radio buttons
            document.querySelectorAll('table td').forEach(cell => {
                const radio = cell.querySelector('input[type="radio"]');
                if (radio) {
                    cell.addEventListener('click', (e) => {
                        if (e.target !== radio) {
                            radio.checked = true;
                            // Trigger change event
                            radio.dispatchEvent(new Event('change', { bubbles: true }));
                            setTimeout(() => updateAllIndicators(), 10);
                        }
                    });
                    // Add hover effect
                    cell.style.cursor = 'pointer';
                }
            });

            resizer.addEventListener('mousedown', initResize, false);
            initializeContextMenu();
        }

        // --- CORE TEST LOGIC ---

        function checkAnswers() {
            // Disable all inputs to prevent changes
            const allInputs = document.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                input.disabled = true;
                input.style.pointerEvents = 'none';
            });

            // Disable all drag and drop functionality
            document.querySelectorAll('.drag-item').forEach(item => {
                item.setAttribute('draggable', 'false');
                item.style.cursor = 'not-allowed';
                item.style.pointerEvents = 'none';
            });

            document.querySelectorAll('.drop-zone, .summary-drop-zone').forEach(zone => {
                zone.style.pointerEvents = 'none';
                zone.classList.add('disabled');
            });

            // Disable all clickable elements
            document.querySelectorAll('label, .tf-option, .multi-choice-option').forEach(element => {
                element.style.pointerEvents = 'none';
                element.style.cursor = 'not-allowed';
            });

            // Change submit button to show results again
            deliverButton.innerHTML = `<span>My result</span>`;
            deliverButton.removeEventListener('click', checkAnswers);
            deliverButton.addEventListener('click', showResultsModal);
            
            clearInterval(timerInterval);
            let score = 0;
            const totalQuestions = 40;
            const resultsDetailsContainer = document.getElementById('results-details');
            resultsDetailsContainer.innerHTML = ''; // Clear previous results

            // Clear previous results
            document.querySelectorAll('.correct, .incorrect, .correct-answer-highlight').forEach(el => {
                el.classList.remove('correct', 'incorrect', 'correct-answer-highlight');
            });
            document.querySelectorAll('.correct-answer-display').forEach(el => el.remove());

            for (let i = 1; i <= totalQuestions; i++) {
                const questionKey = String(i);
                const correctAnswer = correctAnswers[questionKey];
                let userAnswer = '';
                let isCorrect = false;
                
                let userAnswerDisplay = 'Not Answered';
                const correctAnswerText = Array.isArray(correctAnswer) ? correctAnswer.join(' / ') : correctAnswer;

                const textInput = document.getElementById(`q${i}`);
                const radioGroup = document.querySelectorAll(`input[name="q${i}"][type="radio"]`);
                
                // Handle drag and drop questions (27-31, and 37-40)
                if ((i >= 27 && i <= 31) || (i >= 37 && i <= 40)) {
                    let dropZone;
                    if (i >= 37 && i <= 40) {
                        // For summary questions, use summary-drop-zone
                        dropZone = document.querySelector(`.summary-drop-zone[data-q-start="${i}"]`);
                    } else {
                        // For other drag-drop questions, use regular drop-zone
                        dropZone = document.querySelector(`.drop-zone[data-q-start="${i}"]`);
                    }
                    const droppedItem = dropZone ? dropZone.querySelector('.drag-item') : null;
                    
                    if (droppedItem) {
                        userAnswer = droppedItem.dataset.value;
                        userAnswerDisplay = userAnswer;
                        isCorrect = userAnswer === correctAnswer;
                        
                        // Mark the drop zone as correct or incorrect
                        dropZone.classList.add(isCorrect ? 'correct' : 'incorrect');
                        
                        if (isCorrect) {
                            score++;
                        } else {
                            // Highlight the correct answer in the options box (only drag items, not the title)
                            let correctDragItem;
                            if (i >= 37 && i <= 40) {
                                correctDragItem = document.querySelector(`.recommendations-box[data-dnd-group="summary-37-40"] .drag-item[data-value="${correctAnswer}"][draggable="true"]`);
                            } else {
                                correctDragItem = document.querySelector(`.recommendations-box .drag-item[data-value="${correctAnswer}"][draggable="true"]`);
                            }
                            if (correctDragItem) {
                                correctDragItem.classList.add('correct-answer-highlight');
                            }
                        }
                    } else {
                        // No answer provided - mark as incorrect
                        if (dropZone) {
                            dropZone.classList.add('incorrect');
                        }
                        // Still highlight the correct answer (only drag items, not the title)
                        let correctDragItem;
                        if (i >= 37 && i <= 40) {
                            correctDragItem = document.querySelector(`.recommendations-box[data-dnd-group="summary-37-40"] .drag-item[data-value="${correctAnswer}"][draggable="true"]`);
                        } else {
                            correctDragItem = document.querySelector(`.recommendations-box .drag-item[data-value="${correctAnswer}"][draggable="true"]`);
                        }
                        if (correctDragItem) {
                            correctDragItem.classList.add('correct-answer-highlight');
                        }
                    }
                }
                // Handle checkbox questions (12-13)
                else if (i >= 12 && i <= 13) {
                    const checkboxName = 'q12-13';
                    const expectedAnswers = ['B', 'D']; // Both B and D should be selected for questions 12-13
                    
                    const checkboxes = document.querySelectorAll(`input[name="${checkboxName}"]:checked`);
                    const selectedValues = Array.from(checkboxes).map(cb => cb.value);
                    userAnswerDisplay = selectedValues.join(', ') || 'Not Answered';
                    
                    if (i === 12) { // Only process scoring for q12, which covers 12-13
                        isCorrect = selectedValues.includes('B') && selectedValues.includes('D') && selectedValues.length === 2;
                        if (isCorrect) score++;
                    } else if (i === 13) {
                        // For question 13, check if both B and D are selected (same as 12)
                        isCorrect = selectedValues.includes('B') && selectedValues.includes('D') && selectedValues.length === 2;
                        if (isCorrect) score++;
                    }
                    
                    // Mark correct/incorrect options for all checkboxes in the group
                    const allCheckboxes = document.querySelectorAll(`input[name="${checkboxName}"]`);
                    allCheckboxes.forEach(cb => {
                        const option = cb.closest('.multi-choice-option');
                        if (option) {
                            option.classList.remove('correct', 'incorrect', 'correct-answer-highlight'); // Clear previous states
                            if (cb.checked) {
                                if (expectedAnswers.includes(cb.value)) {
                                    option.classList.add('correct');
                                } else {
                                    option.classList.add('incorrect');
                                }
                            }
                        }
                    });
                    
                    // Highlight correct answers if not selected for all checkboxes in the group
                    expectedAnswers.forEach(expectedValue => {
                        const correctCheckbox = document.querySelector(`input[name="${checkboxName}"][value="${expectedValue}"]`);
                        if (correctCheckbox && !correctCheckbox.checked) {
                            const correctOption = correctCheckbox.closest('.multi-choice-option');
                            if (correctOption) {
                                correctOption.classList.add('correct-answer-highlight');
                            }
                        }
                    });
                }
                // Handle Text and Select Inputs
                else if (textInput && (textInput.tagName === 'INPUT' || textInput.tagName === 'SELECT')) {
                    const element = textInput.closest('.matching-form-row') || textInput;
                    userAnswer = textInput.value.trim();
                    userAnswerDisplay = userAnswer || 'Not Answered';

                    if (textInput.tagName === 'SELECT') {
                        isCorrect = userAnswer === correctAnswer;
                    } else {
                        isCorrect = Array.isArray(correctAnswer) ?
                            correctAnswer.some(ans => userAnswer.toLowerCase() === ans.toLowerCase()) :
                            userAnswer.toLowerCase() === correctAnswer.toLowerCase();
                    }
                    
                    if (isCorrect) {
                        score++;
                        textInput.classList.add('correct');
                        if (element !== textInput) {
                            element.classList.add('correct');
                        }
                    } else {
                        textInput.classList.add('incorrect');
                        if (element !== textInput) {
                            element.classList.add('incorrect');
                        }
                        // Add correct answer display next to the input
                        const correctAnswerSpan = document.createElement('span');
                        correctAnswerSpan.className = 'correct-answer-display';
                        correctAnswerSpan.innerHTML = `&nbsp;➜&nbsp;<span class="correct-answer-highlight">${correctAnswerText}</span>`;
                        textInput.parentNode.insertBefore(correctAnswerSpan, textInput.nextSibling);
                    }
                }
                // Handle Radio Button Inputs (T/F, MCQs)
                else if (radioGroup.length > 0) {
                    const questionContainer = radioGroup[0].closest('.tf-question') || radioGroup[0].closest('.multi-choice-question');
                    const checkedRadio = document.querySelector(`input[name="q${i}"]:checked`);

                    if (checkedRadio) {
                        userAnswer = checkedRadio.value;
                        userAnswerDisplay = userAnswer;
                        isCorrect = userAnswer === correctAnswer;

                        const userLabel = checkedRadio.closest('.tf-option, .multi-choice-option');
                        if (userLabel) {
                            userLabel.classList.add(isCorrect ? 'correct' : 'incorrect');
                        }
                    }

                    if (isCorrect) {
                        score++;
                        if (questionContainer) {
                            questionContainer.classList.add('correct');
                        }
                    } else {
                        if (questionContainer) {
                            questionContainer.classList.add('incorrect');
                            const correctOptionEl = questionContainer.querySelector(`input[value="${correctAnswerText}"]`);
                            if (correctOptionEl) {
                                const correctLabel = correctOptionEl.closest('.tf-option, .multi-choice-option');
                                if (correctLabel) {
                                    correctLabel.classList.add('correct-answer-highlight');
                                }
                            }
                        }
                    }
                }
                 
                // For showing results in the modal
                 const resultRow = `
                    <div class="result-row ${isCorrect ? '' : 'incorrect'}">
                        <span class="q-num">${i}</span>
                        <span class="user-ans">${userAnswerDisplay}</span>
                        <span class="correct-ans">${correctAnswerText}</span>
                    </div>`;
                resultsDetailsContainer.innerHTML += resultRow;
                
                // Update nav button color
                const navButton = document.querySelector(`.subQuestion[onclick*="goToQuestion(${i})"]`);
                if (navButton) {
                    navButton.classList.remove('answered', 'active');
                    navButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
            }

            document.getElementById('results-score').textContent = score;
            document.getElementById('results-band').textContent = calculateBandScore(score);
            document.getElementById('results-modal').classList.remove('hidden');
        }

        function calculateBandScore(score) {
            if (score >= 39) return '9.0';
            const mapping = {
                40: 9.0, 39: 9.0, 38: 8.5, 37: 8.5, 36: 8.0, 35: 8.0, 34: 7.5,
                33: 7.5, 32: 7.0, 31: 7.0, 30: 7.0, 29: 6.5, 28: 6.5, 27: 6.5,
                26: 6.0, 25: 6.0, 24: 6.0, 23: 5.5, 22: 5.5, 21: 5.5, 20: 5.5,
                19: 5.0, 18: 5.0, 17: 5.0, 16: 5.0, 15: 5.0, 14: 4.5, 13: 4.5,
                12: 4.0, 11: 4.0, 10: 4.0, 9: 3.5, 8: 3.5, 7: 3.0, 6: 3.0,
                5: 2.5, 4: 2.5
            };
            if (score <= 0) return 0.0;
            if (score === 1) return 1.0;
            if (score <= 3) return 2.0;
            if (score <= 5) return 2.5;
            return mapping[score] || 0.0;
        }

        function getUserAnswer(qNum) {
            const textInput = document.getElementById(`q${qNum}`);
            const radioInput = document.querySelector(`input[name="q${qNum}"]:checked`);
            
            // Handle drag and drop questions (27-31, and 37-40)
            if ((qNum >= 27 && qNum <= 31) || (qNum >= 37 && qNum <= 40)) {
                let dropZone;
                if (qNum >= 37 && qNum <= 40) {
                    // For summary questions, use summary-drop-zone
                    dropZone = document.querySelector(`.summary-drop-zone[data-q-start="${qNum}"]`);
                } else {
                    // For other drag-drop questions, use regular drop-zone
                    dropZone = document.querySelector(`.drop-zone[data-q-start="${qNum}"]`);
                }
                if (dropZone) {
                    const droppedItem = dropZone.querySelector('.drag-item');
                    return {
                        value: droppedItem ? droppedItem.dataset.value : null,
                        text: droppedItem ? droppedItem.textContent.trim() : 'Not Answered'
                    };
                }
            }

            if (textInput) { // Handles <input type="text"> and <select>
                return { value: textInput.value, text: textInput.value || 'Not Answered' };
            }
            if (radioInput) {
                return { value: radioInput.value, text: radioInput.value };
            }
            
            return { value: null, text: 'Not Answered' };
        }

        function displayCorrectAnswer(qNum, correctAnswer) {
            // Handle multi-choice group questions (e.g., 38-40)
            if (qNum >= 38 && qNum <= 40) {
                 const correctAnswersArr = Array.isArray(correctAnswer) ? correctAnswer : [correctAnswer];
                 correctAnswersArr.forEach(ansValue => {
                    const correctInput = document.querySelector(`input[name="q38-40"][value="${ansValue}"]`);
                    correctInput?.closest('.multi-choice-option')?.classList.add('correct-answer-highlight');
                 });
                 return;
            }

            // Handle radio button questions by highlighting the correct label
            const correctRadioInput = document.querySelector(`input[name="q${qNum}"][value="${correctAnswer}"]`);
            if (correctRadioInput) {
                const parentOption = correctRadioInput.closest('.tf-option, .multi-choice-option');
                if (parentOption) {
                    parentOption.classList.add('correct-answer-highlight');
                    return;
                }
            }

            // Handle text inputs, select dropdowns, and others by showing the answer next to them
            const inputEl = document.getElementById(`q${qNum}`);
            if (inputEl) {
                const displaySpan = document.createElement('span');
                displaySpan.className = 'correct-answer-display';
                displaySpan.textContent = ` ✓ ${correctAnswer}`;
                inputEl.insertAdjacentElement('afterend', displaySpan);
                return; // Done
            }
            
            // Fallback for questions identified by a container (e.g., some T/F/NG questions)
            const element = findQuestionElement(qNum);
            if (element) {
                const displaySpan = document.createElement('span');
                displaySpan.className = 'correct-answer-display';
                displaySpan.textContent = ` ✓ ${correctAnswer}`;
                const itemContainer = element.querySelector('.tf-question-text');
                if (itemContainer) {
                     itemContainer.appendChild(displaySpan);
                } else {
                     element.appendChild(displaySpan);
                }
            }
        }
        
        function findQuestionElement(qNum) {
             return document.querySelector(`[data-q-start="${qNum}"]`);
        }

        function addResultToModal(qNum, userAnswer, correctAnswer, isCorrect) {
            const resultsDetails = document.getElementById('results-details');
            const row = document.createElement('div');
            row.className = 'result-row';
            if (!isCorrect) {
                row.classList.add('incorrect');
            }
            row.innerHTML = `
                <span class="q-num">${qNum}</span>
                <span class="user-ans">${userAnswer}</span>
                <span class="correct-ans">${correctAnswer}</span>
            `;
            resultsDetails.appendChild(row);
        }

        function showResultsModal() {
            document.getElementById('results-modal').classList.remove('hidden');
        }

        window.closeResultsModal = function() {
            document.getElementById('results-modal').classList.add('hidden');
        }
        

        function checkValue(userValue, correctValue) {
            if (userValue === null || userValue === undefined) return false;
            const formattedUserValue = userValue.trim().toLowerCase();
            if (Array.isArray(correctValue)) {
                return correctValue.map(v => v.toLowerCase()).includes(formattedUserValue);
            } else {
                return formattedUserValue === String(correctValue).toLowerCase();
            }
        }

        function markQuestion(qNum, isCorrect) {
            const subQuestionBtn = document.querySelector(`.subQuestion[onclick="goToQuestion(${qNum})"]`);
            subQuestionBtn?.classList.add(isCorrect ? 'correct' : 'incorrect');

            const elementsToMark = [
                document.querySelector(`.tf-question[data-q-start="${qNum}"]`),
                document.querySelector(`.multi-choice-question[data-q-start="${qNum}"]`),
                document.querySelector(`.matching-question-item[data-q-start="${qNum}"]`),
                document.querySelector(`.drop-zone[data-q-start="${qNum}"]`),
                document.getElementById(`q${qNum}`),
                document.querySelector(`input[name="q${qNum}"]:checked`)?.closest('.tf-option'),
                document.querySelector(`input[name="q${qNum}"]:checked`)?.closest('.multi-choice-option')
            ];
            
            elementsToMark.forEach(el => {
                if (el) el.classList.add(isCorrect ? 'correct' : 'incorrect');
            });

             if (qNum === 14 || qNum === 15) {
                const multiChoiceContainer = document.querySelector('.multi-choice-question[data-q-start="14"]');
                if (multiChoiceContainer) multiChoiceContainer.classList.add(isCorrect ? 'correct' : 'incorrect');
             } else if (qNum >= 1 && qNum <= 5) {
                const pMatchInput = document.getElementById(`q${qNum}`);
                if (pMatchInput) pMatchInput.classList.add(isCorrect ? 'correct' : 'incorrect');
             } else if (qNum >= 38 && qNum <= 40) {
                // For this group, individual options are marked, not the container.
             }
        }

        function switchToPart(partNumber, targetQuestion = null) {
            currentPassage = partNumber;

            // Hide all passages and questions
            document.querySelectorAll('.reading-passage, .question-set, .part-header').forEach(el => {
                el.classList.add('hidden');
            });

            // Show the correct passage, questions, and header
            document.getElementById(`passage-text-${partNumber}`).classList.remove('hidden');
            document.getElementById(`questions-${partNumber}`).classList.remove('hidden');
            document.getElementById(`part-header-${partNumber}`).classList.remove('hidden');

            // Update bottom navigation 'selected' state
            document.querySelectorAll('.footer__questionWrapper___1tZ46').forEach((wrapper, index) => {
                wrapper.classList.toggle('selected', (index + 1) === partNumber);
            });

            // Go to the target question if specified, otherwise go to the first question of the part
            if (targetQuestion) {
                // Don't call goToQuestion recursively, just update the UI directly
                currentQuestion = targetQuestion;
                updateNavigation();
                
                if (activeQuestionElement) {
                    activeQuestionElement.classList.remove('active-question', 'active-input');
                }

                let targetEl = document.querySelector(`[data-q-start="${targetQuestion}"]`);

                if (targetEl) {
                    activeQuestionElement = targetEl;
                     if (targetEl.matches('input[type="text"]') || targetEl.matches('select')) {
                         targetEl.classList.add('active-input');
                     } else {
                         targetEl.classList.add('active-question');
                     }
                     scrollIntoViewIfNeeded(targetEl);
                } else {
                     const pMatch = document.querySelector(`.paragraph-matching-question select[id="q${targetQuestion}"]`);
                     if(pMatch) {
                        activeQuestionElement = pMatch;
                        pMatch.classList.add('active-input');
                        scrollIntoViewIfNeeded(pMatch);
                     }
                }
            } else {
                const firstQuestionOfPart = {1: 1, 2: 14, 3: 27}[partNumber];
                goToQuestion(firstQuestionOfPart);
            }
        }
        
        function goToQuestion(questionNumber) {
            currentQuestion = questionNumber;

            let passageNumber = 1;
            if (questionNumber >= 14 && questionNumber <= 26) passageNumber = 2;
            else if (questionNumber >= 27) passageNumber = 3;
            
            if (currentPassage !== passageNumber) {
                switchToPart(passageNumber, questionNumber);
                return;
            }

            if (activeQuestionElement) {
                activeQuestionElement.classList.remove('active-question', 'active-input');
            }

            // First try to find a direct input element with the question ID
            let targetEl = document.getElementById(`q${questionNumber}`);
            
            if (targetEl) {
                activeQuestionElement = targetEl;
                targetEl.classList.add('active-input');
                scrollIntoViewIfNeeded(targetEl);
            } else {
                // Look for the most specific question element first (individual questions)
                // Try to find elements where data-q-start equals data-q-end (individual questions)
                targetEl = document.querySelector(`[data-q-start="${questionNumber}"][data-q-end="${questionNumber}"]`);
                
                if (targetEl) {
                    activeQuestionElement = targetEl;
                    if (targetEl.matches('input[type="text"]') || targetEl.matches('select')) {
                        targetEl.classList.add('active-input');
                    } else {
                        targetEl.classList.add('active-question');
                    }
                    scrollIntoViewIfNeeded(targetEl);
                } else {
                    // If no specific individual question found, look for question containers that contain this question number
                    const containers = document.querySelectorAll('[data-q-start][data-q-end]');
                    for (const container of containers) {
                        const start = parseInt(container.dataset.qStart);
                        const end = parseInt(container.dataset.qEnd);
                        if (questionNumber >= start && questionNumber <= end) {
                            activeQuestionElement = container;
                            container.classList.add('active-question');
                            scrollIntoViewIfNeeded(container);
                            break;
                        }
                    }
                }
            }

            updateNavigation();
        }
        
        // --- UI & NAVIGATION ---

        function updateNavigation() {
            const navButtons = document.querySelectorAll('.subQuestion');
            navButtons.forEach(btn => btn.classList.remove('active'));
            const activeNav = document.querySelector(`.subQuestion[onclick="goToQuestion(${currentQuestion})"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }

            const inputs = document.querySelectorAll('.answer-input, .drop-zone.filled, .summary-drop-zone.filled');
            inputs.forEach(input => input.classList.remove('active-input'));
            
            const activeInput = document.getElementById(`q${currentQuestion}`);
            if (activeInput) {
                activeInput.classList.add('active-input');
                if (typeof activeInput.focus === 'function') {
                    activeInput.focus();
                }
            } else {
                const activeQuestionBlock = document.querySelector(`[data-q-start="${currentQuestion}"]`);
                if (activeQuestionBlock) {
                    const firstInput = activeQuestionBlock.querySelector('input, select');
                    if(firstInput) {
                        firstInput.classList.add('active-input');
                         if (typeof firstInput.focus === 'function') {
                            firstInput.focus();
                        }
                    }
                }
            }
        }
        
        function selectDragItem(item) {
            if (selectedDragItem) {
                selectedDragItem.classList.remove('selected');
            }
            selectedDragItem = item;
            if (selectedDragItem) {
                selectedDragItem.classList.add('selected');
            }
        }
        
        window.nextQuestion = () => currentQuestion < 40 && goToQuestion(currentQuestion + 1);
        window.previousQuestion = () => currentQuestion > 1 && goToQuestion(currentQuestion - 1);

        function updateAllIndicators() {
            updateAttemptedCount(1, 1, 13);
            updateAttemptedCount(2, 14, 26);
            updateAttemptedCount(3, 27, 40);
            updateAnsweredNav();
        }
        
        function updateAnsweredNav() {
            const navButtons = document.querySelectorAll('.subQuestion');
            navButtons.forEach(btn => {
                const qNum = parseInt(btn.textContent, 10);
                if (isQuestionAnswered(qNum)) {
                    btn.classList.add('answered');
                } else {
                    btn.classList.remove('answered');
                }
            });
        }
        
        function isQuestionAnswered(qNum) {
            // Check text inputs and select dropdowns
            const textInput = document.getElementById(`q${qNum}`);
            if (textInput && textInput.value.trim() !== '') {
                return true;
            }
            
            // Check radio buttons
            const radio = document.querySelector(`input[name="q${qNum}"]:checked`);
            if (radio) {
                return true;
            }
            
            // Check checkbox questions (questions 12-13 and 23-24)
            if (qNum >= 12 && qNum <= 13) {
                const checkboxes = document.querySelectorAll(`input[name="q12-13"]:checked`);
                return checkboxes.length === 2; // Both B and D should be selected
            }
            if (qNum === 23 || qNum === 24) {
                const checkboxes = document.querySelectorAll(`input[name="q23-24"]:checked`);
                return checkboxes.length >= 2; // Both questions answered when 2 checkboxes selected
            }
            
            // Check drop zones for drag-and-drop questions (questions 14-18, 27-31, and 37-40)
            if ((qNum >= 14 && qNum <= 18) || (qNum >= 27 && qNum <= 31) || (qNum >= 37 && qNum <= 40)) {
                let dropZone;
                if (qNum >= 37 && qNum <= 40) {
                    // For summary questions, use summary-drop-zone
                    dropZone = document.querySelector(`.summary-drop-zone[data-q-start="${qNum}"]`);
                } else {
                    // For other drag-drop questions, use regular drop-zone
                    dropZone = document.querySelector(`.drop-zone[data-q-start="${qNum}"]`);
                }
                if (dropZone && dropZone.querySelector('.drag-item')) {
                    return true;
                }
            }
            
            return false;
        }

        function scrollIntoViewIfNeeded(element) {
            const panel = element.closest('.questions-panel, .passage-panel');
            const panelRect = panel.getBoundingClientRect();
            const elementRect = element.getBoundingClientRect();
            if (elementRect.top < panelRect.top || elementRect.bottom > panelRect.bottom) {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        // --- DRAG AND DROP ---
        
        function initializeDragAndDrop() {
            document.querySelectorAll('.drag-item').forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
                item.addEventListener('click', () => selectDragItem(item));
            });
            document.querySelectorAll('.drop-zone, .summary-drop-zone, .drag-options-container').forEach(zone => {
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('dragleave', handleDragLeave);
                zone.addEventListener('drop', handleDrop);
            });
        }

        function handleDragStart(e) {
            draggedItem = e.target;
            setTimeout(() => e.target.classList.add('dragging'), 0);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            draggedItem = null;
        }

        function handleDragOver(e) {
            e.preventDefault();
            const targetZone = e.currentTarget;
            if (draggedItem && draggedItem.dataset.dndGroup === targetZone.dataset.dndGroup) {
                targetZone.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            const targetZone = e.currentTarget;
            targetZone.classList.remove('drag-over');

            if (!draggedItem || draggedItem.dataset.dndGroup !== targetZone.dataset.dndGroup) {
                return;
            }

            const sourceZone = draggedItem.parentElement;
            if (sourceZone === targetZone) return; // Prevent dropping on itself

            const existingItemInTarget = (targetZone.classList.contains('drop-zone') || targetZone.classList.contains('summary-drop-zone'))
                ? targetZone.querySelector('.drag-item')
                : null;

            // First, clear the target drop-zone of any text (like question numbers) before adding the new item.
            if (targetZone.classList.contains('drop-zone') || targetZone.classList.contains('summary-drop-zone')) {
                Array.from(targetZone.childNodes).forEach(node => {
                    if (node.nodeType === Node.TEXT_NODE) {
                        node.remove();
                    }
                });
            }

            // Move the item that was in the target (if any) to the source zone.
            if (existingItemInTarget) {
                sourceZone.appendChild(existingItemInTarget);
            }
            
            // Finally, move the dragged item to the target zone.
            targetZone.appendChild(draggedItem);
            targetZone.classList.add('filled');

            // After the move, clean up the source zone if it's a drop-zone and is now empty.
            if ((sourceZone.classList.contains('drop-zone') || sourceZone.classList.contains('summary-drop-zone')) && !sourceZone.querySelector('.drag-item')) {
                 sourceZone.classList.remove('filled');
                 const qNum = sourceZone.dataset.qStart;
                 if (qNum && sourceZone.classList.contains('drop-zone')) {
                     sourceZone.innerText = qNum; // Restore the question number for regular drop zones
                 } else if (qNum && sourceZone.classList.contains('summary-drop-zone')) {
                     sourceZone.innerText = qNum; // Restore the question number for summary drop zones
                 }
            }
            
            // Clear any previous result styling
            targetZone.classList.remove('correct', 'incorrect');
            if (sourceZone.classList.contains('drop-zone') || sourceZone.classList.contains('summary-drop-zone')) {
                sourceZone.classList.remove('correct', 'incorrect');
            }
            
            updateAllIndicators();
        }
        
        // --- MISC HELPERS ---
        
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval); // Ensure no multiple intervals
            timerInterval = setInterval(() => {
                timeInSeconds--;
                const minutes = Math.floor(timeInSeconds / 60);
                const seconds = timeInSeconds % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                if (timeInSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "Time's up!";
                    // checkAnswers(); // Disabled to prevent modal from opening automatically.
                }
            }, 1000);
            timerToggleButton.innerHTML = pauseIcon;
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            timerToggleButton.innerHTML = playIcon;
        }

        function toggleTimer() {
            // Check based on the icon currently displayed
            if (timerToggleButton.innerHTML.includes('M6 19h4V5H6v14z')) { // Check for pause icon shape
                pauseTimer();
            } else {
                startTimer();
            }
        }

        function resetTimer() {
            timeInSeconds = 3600;
            const minutes = Math.floor(timeInSeconds / 60);
            const seconds = timeInSeconds % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            startTimer();
            timerToggleButton.innerHTML = pauseIcon;
        }
        
        function setupCheckboxLimits() {
            const checkboxGroups = [
                { name: 'q12-13', limit: 2 },
                { name: 'q23-24', limit: 2 },
                { name: 'q38-40', limit: 3 }
            ];
            checkboxGroups.forEach(group => {
                const checkboxes = document.querySelectorAll(`input[name="${group.name}"]`);
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        const checkedCount = document.querySelectorAll(`input[name="${group.name}"]:checked`).length;
                        if (checkedCount > group.limit) checkbox.checked = false;
                        updateAllIndicators();
                    });
                });
            });
        }

        function setupExampleHeading() {
            const exampleBox = document.querySelector('.example-box');
            if(exampleBox){
                const title = document.createElement('p');
                title.style.fontWeight = 'bold';
                title.textContent = 'List of Statements';
                // exampleBox.insertBefore(title, exampleBox.firstChild);
            }
        }
        
        function initResize(e) {
            e.preventDefault();
            const startX = e.clientX;
            const startWidth = passagePanel.offsetWidth;
            
            const doDrag = (e) => {
                const newWidth = startWidth + e.clientX - startX;
                if (newWidth > 200 && (document.body.clientWidth - newWidth - resizer.offsetWidth) > 200) {
                    passagePanel.style.flex = `0 0 ${newWidth}px`;
                }
            };
            const stopDrag = () => {
                window.removeEventListener('mousemove', doDrag, false);
                window.removeEventListener('mouseup', stopDrag, false);
            };
            
            window.addEventListener('mousemove', doDrag, false);
            window.addEventListener('mouseup', stopDrag, false);
        }
        
        // --- CONTEXT MENU (Highlighting) ---
        
        function initializeContextMenu() {
            const panels = [passagePanel, questionsPanel];
            let targetElementForClear = null;

            // This listener simply tracks the last valid text selection in either panel.
            document.addEventListener('selectionchange', () => {
                const selection = window.getSelection();
                if (selection && !selection.isCollapsed && selection.toString().trim().length > 0) {
                    const range = selection.getRangeAt(0);
                    if (panels.some(panel => panel.contains(range.commonAncestorContainer))) {
                        selectedRange = range;
                        targetElementForClear = null; // New selection overrides clearing a specific element
                    }
                }
            });

            const showContextMenu = (e) => {
                const target = e.target;
                const isClickOnHighlight = target.closest('.highlight, .comment-highlight');
                const isSelectionActive = selectedRange && selectedRange.toString().trim().length > 0;
                
                let showMenu = false;

                if (isClickOnHighlight) {
                    document.getElementById('menu-highlight').style.display = 'none';
                    document.getElementById('menu-note').style.display = 'none';
                    document.getElementById('menu-clear').style.display = 'block';
                    document.getElementById('menu-clear-all').style.display = 'block';
                    contextMenu.targetElementForClear = isClickOnHighlight;
                    showMenu = true;
                } else if (isSelectionActive && panels.some(panel => panel.contains(selectedRange.commonAncestorContainer))) {
                    document.getElementById('menu-highlight').style.display = 'flex';
                    document.getElementById('menu-note').style.display = 'flex';
                    document.getElementById('menu-clear').style.display = 'none';
                    document.getElementById('menu-clear-all').style.display = 'block'; // Always show clear all
                    showMenu = true;
                }

                if (showMenu) {
                    e.preventDefault();
                    contextMenu.style.display = 'block';
                    const menuHeight = contextMenu.offsetHeight;
                    const menuWidth = contextMenu.offsetWidth;
                    let left = e.pageX;
                    let top = e.pageY;
                    if (left + menuWidth > window.innerWidth) left = window.innerWidth - menuWidth - 5;
                    if (top + menuHeight > window.innerHeight) top = e.pageY - menuHeight - 5;
                    else top = e.pageY - menuHeight - 5;
                    
                    contextMenu.style.left = `${left}px`;
                    contextMenu.style.top = `${top}px`;
                }
            };

            panels.forEach(panel => {
                panel.addEventListener('contextmenu', showContextMenu);
            });

            document.addEventListener('click', (e) => {
                if (contextMenu.style.display === 'block' && !contextMenu.contains(e.target)) {
                    closeContextMenu();
                }
            });
        }

        function closeContextMenu() {
            contextMenu.style.display = 'none';
            selectedRange = null; // Clear range after menu closes
        }

        function unwrapElement(element) {
            const parent = element.parentNode;
            if (!parent) return;
            while (element.firstChild) {
                parent.insertBefore(element.firstChild, element);
            }
            parent.removeChild(element);
            parent.normalize();
        }

        window.highlightText = () => {
            if (selectedRange && !selectedRange.collapsed) {
                try {
                    highlightSelection(selectedRange, 'highlight');
                } catch (e) {
                    console.warn('Highlighting failed:', e);
                }
            }
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        window.addNote = () => {
            const note = prompt('Enter your note:');
            if (note && selectedRange && !selectedRange.collapsed) {
                try {
                    highlightSelection(selectedRange, 'comment-highlight', note);
                } catch (e) {
                    console.warn('Note adding failed:', e);
                }
            }
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        function highlightSelection(range, className, noteText = null) {
            // Get all text nodes within the selection
            const walker = document.createTreeWalker(
                range.commonAncestorContainer,
                NodeFilter.SHOW_TEXT,
                {
                    acceptNode: function(node) {
                        const nodeRange = document.createRange();
                        nodeRange.selectNodeContents(node);
                        return range.intersectsNode(node) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;
                    }
                }
            );

            const textNodes = [];
            let node;
            while (node = walker.nextNode()) {
                textNodes.push(node);
            }

            if (textNodes.length === 0) {
                // Fallback to original method for simple selections
                const contents = range.extractContents();
                const span = document.createElement('span');
                span.className = className;
                if (noteText) {
                    const tooltip = document.createElement('span');
                    tooltip.className = 'comment-tooltip';
                    tooltip.textContent = noteText;
                    span.appendChild(contents);
                    span.appendChild(tooltip);
                } else {
                    span.appendChild(contents);
                }
                range.insertNode(span);
                return;
            }

            // Process each text node
            const nodesToHighlight = [];
            textNodes.forEach(textNode => {
                const nodeRange = document.createRange();
                nodeRange.selectNodeContents(textNode);
                
                // Find intersection with selection
                const intersection = document.createRange();
                intersection.setStart(
                    range.startContainer.compareDocumentPosition(textNode) & Node.DOCUMENT_POSITION_FOLLOWING ?
                    textNode : range.startContainer,
                    range.startContainer.compareDocumentPosition(textNode) & Node.DOCUMENT_POSITION_FOLLOWING ?
                    0 : range.startOffset
                );
                intersection.setEnd(
                    range.endContainer.compareDocumentPosition(textNode) & Node.DOCUMENT_POSITION_PRECEDING ?
                    textNode : range.endContainer,
                    range.endContainer.compareDocumentPosition(textNode) & Node.DOCUMENT_POSITION_PRECEDING ?
                    textNode.textContent.length : range.endOffset
                );

                if (!intersection.collapsed) {
                    nodesToHighlight.push({
                        node: textNode,
                        startOffset: intersection.startOffset,
                        endOffset: intersection.endOffset
                    });
                }
            });

            // Apply highlighting to each node
            nodesToHighlight.reverse().forEach(({node, startOffset, endOffset}) => {
                const beforeText = node.textContent.substring(0, startOffset);
                const highlightText = node.textContent.substring(startOffset, endOffset);
                const afterText = node.textContent.substring(endOffset);

                const span = document.createElement('span');
                span.className = className;
                span.textContent = highlightText;

                if (noteText && className === 'comment-highlight') {
                    const tooltip = document.createElement('span');
                    tooltip.className = 'comment-tooltip';
                    tooltip.textContent = noteText;
                    span.appendChild(tooltip);
                }

                const parent = node.parentNode;
                
                if (beforeText) {
                    parent.insertBefore(document.createTextNode(beforeText), node);
                }
                parent.insertBefore(span, node);
                if (afterText) {
                    parent.insertBefore(document.createTextNode(afterText), node);
                }
                parent.removeChild(node);
            });
        }

        window.clearHighlight = () => {
             const elementToClear = contextMenu.targetElementForClear;
             if (elementToClear) {
                 unwrapElement(elementToClear);
             }
             closeContextMenu();
             window.getSelection().removeAllRanges();
        };
        
        window.clearAllHighlights = () => {
            document.querySelectorAll('.highlight, .comment-highlight').forEach(unwrapElement);
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        function updateAttemptedCount(part, startQ, endQ) {
            let answeredCount = 0;
            for (let i = startQ; i <= endQ; i++) {
                if (isQuestionAnswered(i)) {
                    answeredCount++;
                }
            }
            const partHeader = document.querySelector(`.footer__questionNo___3WNct[onclick="switchToPart(${part})"]`);
            if (partHeader) {
                const countSpan = partHeader.querySelector('.attemptedCount');
                if (countSpan) {
                     countSpan.textContent = `${answeredCount} of ${endQ - startQ + 1}`;
                }
            }
        }

        // --- GLOBAL FUNCTION EXPOSURE ---
        window.nextQuestion = nextQuestion;
        window.previousQuestion = previousQuestion;
        window.goToQuestion = goToQuestion;
        window.switchToPart = switchToPart;
        window.closeResultsModal = closeResultsModal;
        window.highlightText = highlightText;
        window.addNote = addNote;
        window.clearHighlight = clearHighlight;
        window.clearAllHighlights = clearAllHighlights;

        // --- START THE APP ---
        initialize();
    });
    </script>


</body></html>
